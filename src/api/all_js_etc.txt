import {y as L, z as m, P as D, g as P, A as T, B, D as b, k as M, E as N, F as Y, G as U, I as h, J as x, K as z, L as G, M as $, N as q, S as w, O as y} from "./ByWyckft.js";
import {c as C} from "./BIPZIaNt.js";
function K(r, a, t, s) {
    var f = !x || (t & z) !== 0, v = (t & U) !== 0, O = (t & $) !== 0, n = s, l = !0, I = () => (l && (l = !1,
    n = O ? h(s) : s),
    n), u;
    if (v) {
        var o = w in r || y in r;
        u = L(r, a)?.set ?? (o && a in r ? e => r[a] = e : void 0)
    }
    var _, g = !1;
    v ? [_,g] = C( () => r[a]) : _ = r[a],
    _ === void 0 && s !== void 0 && (_ = I(),
    u && (f && m(),
    u(_)));
    var i;
    if (f ? i = () => {
        var e = r[a];
        return e === void 0 ? I() : (l = !0,
        e)
    }
    : i = () => {
        var e = r[a];
        return e !== void 0 && (n = void 0),
        e === void 0 ? n : e
    }
    ,
    f && (t & D) === 0)
        return i;
    if (u) {
        var A = r.$$legacy;
        return (function(e, S) {
            return arguments.length > 0 ? ((!f || !S || A || g) && u(S ? i() : e),
            e) : i()
        }
        )
    }
    var c = !1
      , d = ((t & G) !== 0 ? T : B)( () => (c = !1,
    i()));
    v && P(d);
    var R = N;
    return (function(e, S) {
        if (arguments.length > 0) {
            const E = S ? P(d) : f && v ? b(e) : e;
            return M(d, E),
            c = !0,
            n !== void 0 && (n = E),
            e
        }
        return q && c || (R.f & Y) !== 0 ? d.v : P(d)
    }
    )
}
export {K as p};
import {Q as a, R as f, T as c, k as l, U as b, g as _, V as d, W as p} from "./ByWyckft.js";
let u = !1
  , t = Symbol();
function v(e, n, r) {
    const s = r[n] ??= {
        store: null,
        source: f(void 0),
        unsubscribe: a
    };
    if (s.store !== e && !(t in r))
        if (s.unsubscribe(),
        s.store = e ?? null,
        e == null)
            s.source.v = void 0,
            s.unsubscribe = a;
        else {
            var i = !0;
            s.unsubscribe = c(e, o => {
                i ? s.source.v = o : l(s.source, o)
            }
            ),
            i = !1
        }
    return e && t in r ? b(e) : _(s.source)
}
function m() {
    const e = {};
    function n() {
        d( () => {
            for (var r in e)
                e[r].unsubscribe();
            p(e, t, {
                enumerable: !1,
                value: !0
            })
        }
        )
    }
    return [e, n]
}
function y(e) {
    var n = u;
    try {
        return u = !1,
        [e(), u]
    } finally {
        u = n
    }
}
export {v as a, y as c, m as s};
import {a6 as g, a7 as d, u as c, I as b, a8 as m, a9 as i, g as p, aa as v, A as h, ab as k} from "./ByWyckft.js";
function x(t=!1) {
    const a = g
      , e = a.l.u;
    if (!e)
        return;
    let f = () => v(a.s);
    if (t) {
        let n = 0
          , s = {};
        const _ = h( () => {
            let l = !1;
            const r = a.s;
            for (const o in r)
                r[o] !== s[o] && (s[o] = r[o],
                l = !0);
            return l && n++,
            n
        }
        );
        f = () => p(_)
    }
    e.b.length && d( () => {
        u(a, f),
        i(e.b)
    }
    ),
    c( () => {
        const n = b( () => e.m.map(m));
        return () => {
            for (const s of n)
                typeof s == "function" && s()
        }
    }
    ),
    e.a.length && c( () => {
        u(a, f),
        i(e.a)
    }
    )
}
function u(t, a) {
    if (t.l.s)
        for (const e of t.l.s)
            p(e);
    a()
}
k();
export {x as i};
var kt = Array.isArray
  , kn = Array.prototype.indexOf
  , Sn = Array.from
  , Rn = Object.defineProperty
  , Ae = Object.getOwnPropertyDescriptor
  , Cn = Object.getOwnPropertyDescriptors
  , On = Object.prototype
  , Dn = Array.prototype
  , St = Object.getPrototypeOf
  , wt = Object.isExtensible;
const ve = () => {}
;
function zr(e) {
    return e()
}
function Rt(e) {
    for (var t = 0; t < e.length; t++)
        e[t]()
}
function Ct() {
    var e, t, n = new Promise( (r, s) => {
        e = r,
        t = s
    }
    );
    return {
        promise: n,
        resolve: e,
        reject: t
    }
}
const b = 2
  , ot = 4
  , $e = 8
  , Nn = 1 << 24
  , G = 16
  , K = 32
  , ce = 64
  , We = 128
  , L = 512
  , x = 1024
  , R = 2048
  , X = 4096
  , B = 8192
  , te = 16384
  , ze = 32768
  , pe = 65536
  , tt = 1 << 17
  , Ot = 1 << 18
  , me = 1 << 19
  , Dt = 1 << 20
  , Gr = 1 << 25
  , oe = 32768
  , nt = 1 << 21
  , ut = 1 << 22
  , ne = 1 << 23
  , fe = Symbol("$state")
  , Kr = Symbol("legacy props")
  , Xr = Symbol("")
  , de = new class extends Error {
    name = "StaleReactionError";
    message = "The reaction that called `getAbortSignal()` was re-run or destroyed"
}
  , Ge = 3
  , Ne = 8;
function Nt(e) {
    throw new Error("https://svelte.dev/e/experimental_async_required")
}
function be(e) {
    throw new Error("https://svelte.dev/e/lifecycle_outside_component")
}
function Pn() {
    throw new Error("https://svelte.dev/e/missing_context")
}
function Mn() {
    throw new Error("https://svelte.dev/e/async_derived_orphan")
}
function In(e) {
    throw new Error("https://svelte.dev/e/effect_in_teardown")
}
function Fn() {
    throw new Error("https://svelte.dev/e/effect_in_unowned_derived")
}
function Ln(e) {
    throw new Error("https://svelte.dev/e/effect_orphan")
}
function jn() {
    throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")
}
function qn() {
    throw new Error("https://svelte.dev/e/fork_discarded")
}
function Yn() {
    throw new Error("https://svelte.dev/e/fork_timing")
}
function Bn() {
    throw new Error("https://svelte.dev/e/get_abort_signal_outside_reaction")
}
function Hn() {
    throw new Error("https://svelte.dev/e/hydration_failed")
}
function Pt(e) {
    throw new Error("https://svelte.dev/e/lifecycle_legacy_only")
}
function Jr(e) {
    throw new Error("https://svelte.dev/e/props_invalid_value")
}
function Un() {
    throw new Error("https://svelte.dev/e/state_descriptors_fixed")
}
function Vn() {
    throw new Error("https://svelte.dev/e/state_prototype_fixed")
}
function $n() {
    throw new Error("https://svelte.dev/e/state_unsafe_mutation")
}
function Wn() {
    throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")
}
const Qr = 1
  , es = 2
  , ts = 4
  , ns = 8
  , rs = 16
  , ss = 1
  , is = 2
  , fs = 4
  , as = 8
  , ls = 16
  , Mt = 1
  , zn = 2
  , It = "["
  , Ft = "[!"
  , Lt = "]"
  , ge = {}
  , T = Symbol()
  , os = "http://www.w3.org/1999/xhtml";
function us() {}
let m = !1;
function je(e) {
    m = e
}
let g;
function j(e) {
    if (e === null)
        throw ge;
    return g = e
}
function ct() {
    return j(Z(g))
}
function cs(e) {
    if (m) {
        if (Z(g) !== null)
            throw ge;
        g = e
    }
}
function Gn(e=1) {
    if (m) {
        for (var t = e, n = g; t--; )
            n = Z(n);
        g = n
    }
}
function Kn(e=!0) {
    for (var t = 0, n = g; ; ) {
        if (n.nodeType === Ne) {
            var r = n.data;
            if (r === Lt) {
                if (t === 0)
                    return n;
                t -= 1
            } else
                (r === It || r === Ft) && (t += 1)
        }
        var s = Z(n);
        e && n.remove(),
        n = s
    }
}
function _s(e) {
    if (!e || e.nodeType !== Ne)
        throw ge;
    return e.data
}
function jt(e) {
    return e === this.v
}
function qt(e, t) {
    return e != e ? t == t : e !== t || e !== null && typeof e == "object" || typeof e == "function"
}
function Yt(e) {
    return !qt(e, this.v)
}
let Pe = !1;
function hs() {
    Pe = !0
}
let v = null;
function we(e) {
    v = e
}
function Xn() {
    const e = {};
    return [ () => (Ut(e) || Pn(),
    Bt(e)), t => Ht(e, t)]
}
function Bt(e) {
    return Ke().get(e)
}
function Ht(e, t) {
    return Ke().set(e, t),
    t
}
function Ut(e) {
    return Ke().has(e)
}
function Zn() {
    return Ke()
}
function Jn(e, t=!1, n) {
    v = {
        p: v,
        i: !1,
        c: null,
        e: null,
        s: e,
        x: null,
        l: Pe && !t ? {
            s: null,
            u: null,
            $: []
        } : null
    }
}
function Qn(e) {
    var t = v
      , n = t.e;
    if (n !== null) {
        t.e = null;
        for (var r of n)
            fn(r)
    }
    return e !== void 0 && (t.x = e),
    t.i = !0,
    v = t.p,
    e ?? {}
}
function Me() {
    return !Pe || v !== null && v.l === null
}
function Ke(e) {
    return v === null && be(),
    v.c ??= new Map(er(v) || void 0)
}
function er(e) {
    let t = e.p;
    for (; t !== null; ) {
        const n = t.c;
        if (n !== null)
            return n;
        t = t.p
    }
    return null
}
let se = [];
function Vt() {
    var e = se;
    se = [],
    Rt(e)
}
function Xe(e) {
    if (se.length === 0 && !ke) {
        var t = se;
        queueMicrotask( () => {
            t === se && Vt()
        }
        )
    }
    se.push(e)
}
function tr() {
    for (; se.length > 0; )
        Vt()
}
function $t(e) {
    var t = p;
    if (t === null)
        return d.f |= ne,
        e;
    if ((t.f & ze) === 0) {
        if ((t.f & We) === 0)
            throw e;
        t.b.error(e)
    } else
        ye(e, t)
}
function ye(e, t) {
    for (; t !== null; ) {
        if ((t.f & We) !== 0)
            try {
                t.b.error(e);
                return
            } catch (n) {
                e = n
            }
        t = t.parent
    }
    throw e
}
const ie = new Set;
let y = null
  , et = null
  , k = null
  , M = []
  , Ze = null
  , rt = !1
  , ke = !1;
class I {
    committed = !1;
    current = new Map;
    previous = new Map;
    #e = new Set;
    #t = new Set;
    #n = 0;
    #r = 0;
    #l = null;
    #i = [];
    #s = [];
    skipped_effects = new Set;
    is_fork = !1;
    is_deferred() {
        return this.is_fork || this.#r > 0
    }
    process(t) {
        M = [],
        et = null,
        this.apply();
        var n = {
            parent: null,
            effect: null,
            effects: [],
            render_effects: [],
            block_effects: []
        };
        for (const r of t)
            this.#f(r, n);
        this.is_fork || this.#u(),
        this.is_deferred() ? (this.#a(n.effects),
        this.#a(n.render_effects),
        this.#a(n.block_effects)) : (et = this,
        y = null,
        yt(n.render_effects),
        yt(n.effects),
        et = null,
        this.#l?.resolve()),
        k = null
    }
    #f(t, n) {
        t.f ^= x;
        for (var r = t.first; r !== null; ) {
            var s = r.f
              , i = (s & (K | ce)) !== 0
              , f = i && (s & x) !== 0
              , o = f || (s & B) !== 0 || this.skipped_effects.has(r);
            if ((r.f & We) !== 0 && r.b?.is_pending() && (n = {
                parent: n,
                effect: r,
                effects: [],
                render_effects: [],
                block_effects: []
            }),
            !o && r.fn !== null) {
                i ? r.f ^= x : (s & ot) !== 0 ? n.effects.push(r) : Fe(r) && ((r.f & G) !== 0 && n.block_effects.push(r),
                De(r));
                var a = r.first;
                if (a !== null) {
                    r = a;
                    continue
                }
            }
            var l = r.parent;
            for (r = r.next; r === null && l !== null; )
                l === n.effect && (this.#a(n.effects),
                this.#a(n.render_effects),
                this.#a(n.block_effects),
                n = n.parent),
                r = l.next,
                l = l.parent
        }
    }
    #a(t) {
        for (const n of t)
            ((n.f & R) !== 0 ? this.#i : this.#s).push(n),
            this.#o(n.deps),
            E(n, x)
    }
    #o(t) {
        if (t !== null)
            for (const n of t)
                (n.f & b) === 0 || (n.f & oe) === 0 || (n.f ^= oe,
                this.#o(n.deps))
    }
    capture(t, n) {
        this.previous.has(t) || this.previous.set(t, n),
        (t.f & ne) === 0 && (this.current.set(t, t.v),
        k?.set(t, t.v))
    }
    activate() {
        y = this,
        this.apply()
    }
    deactivate() {
        y === this && (y = null,
        k = null)
    }
    flush() {
        if (this.activate(),
        M.length > 0) {
            if (st(),
            y !== null && y !== this)
                return
        } else
            this.#n === 0 && this.process([]);
        this.deactivate()
    }
    discard() {
        for (const t of this.#t)
            t(this);
        this.#t.clear()
    }
    #u() {
        if (this.#r === 0) {
            for (const t of this.#e)
                t();
            this.#e.clear()
        }
        this.#n === 0 && this.#c()
    }
    #c() {
        if (ie.size > 1) {
            this.previous.clear();
            var t = k
              , n = !0
              , r = {
                parent: null,
                effect: null,
                effects: [],
                render_effects: [],
                block_effects: []
            };
            for (const i of ie) {
                if (i === this) {
                    n = !1;
                    continue
                }
                const f = [];
                for (const [a,l] of this.current) {
                    if (i.current.has(a))
                        if (n && l !== i.current.get(a))
                            i.current.set(a, l);
                        else
                            continue;
                    f.push(a)
                }
                if (f.length === 0)
                    continue;
                const o = [...i.current.keys()].filter(a => !this.current.has(a));
                if (o.length > 0) {
                    var s = M;
                    M = [];
                    const a = new Set
                      , l = new Map;
                    for (const c of f)
                        Wt(c, o, a, l);
                    if (M.length > 0) {
                        y = i,
                        i.apply();
                        for (const c of M)
                            i.#f(c, r);
                        i.deactivate()
                    }
                    M = s
                }
            }
            y = null,
            k = t
        }
        this.committed = !0,
        ie.delete(this)
    }
    increment(t) {
        this.#n += 1,
        t && (this.#r += 1)
    }
    decrement(t) {
        this.#n -= 1,
        t && (this.#r -= 1),
        this.revive()
    }
    revive() {
        for (const t of this.#i)
            E(t, R),
            ue(t);
        for (const t of this.#s)
            E(t, X),
            ue(t);
        this.#i = [],
        this.#s = [],
        this.flush()
    }
    oncommit(t) {
        this.#e.add(t)
    }
    ondiscard(t) {
        this.#t.add(t)
    }
    settled() {
        return (this.#l ??= Ct()).promise
    }
    static ensure() {
        if (y === null) {
            const t = y = new I;
            ie.add(y),
            ke || I.enqueue( () => {
                y === t && t.flush()
            }
            )
        }
        return y
    }
    static enqueue(t) {
        Xe(t)
    }
    apply() {}
}
function qe(e) {
    var t = ke;
    ke = !0;
    try {
        var n;
        for (e && (y !== null && st(),
        n = e()); ; ) {
            if (tr(),
            M.length === 0 && (y?.flush(),
            M.length === 0))
                return Ze = null,
                n;
            st()
        }
    } finally {
        ke = t
    }
}
function st() {
    var e = ae;
    rt = !0;
    var t = null;
    try {
        var n = 0;
        for (Ue(!0); M.length > 0; ) {
            var r = I.ensure();
            if (n++ > 1e3) {
                var s, i;
                nr()
            }
            r.process(M),
            re.clear()
        }
    } finally {
        rt = !1,
        Ue(e),
        Ze = null
    }
}
function nr() {
    try {
        jn()
    } catch (e) {
        ye(e, Ze)
    }
}
let $ = null;
function yt(e) {
    var t = e.length;
    if (t !== 0) {
        for (var n = 0; n < t; ) {
            var r = e[n++];
            if ((r.f & (te | B)) === 0 && Fe(r) && ($ = new Set,
            De(r),
            r.deps === null && r.first === null && r.nodes === null && (r.teardown === null && r.ac === null ? un(r) : r.fn = null),
            $?.size > 0)) {
                re.clear();
                for (const s of $) {
                    if ((s.f & (te | B)) !== 0)
                        continue;
                    const i = [s];
                    let f = s.parent;
                    for (; f !== null; )
                        $.has(f) && ($.delete(f),
                        i.push(f)),
                        f = f.parent;
                    for (let o = i.length - 1; o >= 0; o--) {
                        const a = i[o];
                        (a.f & (te | B)) === 0 && De(a)
                    }
                }
                $.clear()
            }
        }
        $ = null
    }
}
function Wt(e, t, n, r) {
    if (!n.has(e) && (n.add(e),
    e.reactions !== null))
        for (const s of e.reactions) {
            const i = s.f;
            (i & b) !== 0 ? Wt(s, t, n, r) : (i & (ut | G)) !== 0 && (i & R) === 0 && Gt(s, t, r) && (E(s, R),
            ue(s))
        }
}
function zt(e, t) {
    if (e.reactions !== null)
        for (const n of e.reactions) {
            const r = n.f;
            (r & b) !== 0 ? zt(n, t) : (r & tt) !== 0 && (E(n, R),
            t.add(n))
        }
}
function Gt(e, t, n) {
    const r = n.get(e);
    if (r !== void 0)
        return r;
    if (e.deps !== null)
        for (const s of e.deps) {
            if (t.includes(s))
                return !0;
            if ((s.f & b) !== 0 && Gt(s, t, n))
                return n.set(s, !0),
                !0
        }
    return n.set(e, !1),
    !1
}
function ue(e) {
    for (var t = Ze = e; t.parent !== null; ) {
        t = t.parent;
        var n = t.f;
        if (rt && t === p && (n & G) !== 0 && (n & Ot) === 0)
            return;
        if ((n & (ce | K)) !== 0) {
            if ((n & x) === 0)
                return;
            t.f ^= x
        }
    }
    M.push(t)
}
function rr(e) {
    Nt(),
    y !== null && Yn();
    var t = I.ensure();
    t.is_fork = !0,
    k = new Map;
    var n = !1
      , r = t.settled();
    qe(e),
    k = null;
    for (var [s,i] of t.previous)
        s.v = i;
    return {
        commit: async () => {
            if (n) {
                await r;
                return
            }
            ie.has(t) || qn(),
            n = !0,
            t.is_fork = !1;
            for (var [f,o] of t.current)
                f.v = o;
            qe( () => {
                var a = new Set;
                for (var l of t.current.keys())
                    zt(l, a);
                hr(a),
                Jt()
            }
            ),
            t.revive(),
            await r
        }
        ,
        discard: () => {
            !n && ie.has(t) && (ie.delete(t),
            t.discard())
        }
    }
}
function sr(e) {
    let t = 0, n = Ie(0), r;
    return () => {
        Ce() && (ee(n),
        br( () => (t === 0 && (r = Le( () => e( () => Se(n)))),
        t += 1,
        () => {
            Xe( () => {
                t -= 1,
                t === 0 && (r?.(),
                r = void 0,
                Se(n))
            }
            )
        }
        )))
    }
}
var ir = pe | me | We;
function fr(e, t, n) {
    new ar(e,t,n)
}
class ar {
    parent;
    #e = !1;
    #t;
    #n = m ? g : null;
    #r;
    #l;
    #i;
    #s = null;
    #f = null;
    #a = null;
    #o = null;
    #u = null;
    #c = 0;
    #_ = 0;
    #d = !1;
    #h = null;
    #y = sr( () => (this.#h = Ie(this.#c),
    () => {
        this.#h = null
    }
    ));
    constructor(t, n, r) {
        this.#t = t,
        this.#r = n,
        this.#l = r,
        this.parent = p.b,
        this.#e = !!this.#r.pending,
        this.#i = an( () => {
            if (p.b = this,
            m) {
                const i = this.#n;
                ct(),
                i.nodeType === Ne && i.data === Ft ? this.#b() : this.#m()
            } else {
                var s = this.#g();
                try {
                    this.#s = W( () => r(s))
                } catch (i) {
                    this.error(i)
                }
                this.#_ > 0 ? this.#p() : this.#e = !1
            }
            return () => {
                this.#u?.remove()
            }
        }
        , ir),
        m && (this.#t = g)
    }
    #m() {
        try {
            this.#s = W( () => this.#l(this.#t))
        } catch (t) {
            this.error(t)
        }
        this.#e = !1
    }
    #b() {
        const t = this.#r.pending;
        t && (this.#f = W( () => t(this.#t)),
        I.enqueue( () => {
            var n = this.#g();
            this.#s = this.#v( () => (I.ensure(),
            W( () => this.#l(n)))),
            this.#_ > 0 ? this.#p() : (Re(this.#f, () => {
                this.#f = null
            }
            ),
            this.#e = !1)
        }
        ))
    }
    #g() {
        var t = this.#t;
        return this.#e && (this.#u = q(),
        this.#t.before(this.#u),
        t = this.#u),
        t
    }
    is_pending() {
        return this.#e || !!this.parent && this.parent.is_pending()
    }
    has_pending_snippet() {
        return !!this.#r.pending
    }
    #v(t) {
        var n = p
          , r = d
          , s = v;
        H(this.#i),
        S(this.#i),
        we(this.#i.ctx);
        try {
            return t()
        } catch (i) {
            return $t(i),
            null
        } finally {
            H(n),
            S(r),
            we(s)
        }
    }
    #p() {
        const t = this.#r.pending;
        this.#s !== null && (this.#o = document.createDocumentFragment(),
        this.#o.append(this.#u),
        hn(this.#s, this.#o)),
        this.#f === null && (this.#f = W( () => t(this.#t)))
    }
    #w(t) {
        if (!this.has_pending_snippet()) {
            this.parent && this.parent.#w(t);
            return
        }
        this.#_ += t,
        this.#_ === 0 && (this.#e = !1,
        this.#f && Re(this.#f, () => {
            this.#f = null
        }
        ),
        this.#o && (this.#t.before(this.#o),
        this.#o = null))
    }
    update_pending_count(t) {
        this.#w(t),
        this.#c += t,
        this.#h && He(this.#h, this.#c)
    }
    get_effect_pending() {
        return this.#y(),
        ee(this.#h)
    }
    error(t) {
        var n = this.#r.onerror;
        let r = this.#r.failed;
        if (this.#d || !n && !r)
            throw t;
        this.#s && (N(this.#s),
        this.#s = null),
        this.#f && (N(this.#f),
        this.#f = null),
        this.#a && (N(this.#a),
        this.#a = null),
        m && (j(this.#n),
        Gn(),
        j(Kn()));
        var s = !1
          , i = !1;
        const f = () => {
            if (s) {
                return
            }
            s = !0,
            i && Wn(),
            I.ensure(),
            this.#c = 0,
            this.#a !== null && Re(this.#a, () => {
                this.#a = null
            }
            ),
            this.#e = this.has_pending_snippet(),
            this.#s = this.#v( () => (this.#d = !1,
            W( () => this.#l(this.#t)))),
            this.#_ > 0 ? this.#p() : this.#e = !1
        }
        ;
        var o = d;
        try {
            S(null),
            i = !0,
            n?.(t, f),
            i = !1
        } catch (a) {
            ye(a, this.#i && this.#i.parent)
        } finally {
            S(o)
        }
        r && Xe( () => {
            this.#a = this.#v( () => {
                I.ensure(),
                this.#d = !0;
                try {
                    return W( () => {
                        r(this.#t, () => t, () => f)
                    }
                    )
                } catch (a) {
                    return ye(a, this.#i.parent),
                    null
                } finally {
                    this.#d = !1
                }
            }
            )
        }
        )
    }
}
function lr(e, t, n, r) {
    const s = Me() ? _t : cr;
    if (n.length === 0 && e.length === 0) {
        r(t.map(s));
        return
    }
    var i = y
      , f = p
      , o = or();
    function a() {
        Promise.all(n.map(l => ur(l))).then(l => {
            o();
            try {
                r([...t.map(s), ...l])
            } catch (c) {
                (f.f & te) === 0 && ye(c, f)
            }
            i?.deactivate(),
            Ye()
        }
        ).catch(l => {
            ye(l, f)
        }
        )
    }
    e.length > 0 ? Promise.all(e).then( () => {
        o();
        try {
            return a()
        } finally {
            i?.deactivate(),
            Ye()
        }
    }
    ) : a()
}
function or() {
    var e = p
      , t = d
      , n = v
      , r = y;
    return function(i=!0) {
        H(e),
        S(t),
        we(n),
        i && r?.activate()
    }
}
function Ye() {
    H(null),
    S(null),
    we(null)
}
function _t(e) {
    var t = b | R
      , n = d !== null && (d.f & b) !== 0 ? d : null;
    return p !== null && (p.f |= me),
    {
        ctx: v,
        deps: null,
        effects: null,
        equals: jt,
        f: t,
        fn: e,
        reactions: null,
        rv: 0,
        v: T,
        wv: 0,
        parent: n ?? p,
        ac: null
    }
}
function ur(e, t) {
    let n = p;
    n === null && Mn();
    var r = n.b
      , s = void 0
      , i = Ie(T)
      , f = !d
      , o = new Map;
    return mr( () => {
        var a = Ct();
        s = a.promise;
        try {
            Promise.resolve(e()).then(a.resolve, a.reject).then( () => {
                l === y && l.committed && l.deactivate(),
                Ye()
            }
            )
        } catch (u) {
            a.reject(u),
            Ye()
        }
        var l = y;
        if (f) {
            var c = !r.is_pending();
            r.update_pending_count(1),
            l.increment(c),
            o.get(l)?.reject(de),
            o.delete(l),
            o.set(l, a)
        }
        const h = (u, _=void 0) => {
            if (l.activate(),
            _)
                _ !== de && (i.f |= ne,
                He(i, _));
            else {
                (i.f & ne) !== 0 && (i.f ^= ne),
                He(i, u);
                for (const [w,C] of o) {
                    if (o.delete(w),
                    w === l)
                        break;
                    C.reject(de)
                }
            }
            f && (r.update_pending_count(-1),
            l.decrement(c))
        }
        ;
        a.promise.then(h, u => h(null, u || "unknown"))
    }
    ),
    dt( () => {
        for (const a of o.values())
            a.reject(de)
    }
    ),
    new Promise(a => {
        function l(c) {
            function h() {
                c === s ? a(i) : l(s)
            }
            c.then(h, h)
        }
        l(s)
    }
    )
}
function ds(e) {
    const t = _t(e);
    return dn(t),
    t
}
function cr(e) {
    const t = _t(e);
    return t.equals = Yt,
    t
}
function Kt(e) {
    var t = e.effects;
    if (t !== null) {
        e.effects = null;
        for (var n = 0; n < t.length; n += 1)
            N(t[n])
    }
}
function _r(e) {
    for (var t = e.parent; t !== null; ) {
        if ((t.f & b) === 0)
            return (t.f & te) === 0 ? t : null;
        t = t.parent
    }
    return null
}
function ht(e) {
    var t, n = p;
    H(_r(e));
    try {
        e.f &= ~oe,
        Kt(e),
        t = wn(e)
    } finally {
        H(n)
    }
    return t
}
function Xt(e) {
    var t = ht(e);
    if (e.equals(t) || (y?.is_fork || (e.v = t),
    e.wv = pn()),
    !Ee)
        if (k !== null)
            (Ce() || y?.is_fork) && k.set(e, t);
        else {
            var n = (e.f & L) === 0 ? X : x;
            E(e, n)
        }
}
let Be = new Set;
const re = new Map;
function hr(e) {
    Be = e
}
let Zt = !1;
function Ie(e, t) {
    var n = {
        f: 0,
        v: e,
        reactions: null,
        equals: jt,
        rv: 0,
        wv: 0
    };
    return n
}
function J(e, t) {
    const n = Ie(e);
    return dn(n),
    n
}
function vs(e, t=!1, n=!0) {
    const r = Ie(e);
    return t || (r.equals = Yt),
    Pe && n && v !== null && v.l !== null && (v.l.s ??= []).push(r),
    r
}
function Q(e, t, n=!1) {
    d !== null && (!Y || (d.f & tt) !== 0) && Me() && (d.f & (b | G | ut | tt)) !== 0 && !z?.includes(e) && $n();
    let r = n ? Te(t) : t;
    return He(e, r)
}
function He(e, t) {
    if (!e.equals(t)) {
        var n = e.v;
        Ee ? re.set(e, t) : re.set(e, n),
        e.v = t;
        var r = I.ensure();
        r.capture(e, n),
        (e.f & b) !== 0 && ((e.f & R) !== 0 && ht(e),
        E(e, (e.f & L) !== 0 ? x : X)),
        e.wv = pn(),
        Qt(e, R),
        Me() && p !== null && (p.f & x) !== 0 && (p.f & (K | ce)) === 0 && (P === null ? Ar([e]) : P.push(e)),
        !r.is_fork && Be.size > 0 && !Zt && Jt()
    }
    return t
}
function Jt() {
    Zt = !1;
    var e = ae;
    Ue(!0);
    const t = Array.from(Be);
    try {
        for (const n of t)
            (n.f & x) !== 0 && E(n, X),
            Fe(n) && De(n)
    } finally {
        Ue(e)
    }
    Be.clear()
}
function ps(e, t=1) {
    var n = ee(e)
      , r = t === 1 ? n++ : n--;
    return Q(e, n),
    r
}
function Se(e) {
    Q(e, e.v + 1)
}
function Qt(e, t) {
    var n = e.reactions;
    if (n !== null)
        for (var r = Me(), s = n.length, i = 0; i < s; i++) {
            var f = n[i]
              , o = f.f;
            if (!(!r && f === p)) {
                var a = (o & R) === 0;
                if (a && E(f, t),
                (o & b) !== 0) {
                    var l = f;
                    k?.delete(l),
                    (o & oe) === 0 && (o & L && (f.f |= oe),
                    Qt(l, X))
                } else
                    a && ((o & G) !== 0 && $ !== null && $.add(f),
                    ue(f))
            }
        }
}
function Te(e) {
    if (typeof e != "object" || e === null || fe in e)
        return e;
    const t = St(e);
    if (t !== On && t !== Dn)
        return e;
    var n = new Map
      , r = kt(e)
      , s = J(0)
      , i = le
      , f = o => {
        if (le === i)
            return o();
        var a = d
          , l = le;
        S(null),
        xt(i);
        var c = o();
        return S(a),
        xt(l),
        c
    }
    ;
    return r && n.set("length", J(e.length)),
    new Proxy(e,{
        defineProperty(o, a, l) {
            (!("value"in l) || l.configurable === !1 || l.enumerable === !1 || l.writable === !1) && Un();
            var c = n.get(a);
            return c === void 0 ? c = f( () => {
                var h = J(l.value);
                return n.set(a, h),
                h
            }
            ) : Q(c, l.value, !0),
            !0
        },
        deleteProperty(o, a) {
            var l = n.get(a);
            if (l === void 0) {
                if (a in o) {
                    const c = f( () => J(T));
                    n.set(a, c),
                    Se(s)
                }
            } else
                Q(l, T),
                Se(s);
            return !0
        },
        get(o, a, l) {
            if (a === fe)
                return e;
            var c = n.get(a)
              , h = a in o;
            if (c === void 0 && (!h || Ae(o, a)?.writable) && (c = f( () => {
                var _ = Te(h ? o[a] : T)
                  , w = J(_);
                return w
            }
            ),
            n.set(a, c)),
            c !== void 0) {
                var u = ee(c);
                return u === T ? void 0 : u
            }
            return Reflect.get(o, a, l)
        },
        getOwnPropertyDescriptor(o, a) {
            var l = Reflect.getOwnPropertyDescriptor(o, a);
            if (l && "value"in l) {
                var c = n.get(a);
                c && (l.value = ee(c))
            } else if (l === void 0) {
                var h = n.get(a)
                  , u = h?.v;
                if (h !== void 0 && u !== T)
                    return {
                        enumerable: !0,
                        configurable: !0,
                        value: u,
                        writable: !0
                    }
            }
            return l
        },
        has(o, a) {
            if (a === fe)
                return !0;
            var l = n.get(a)
              , c = l !== void 0 && l.v !== T || Reflect.has(o, a);
            if (l !== void 0 || p !== null && (!c || Ae(o, a)?.writable)) {
                l === void 0 && (l = f( () => {
                    var u = c ? Te(o[a]) : T
                      , _ = J(u);
                    return _
                }
                ),
                n.set(a, l));
                var h = ee(l);
                if (h === T)
                    return !1
            }
            return c
        },
        set(o, a, l, c) {
            var h = n.get(a)
              , u = a in o;
            if (r && a === "length")
                for (var _ = l; _ < h.v; _ += 1) {
                    var w = n.get(_ + "");
                    w !== void 0 ? Q(w, T) : _ in o && (w = f( () => J(T)),
                    n.set(_ + "", w))
                }
            if (h === void 0)
                (!u || Ae(o, a)?.writable) && (h = f( () => J(void 0)),
                Q(h, Te(l)),
                n.set(a, h));
            else {
                u = h.v !== T;
                var C = f( () => Te(l));
                Q(h, C)
            }
            var V = Reflect.getOwnPropertyDescriptor(o, a);
            if (V?.set && V.set.call(c, l),
            !u) {
                if (r && typeof a == "string") {
                    var gt = n.get("length")
                      , Qe = Number(a);
                    Number.isInteger(Qe) && Qe >= gt.v && Q(gt, Qe + 1)
                }
                Se(s)
            }
            return !0
        },
        ownKeys(o) {
            ee(s);
            var a = Reflect.ownKeys(o).filter(h => {
                var u = n.get(h);
                return u === void 0 || u.v !== T
            }
            );
            for (var [l,c] of n)
                c.v !== T && !(l in o) && a.push(l);
            return a
        },
        setPrototypeOf() {
            Vn()
        }
    })
}
function mt(e) {
    try {
        if (e !== null && typeof e == "object" && fe in e)
            return e[fe]
    } catch {}
    return e
}
function gs(e, t) {
    return Object.is(mt(e), mt(t))
}
var bt, dr, en, tn, nn;
function it() {
    if (bt === void 0) {
        bt = window,
        dr = document,
        en = /Firefox/.test(navigator.userAgent);
        var e = Element.prototype
          , t = Node.prototype
          , n = Text.prototype;
        tn = Ae(t, "firstChild").get,
        nn = Ae(t, "nextSibling").get,
        wt(e) && (e.__click = void 0,
        e.__className = void 0,
        e.__attributes = null,
        e.__style = void 0,
        e.__e = void 0),
        wt(n) && (n.__t = void 0)
    }
}
function q(e="") {
    return document.createTextNode(e)
}
function D(e) {
    return tn.call(e)
}
function Z(e) {
    return nn.call(e)
}
function ws(e, t) {
    if (!m)
        return D(e);
    var n = D(g);
    if (n === null)
        n = g.appendChild(q());
    else if (t && n.nodeType !== Ge) {
        var r = q();
        return n?.before(r),
        j(r),
        r
    }
    return j(n),
    n
}
function ys(e, t=!1) {
    if (!m) {
        var n = D(e);
        return n instanceof Comment && n.data === "" ? Z(n) : n
    }
    if (t && g?.nodeType !== Ge) {
        var r = q();
        return g?.before(r),
        j(r),
        r
    }
    return g
}
function ms(e, t=1, n=!1) {
    let r = m ? g : e;
    for (var s; t--; )
        s = r,
        r = Z(r);
    if (!m)
        return r;
    if (n && r?.nodeType !== Ge) {
        var i = q();
        return r === null ? s?.after(i) : r.before(i),
        j(i),
        i
    }
    return j(r),
    r
}
function rn(e) {
    e.textContent = ""
}
function vr() {
    return !1
}
function bs(e) {
    m && D(e) !== null && rn(e)
}
let Et = !1;
function pr() {
    Et || (Et = !0,
    document.addEventListener("reset", e => {
        Promise.resolve().then( () => {
            if (!e.defaultPrevented)
                for (const t of e.target.elements)
                    t.__on_r?.()
        }
        )
    }
    , {
        capture: !0
    }))
}
function Je(e) {
    var t = d
      , n = p;
    S(null),
    H(null);
    try {
        return e()
    } finally {
        S(t),
        H(n)
    }
}
function Es(e, t, n, r=n) {
    e.addEventListener(t, () => Je(n));
    const s = e.__on_r;
    s ? e.__on_r = () => {
        s(),
        r(!0)
    }
    : e.__on_r = () => r(!0),
    pr()
}
function sn(e) {
    p === null && (d === null && Ln(),
    Fn()),
    Ee && In()
}
function gr(e, t) {
    var n = t.last;
    n === null ? t.last = t.first = e : (n.next = e,
    e.prev = n,
    t.last = e)
}
function U(e, t, n) {
    var r = p;
    r !== null && (r.f & B) !== 0 && (e |= B);
    var s = {
        ctx: v,
        deps: null,
        nodes: null,
        f: e | R | L,
        first: null,
        fn: t,
        last: null,
        next: null,
        parent: r,
        b: r && r.b,
        prev: null,
        teardown: null,
        wv: 0,
        ac: null
    };
    if (n)
        try {
            De(s),
            s.f |= ze
        } catch (o) {
            throw N(s),
            o
        }
    else
        t !== null && ue(s);
    var i = s;
    if (n && i.deps === null && i.teardown === null && i.nodes === null && i.first === i.last && (i.f & me) === 0 && (i = i.first,
    (e & G) !== 0 && (e & pe) !== 0 && i !== null && (i.f |= pe)),
    i !== null && (i.parent = r,
    r !== null && gr(i, r),
    d !== null && (d.f & b) !== 0 && (e & ce) === 0)) {
        var f = d;
        (f.effects ??= []).push(i)
    }
    return s
}
function Ce() {
    return d !== null && !Y
}
function dt(e) {
    const t = U($e, null, !1);
    return E(t, x),
    t.teardown = e,
    t
}
function wr(e) {
    sn();
    var t = p.f
      , n = !d && (t & K) !== 0 && (t & ze) === 0;
    if (n) {
        var r = v;
        (r.e ??= []).push(e)
    } else
        return fn(e)
}
function fn(e) {
    return U(ot | Dt, e, !1)
}
function Ts(e) {
    return sn(),
    U($e | Dt, e, !0)
}
function yr(e) {
    I.ensure();
    const t = U(ce | me, e, !0);
    return (n={}) => new Promise(r => {
        n.outro ? Re(t, () => {
            N(t),
            r(void 0)
        }
        ) : (N(t),
        r(void 0))
    }
    )
}
function xs(e) {
    return U(ot, e, !1)
}
function mr(e) {
    return U(ut | me, e, !0)
}
function br(e, t=0) {
    return U($e | t, e, !0)
}
function As(e, t=[], n=[], r=[]) {
    lr(r, t, n, s => {
        U($e, () => e(...s.map(ee)), !0)
    }
    )
}
function an(e, t=0) {
    var n = U(G | t, e, !0);
    return n
}
function W(e) {
    return U(K | me, e, !0)
}
function ln(e) {
    var t = e.teardown;
    if (t !== null) {
        const n = Ee
          , r = d;
        Tt(!0),
        S(null);
        try {
            t.call(null)
        } finally {
            Tt(n),
            S(r)
        }
    }
}
function on(e, t=!1) {
    var n = e.first;
    for (e.first = e.last = null; n !== null; ) {
        const s = n.ac;
        s !== null && Je( () => {
            s.abort(de)
        }
        );
        var r = n.next;
        (n.f & ce) !== 0 ? n.parent = null : N(n, t),
        n = r
    }
}
function Er(e) {
    for (var t = e.first; t !== null; ) {
        var n = t.next;
        (t.f & K) === 0 && N(t),
        t = n
    }
}
function N(e, t=!0) {
    var n = !1;
    (t || (e.f & Ot) !== 0) && e.nodes !== null && e.nodes.end !== null && (Tr(e.nodes.start, e.nodes.end),
    n = !0),
    on(e, t && !n),
    Ve(e, 0),
    E(e, te);
    var r = e.nodes && e.nodes.t;
    if (r !== null)
        for (const i of r)
            i.stop();
    ln(e);
    var s = e.parent;
    s !== null && s.first !== null && un(e),
    e.next = e.prev = e.teardown = e.ctx = e.deps = e.fn = e.nodes = e.ac = null
}
function Tr(e, t) {
    for (; e !== null; ) {
        var n = e === t ? null : Z(e);
        e.remove(),
        e = n
    }
}
function un(e) {
    var t = e.parent
      , n = e.prev
      , r = e.next;
    n !== null && (n.next = r),
    r !== null && (r.prev = n),
    t !== null && (t.first === e && (t.first = r),
    t.last === e && (t.last = n))
}
function Re(e, t, n=!0) {
    var r = [];
    cn(e, r, !0);
    var s = () => {
        n && N(e),
        t && t()
    }
      , i = r.length;
    if (i > 0) {
        var f = () => --i || s();
        for (var o of r)
            o.out(f)
    } else
        s()
}
function cn(e, t, n) {
    if ((e.f & B) === 0) {
        e.f ^= B;
        var r = e.nodes && e.nodes.t;
        if (r !== null)
            for (const o of r)
                (o.is_global || n) && t.push(o);
        for (var s = e.first; s !== null; ) {
            var i = s.next
              , f = (s.f & pe) !== 0 || (s.f & K) !== 0 && (e.f & G) !== 0;
            cn(s, t, f ? n : !1),
            s = i
        }
    }
}
function xr(e) {
    _n(e, !0)
}
function _n(e, t) {
    if ((e.f & B) !== 0) {
        e.f ^= B,
        (e.f & x) === 0 && (E(e, R),
        ue(e));
        for (var n = e.first; n !== null; ) {
            var r = n.next
              , s = (n.f & pe) !== 0 || (n.f & K) !== 0;
            _n(n, s ? t : !1),
            n = r
        }
        var i = e.nodes && e.nodes.t;
        if (i !== null)
            for (const f of i)
                (f.is_global || t) && f.in()
    }
}
function hn(e, t) {
    if (e.nodes)
        for (var n = e.nodes.start, r = e.nodes.end; n !== null; ) {
            var s = n === r ? null : Z(n);
            t.append(n),
            n = s
        }
}
let ae = !1;
function Ue(e) {
    ae = e
}
let Ee = !1;
function Tt(e) {
    Ee = e
}
let d = null
  , Y = !1;
function S(e) {
    d = e
}
let p = null;
function H(e) {
    p = e
}
let z = null;
function dn(e) {
    d !== null && (z === null ? z = [e] : z.push(e))
}
let A = null
  , O = 0
  , P = null;
function Ar(e) {
    P = e
}
let vn = 1
  , Oe = 0
  , le = Oe;
function xt(e) {
    le = e
}
function pn() {
    return ++vn
}
function Fe(e) {
    var t = e.f;
    if ((t & R) !== 0)
        return !0;
    if (t & b && (e.f &= ~oe),
    (t & X) !== 0) {
        var n = e.deps;
        if (n !== null)
            for (var r = n.length, s = 0; s < r; s++) {
                var i = n[s];
                if (Fe(i) && Xt(i),
                i.wv > e.wv)
                    return !0
            }
        (t & L) !== 0 && k === null && E(e, x)
    }
    return !1
}
function gn(e, t, n=!0) {
    var r = e.reactions;
    if (r !== null && !z?.includes(e))
        for (var s = 0; s < r.length; s++) {
            var i = r[s];
            (i.f & b) !== 0 ? gn(i, t, !1) : t === i && (n ? E(i, R) : (i.f & x) !== 0 && E(i, X),
            ue(i))
        }
}
function wn(e) {
    var t = A
      , n = O
      , r = P
      , s = d
      , i = z
      , f = v
      , o = Y
      , a = le
      , l = e.f;
    A = null,
    O = 0,
    P = null,
    d = (l & (K | ce)) === 0 ? e : null,
    z = null,
    we(e.ctx),
    Y = !1,
    le = ++Oe,
    e.ac !== null && (Je( () => {
        e.ac.abort(de)
    }
    ),
    e.ac = null);
    try {
        e.f |= nt;
        var c = e.fn
          , h = c()
          , u = e.deps;
        if (A !== null) {
            var _;
            if (Ve(e, O),
            u !== null && O > 0)
                for (u.length = O + A.length,
                _ = 0; _ < A.length; _++)
                    u[O + _] = A[_];
            else
                e.deps = u = A;
            if (Ce() && (e.f & L) !== 0)
                for (_ = O; _ < u.length; _++)
                    (u[_].reactions ??= []).push(e)
        } else
            u !== null && O < u.length && (Ve(e, O),
            u.length = O);
        if (Me() && P !== null && !Y && u !== null && (e.f & (b | X | R)) === 0)
            for (_ = 0; _ < P.length; _++)
                gn(P[_], e);
        return s !== null && s !== e && (Oe++,
        P !== null && (r === null ? r = P : r.push(...P))),
        (e.f & ne) !== 0 && (e.f ^= ne),
        h
    } catch (w) {
        return $t(w)
    } finally {
        e.f ^= nt,
        A = t,
        O = n,
        P = r,
        d = s,
        z = i,
        we(f),
        Y = o,
        le = a
    }
}
function kr(e, t) {
    let n = t.reactions;
    if (n !== null) {
        var r = kn.call(n, e);
        if (r !== -1) {
            var s = n.length - 1;
            s === 0 ? n = t.reactions = null : (n[r] = n[s],
            n.pop())
        }
    }
    n === null && (t.f & b) !== 0 && (A === null || !A.includes(t)) && (E(t, X),
    (t.f & L) !== 0 && (t.f ^= L,
    t.f &= ~oe),
    Kt(t),
    Ve(t, 0))
}
function Ve(e, t) {
    var n = e.deps;
    if (n !== null)
        for (var r = t; r < n.length; r++)
            kr(e, n[r])
}
function De(e) {
    var t = e.f;
    if ((t & te) === 0) {
        E(e, x);
        var n = p
          , r = ae;
        p = e,
        ae = !0;
        try {
            (t & (G | Nn)) !== 0 ? Er(e) : on(e),
            ln(e);
            var s = wn(e);
            e.teardown = typeof s == "function" ? s : null,
            e.wv = vn;
            var i
        } finally {
            ae = r,
            p = n
        }
    }
}
async function Sr() {
    await Promise.resolve(),
    qe()
}
function Rr() {
    return I.ensure().settled()
}
function ee(e) {
    var t = e.f
      , n = (t & b) !== 0;
    if (d !== null && !Y) {
        var r = p !== null && (p.f & te) !== 0;
        if (!r && !z?.includes(e)) {
            var s = d.deps;
            if ((d.f & nt) !== 0)
                e.rv < Oe && (e.rv = Oe,
                A === null && s !== null && s[O] === e ? O++ : A === null ? A = [e] : A.includes(e) || A.push(e));
            else {
                (d.deps ??= []).push(e);
                var i = e.reactions;
                i === null ? e.reactions = [d] : i.includes(d) || i.push(d)
            }
        }
    }
    if (Ee) {
        if (re.has(e))
            return re.get(e);
        if (n) {
            var f = e
              , o = f.v;
            return ((f.f & x) === 0 && f.reactions !== null || mn(f)) && (o = ht(f)),
            re.set(f, o),
            o
        }
    } else
        n && (!k?.has(e) || y?.is_fork && !Ce()) && (f = e,
        Fe(f) && Xt(f),
        ae && Ce() && (f.f & L) === 0 && yn(f));
    if (k?.has(e))
        return k.get(e);
    if ((e.f & ne) !== 0)
        throw e.v;
    return e.v
}
function yn(e) {
    if (e.deps !== null) {
        e.f ^= L;
        for (const t of e.deps)
            (t.reactions ??= []).push(e),
            (t.f & b) !== 0 && (t.f & L) === 0 && yn(t)
    }
}
function mn(e) {
    if (e.v === T)
        return !0;
    if (e.deps === null)
        return !1;
    for (const t of e.deps)
        if (re.has(t) || (t.f & b) !== 0 && mn(t))
            return !0;
    return !1
}
function Le(e) {
    var t = Y;
    try {
        return Y = !0,
        e()
    } finally {
        Y = t
    }
}
const Cr = -7169;
function E(e, t) {
    e.f = e.f & Cr | t
}
function ks(e) {
    if (!(typeof e != "object" || !e || e instanceof EventTarget)) {
        if (fe in e)
            ft(e);
        else if (!Array.isArray(e))
            for (let t in e) {
                const n = e[t];
                typeof n == "object" && n && fe in n && ft(n)
            }
    }
}
function ft(e, t=new Set) {
    if (typeof e == "object" && e !== null && !(e instanceof EventTarget) && !t.has(e)) {
        t.add(e),
        e instanceof Date && e.getTime();
        for (let r in e)
            try {
                ft(e[r], t)
            } catch {}
        const n = St(e);
        if (n !== Object.prototype && n !== Array.prototype && n !== Map.prototype && n !== Set.prototype && n !== Date.prototype) {
            const r = Cn(n);
            for (let s in r) {
                const i = r[s].get;
                if (i)
                    try {
                        i.call(e)
                    } catch {}
            }
        }
    }
}
const Or = ["touchstart", "touchmove"];
function Dr(e) {
    return Or.includes(e)
}
const bn = new Set
  , at = new Set;
function Ss(e) {
    if (!m)
        return;
    e.removeAttribute("onload"),
    e.removeAttribute("onerror");
    const t = e.__e;
    t !== void 0 && (e.__e = void 0,
    queueMicrotask( () => {
        e.isConnected && e.dispatchEvent(t)
    }
    ))
}
function Nr(e, t, n, r={}) {
    function s(i) {
        if (r.capture || xe.call(t, i),
        !i.cancelBubble)
            return Je( () => n?.call(this, i))
    }
    return e.startsWith("pointer") || e.startsWith("touch") || e === "wheel" ? Xe( () => {
        t.addEventListener(e, s, r)
    }
    ) : t.addEventListener(e, s, r),
    s
}
function Rs(e, t, n, r, s) {
    var i = {
        capture: r,
        passive: s
    }
      , f = Nr(e, t, n, i);
    (t === document.body || t === window || t === document || t instanceof HTMLMediaElement) && dt( () => {
        t.removeEventListener(e, f, i)
    }
    )
}
function Cs(e) {
    for (var t = 0; t < e.length; t++)
        bn.add(e[t]);
    for (var n of at)
        n(e)
}
let At = null;
function xe(e) {
    var t = this
      , n = t.ownerDocument
      , r = e.type
      , s = e.composedPath?.() || []
      , i = s[0] || e.target;
    At = e;
    var f = 0
      , o = At === e && e.__root;
    if (o) {
        var a = s.indexOf(o);
        if (a !== -1 && (t === document || t === window)) {
            e.__root = t;
            return
        }
        var l = s.indexOf(t);
        if (l === -1)
            return;
        a <= l && (f = a)
    }
    if (i = s[f] || e.target,
    i !== t) {
        Rn(e, "currentTarget", {
            configurable: !0,
            get() {
                return i || n
            }
        });
        var c = d
          , h = p;
        S(null),
        H(null);
        try {
            for (var u, _ = []; i !== null; ) {
                var w = i.assignedSlot || i.parentNode || i.host || null;
                try {
                    var C = i["__" + r];
                    C != null && (!i.disabled || e.target === i) && C.call(i, e)
                } catch (V) {
                    u ? _.push(V) : u = V
                }
                if (e.cancelBubble || w === t || w === null)
                    break;
                i = w
            }
            if (u) {
                for (let V of _)
                    queueMicrotask( () => {
                        throw V
                    }
                    );
                throw u
            }
        } finally {
            e.__root = t,
            delete e.currentTarget,
            S(c),
            H(h)
        }
    }
}
function vt(e) {
    var t = document.createElement("template");
    return t.innerHTML = e.replaceAll("<!>", "<!---->"),
    t.content
}
function F(e, t) {
    var n = p;
    n.nodes === null && (n.nodes = {
        start: e,
        end: t,
        a: null,
        t: null
    })
}
function Os(e, t) {
    var n = (t & Mt) !== 0, r = (t & zn) !== 0, s, i = !e.startsWith("<!>");
    return () => {
        if (m)
            return F(g, null),
            g;
        s === void 0 && (s = vt(i ? e : "<!>" + e),
        n || (s = D(s)));
        var f = r || en ? document.importNode(s, !0) : s.cloneNode(!0);
        if (n) {
            var o = D(f)
              , a = f.lastChild;
            F(o, a)
        } else
            F(f, f);
        return f
    }
}
function Pr(e, t, n="svg") {
    var r = !e.startsWith("<!>"), s = (t & Mt) !== 0, i = `<${n}>${r ? e : "<!>" + e}</${n}>`, f;
    return () => {
        if (m)
            return F(g, null),
            g;
        if (!f) {
            var o = vt(i)
              , a = D(o);
            if (s)
                for (f = document.createDocumentFragment(); D(a); )
                    f.appendChild(D(a));
            else
                f = D(a)
        }
        var l = f.cloneNode(!0);
        if (s) {
            var c = D(l)
              , h = l.lastChild;
            F(c, h)
        } else
            F(l, l);
        return l
    }
}
function Ds(e, t) {
    return Pr(e, t, "svg")
}
function Ns(e="") {
    if (!m) {
        var t = q(e + "");
        return F(t, t),
        t
    }
    var n = g;
    return n.nodeType !== Ge && (n.before(n = q()),
    j(n)),
    F(n, n),
    n
}
function Ps() {
    if (m)
        return F(g, null),
        g;
    var e = document.createDocumentFragment()
      , t = document.createComment("")
      , n = q();
    return e.append(t, n),
    F(t, n),
    e
}
function Ms(e, t) {
    if (m) {
        var n = p;
        ((n.f & ze) === 0 || n.nodes.end === null) && (n.nodes.end = g),
        ct();
        return
    }
    e !== null && e.before(t)
}
function Is(e, t) {
    var n = t == null ? "" : typeof t == "object" ? t + "" : t;
    n !== (e.__t ??= e.nodeValue) && (e.__t = n,
    e.nodeValue = n + "")
}
function En(e, t) {
    return Tn(e, t)
}
function Mr(e, t) {
    it(),
    t.intro = t.intro ?? !1;
    const n = t.target
      , r = m
      , s = g;
    try {
        for (var i = D(n); i && (i.nodeType !== Ne || i.data !== It); )
            i = Z(i);
        if (!i)
            throw ge;
        je(!0),
        j(i);
        const f = Tn(e, {
            ...t,
            anchor: i
        });
        return je(!1),
        f
    } catch (f) {
        if (f instanceof Error && f.message.split(`
`).some(o => o.startsWith("https://svelte.dev/e/")))
            throw f;
        return t.recover === !1 && Hn(),
        it(),
        rn(n),
        je(!1),
        En(e, t)
    } finally {
        je(r),
        j(s)
    }
}
const _e = new Map;
function Tn(e, {target: t, anchor: n, props: r={}, events: s, context: i, intro: f=!0}) {
    it();
    var o = new Set
      , a = h => {
        for (var u = 0; u < h.length; u++) {
            var _ = h[u];
            if (!o.has(_)) {
                o.add(_);
                var w = Dr(_);
                t.addEventListener(_, xe, {
                    passive: w
                });
                var C = _e.get(_);
                C === void 0 ? (document.addEventListener(_, xe, {
                    passive: w
                }),
                _e.set(_, 1)) : _e.set(_, C + 1)
            }
        }
    }
    ;
    a(Sn(bn)),
    at.add(a);
    var l = void 0
      , c = yr( () => {
        var h = n ?? t.appendChild(q());
        return fr(h, {
            pending: () => {}
        }, u => {
            if (i) {
                Jn({});
                var _ = v;
                _.c = i
            }
            if (s && (r.$$events = s),
            m && F(u, null),
            l = e(u, r) || {},
            m && (p.nodes.end = g,
            g === null || g.nodeType !== Ne || g.data !== Lt))
                throw ge;
            i && Qn()
        }
        ),
        () => {
            for (var u of o) {
                t.removeEventListener(u, xe);
                var _ = _e.get(u);
                --_ === 0 ? (document.removeEventListener(u, xe),
                _e.delete(u)) : _e.set(u, _)
            }
            at.delete(a),
            h !== n && h.parentNode?.removeChild(h)
        }
    }
    );
    return lt.set(l, c),
    l
}
let lt = new WeakMap;
function Ir(e, t) {
    const n = lt.get(e);
    return n ? (lt.delete(e),
    n(t)) : Promise.resolve()
}
class Fr {
    anchor;
    #e = new Map;
    #t = new Map;
    #n = new Map;
    #r = new Set;
    #l = !0;
    constructor(t, n=!0) {
        this.anchor = t,
        this.#l = n
    }
    #i = () => {
        var t = y;
        if (this.#e.has(t)) {
            var n = this.#e.get(t)
              , r = this.#t.get(n);
            if (r)
                xr(r),
                this.#r.delete(n);
            else {
                var s = this.#n.get(n);
                s && (this.#t.set(n, s.effect),
                this.#n.delete(n),
                s.fragment.lastChild.remove(),
                this.anchor.before(s.fragment),
                r = s.effect)
            }
            for (const [i,f] of this.#e) {
                if (this.#e.delete(i),
                i === t)
                    break;
                const o = this.#n.get(f);
                o && (N(o.effect),
                this.#n.delete(f))
            }
            for (const [i,f] of this.#t) {
                if (i === n || this.#r.has(i))
                    continue;
                const o = () => {
                    if (Array.from(this.#e.values()).includes(i)) {
                        var l = document.createDocumentFragment();
                        hn(f, l),
                        l.append(q()),
                        this.#n.set(i, {
                            effect: f,
                            fragment: l
                        })
                    } else
                        N(f);
                    this.#r.delete(i),
                    this.#t.delete(i)
                }
                ;
                this.#l || !r ? (this.#r.add(i),
                Re(f, o, !1)) : o()
            }
        }
    }
    ;
    #s = t => {
        this.#e.delete(t);
        const n = Array.from(this.#e.values());
        for (const [r,s] of this.#n)
            n.includes(r) || (N(s.effect),
            this.#n.delete(r))
    }
    ;
    ensure(t, n) {
        var r = y
          , s = vr();
        if (n && !this.#t.has(t) && !this.#n.has(t))
            if (s) {
                var i = document.createDocumentFragment()
                  , f = q();
                i.append(f),
                this.#n.set(t, {
                    effect: W( () => n(f)),
                    fragment: i
                })
            } else
                this.#t.set(t, W( () => n(this.anchor)));
        if (this.#e.set(r, t),
        s) {
            for (const [o,a] of this.#t)
                o === t ? r.skipped_effects.delete(a) : r.skipped_effects.add(a);
            for (const [o,a] of this.#n)
                o === t ? r.skipped_effects.delete(a.effect) : r.skipped_effects.add(a.effect);
            r.oncommit(this.#i),
            r.ondiscard(this.#s)
        } else
            m && (this.anchor = g),
            this.#i()
    }
}
function Fs(e, t, ...n) {
    var r = new Fr(e);
    an( () => {
        const s = t() ?? null;
        r.ensure(s, s && (i => s(i, ...n)))
    }
    , pe)
}
function Lr(e) {
    return (t, ...n) => {
        var r = e(...n), s;
        if (m)
            s = g,
            ct();
        else {
            var i = r.render().trim()
              , f = vt(i);
            s = D(f),
            t.before(s)
        }
        const o = r.setup?.(s);
        F(s, s),
        typeof o == "function" && dt(o)
    }
}
function xn(e, t, n) {
    if (e == null)
        return t(void 0),
        n && n(void 0),
        ve;
    const r = Le( () => e.subscribe(t, n));
    return r.unsubscribe ? () => r.unsubscribe() : r
}
const he = [];
function jr(e, t) {
    return {
        subscribe: qr(e, t).subscribe
    }
}
function qr(e, t=ve) {
    let n = null;
    const r = new Set;
    function s(o) {
        if (qt(e, o) && (e = o,
        n)) {
            const a = !he.length;
            for (const l of r)
                l[1](),
                he.push(l, e);
            if (a) {
                for (let l = 0; l < he.length; l += 2)
                    he[l][0](he[l + 1]);
                he.length = 0
            }
        }
    }
    function i(o) {
        s(o(e))
    }
    function f(o, a=ve) {
        const l = [o, a];
        return r.add(l),
        r.size === 1 && (n = t(s, i) || ve),
        o(e),
        () => {
            r.delete(l),
            r.size === 0 && n && (n(),
            n = null)
        }
    }
    return {
        set: s,
        update: i,
        subscribe: f
    }
}
function Ls(e, t, n) {
    const r = !Array.isArray(e)
      , s = r ? [e] : e;
    if (!s.every(Boolean))
        throw new Error("derived() expects stores as input, got a falsy value");
    const i = t.length < 2;
    return jr(n, (f, o) => {
        let a = !1;
        const l = [];
        let c = 0
          , h = ve;
        const u = () => {
            if (c)
                return;
            h();
            const w = t(r ? l[0] : l, f, o);
            i ? f(w) : h = typeof w == "function" ? w : ve
        }
          , _ = s.map( (w, C) => xn(w, V => {
            l[C] = V,
            c &= ~(1 << C),
            a && u()
        }
        , () => {
            c |= 1 << C
        }
        ));
        return a = !0,
        u(),
        function() {
            Rt(_),
            h(),
            a = !1
        }
    }
    )
}
function js(e) {
    let t;
    return xn(e, n => t = n)(),
    t
}
function Yr(e, t) {
    if (Nt(),
    m) {
        const n = window.__svelte?.h;
        if (n?.has(e))
            return n.get(e);
    }
    return t()
}
function Br() {
    return d === null && Bn(),
    (d.ac ??= new AbortController).signal
}
function An(e) {
    v === null && be(),
    Pe && v.l !== null ? pt(v).m.push(e) : wr( () => {
        const t = Le(e);
        if (typeof t == "function")
            return t
    }
    )
}
function Hr(e) {
    v === null && be(),
    An( () => () => Le(e))
}
function Ur(e, t, {bubbles: n=!1, cancelable: r=!1}={}) {
    return new CustomEvent(e,{
        detail: t,
        bubbles: n,
        cancelable: r
    })
}
function Vr() {
    const e = v;
    return e === null && be(),
    (t, n, r) => {
        const s = e.s.$$events?.[t];
        if (s) {
            const i = kt(s) ? s.slice() : [s]
              , f = Ur(t, n, r);
            for (const o of i)
                o.call(e.x, f);
            return !f.defaultPrevented
        }
        return !0
    }
}
function $r(e) {
    v === null && be(),
    v.l === null && Pt(),
    pt(v).b.push(e)
}
function Wr(e) {
    v === null && be(),
    v.l === null && Pt(),
    pt(v).a.push(e)
}
function pt(e) {
    var t = e.l;
    return t.u ??= {
        a: [],
        b: [],
        m: []
    }
}
const qs = Object.freeze(Object.defineProperty({
    __proto__: null,
    afterUpdate: Wr,
    beforeUpdate: $r,
    createContext: Xn,
    createEventDispatcher: Vr,
    createRawSnippet: Lr,
    flushSync: qe,
    fork: rr,
    getAbortSignal: Br,
    getAllContexts: Zn,
    getContext: Bt,
    hasContext: Ut,
    hydratable: Yr,
    hydrate: Mr,
    mount: En,
    onDestroy: Hr,
    onMount: An,
    setContext: Ht,
    settled: Rr,
    tick: Sr,
    unmount: Ir,
    untrack: Le
}, Symbol.toStringTag, {
    value: "Module"
}));
export {ps as $, _t as A, cr as B, Ne as C, Te as D, p as E, te as F, as as G, Ot as H, Le as I, Pe as J, is as K, ss as L, ls as M, Ee as N, Kr as O, fs as P, ve as Q, vs as R, fe as S, xn as T, js as U, dt as V, Rn as W, Cs as X, Gn as Y, As as Z, Rs as _, Qn as a, Ns as a0, Is as a1, Ds as a2, xs as a3, dr as a4, Hr as a5, v as a6, Ts as a7, zr as a8, Rt as a9, N as aA, ts as aB, ns as aC, Mr as aD, En as aE, qe as aF, Ir as aG, Sr as aH, Xr as aI, os as aJ, St as aK, pr as aL, Cn as aM, Es as aN, et as aO, Ls as aP, qr as aQ, bt as aR, bs as aS, qt as aT, us as aU, gs as aV, Ss as aW, qs as aX, rr as aY, Rr as aZ, ks as aa, hs as ab, ct as ac, pe as ad, _s as ae, Ft as af, Kn as ag, Fr as ah, br as ai, Xe as aj, Lt as ak, He as al, y as am, Gr as an, W as ao, vr as ap, Ie as aq, Sn as ar, kt as as, Qr as at, rs as au, es as av, xr as aw, Re as ax, B as ay, rn as az, ys as b, ws as c, Fs as d, ms as e, Os as f, ee as g, ds as h, Ms as i, Ps as j, Q as k, q as l, an as m, m as n, An as o, Jn as p, D as q, cs as r, J as s, Z as t, wr as u, je as v, j as w, g as x, Ae as y, Jr as z};
import {m as y, n as S, ac as rr, g as U, B as fr, ae as er, af as nr, ag as X, w as z, v as q, x as L, C as ar, ak as ir, al as $, am as ur, l as F, an as T, ao as V, ap as lr, aq as x, R as sr, ar as k, as as tr, at as or, au as vr, av as cr, aw as P, ax as Q, ay as B, t as dr, az as gr, aA as pr, q as hr, aj as Er, aB as W, aC as Ar} from "./ByWyckft.js";
function wr(r, n) {
    return n
}
function br(r, n, e) {
    for (var f = [], t = n.length, i, u = n.length, v = 0; v < t; v++) {
        let g = n[v];
        Q(g, () => {
            if (i) {
                if (i.pending.delete(g),
                i.done.add(g),
                i.pending.size === 0) {
                    var o = r.outrogroups;
                    Y(k(i.done)),
                    o.delete(i),
                    o.size === 0 && (r.outrogroups = null)
                }
            } else
                u -= 1
        }
        , !1)
    }
    if (u === 0) {
        var l = f.length === 0 && e !== null;
        if (l) {
            var d = e
              , s = d.parentNode;
            gr(s),
            s.append(d),
            r.items.clear()
        }
        Y(n, !l)
    } else
        i = {
            pending: new Set(n),
            done: new Set
        },
        (r.outrogroups ??= new Set).add(i)
}
function Y(r, n=!0) {
    for (var e = 0; e < r.length; e++)
        pr(r[e], n)
}
var G;
function Or(r, n, e, f, t, i=null) {
    var u = r
      , v = new Map
      , l = (n & W) !== 0;
    if (l) {
        var d = r;
        u = S ? z(hr(d)) : d.appendChild(F())
    }
    S && rr();
    var s = null, g = fr( () => {
        var c = e();
        return tr(c) ? c : c == null ? [] : k(c)
    }
    ), o, p = !0;
    function b() {
        a.fallback = s,
        Cr(a, o, u, n, f),
        s !== null && (o.length === 0 ? (s.f & T) === 0 ? P(s) : (s.f ^= T,
        H(s, null, u)) : Q(s, () => {
            s = null
        }
        ))
    }
    var C = y( () => {
        o = U(g);
        var c = o.length;
        let O = !1;
        if (S) {
            var R = er(u) === nr;
            R !== (c === 0) && (u = X(),
            z(u),
            q(!1),
            O = !0)
        }
        for (var A = new Set, I = ur, M = lr(), E = 0; E < c; E += 1) {
            S && L.nodeType === ar && L.data === ir && (u = L,
            O = !0,
            q(!1));
            var w = o[E]
              , D = f(w, E)
              , h = p ? null : v.get(D);
            h ? (h.v && $(h.v, w),
            h.i && $(h.i, E),
            M && I.skipped_effects.delete(h.e)) : (h = Tr(v, p ? u : G ??= F(), w, D, E, t, n, e),
            p || (h.e.f |= T),
            v.set(D, h)),
            A.add(D)
        }
        if (c === 0 && i && !s && (p ? s = V( () => i(u)) : (s = V( () => i(G ??= F())),
        s.f |= T)),
        S && c > 0 && z(X()),
        !p)
            if (M) {
                for (const [_,j] of v)
                    A.has(_) || I.skipped_effects.add(j.e);
                I.oncommit(b),
                I.ondiscard( () => {}
                )
            } else
                b();
        O && q(!0),
        U(g)
    }
    )
      , a = {
        effect: C,
        items: v,
        outrogroups: null,
        fallback: s
    };
    p = !1,
    S && (u = L)
}
function Cr(r, n, e, f, t) {
    var i = (f & Ar) !== 0, u = n.length, v = r.items, l = r.effect.first, d, s = null, g, o = [], p = [], b, C, a, c;
    if (i)
        for (c = 0; c < u; c += 1)
            b = n[c],
            C = t(b, c),
            a = v.get(C).e,
            (a.f & T) === 0 && (a.nodes?.a?.measure(),
            (g ??= new Set).add(a));
    for (c = 0; c < u; c += 1) {
        if (b = n[c],
        C = t(b, c),
        a = v.get(C).e,
        r.outrogroups !== null)
            for (const h of r.outrogroups)
                h.pending.delete(a),
                h.done.delete(a);
        if ((a.f & T) !== 0)
            if (a.f ^= T,
            a === l)
                H(a, null, e);
            else {
                var O = s ? s.next : l;
                a === r.effect.last && (r.effect.last = a.prev),
                a.prev && (a.prev.next = a.next),
                a.next && (a.next.prev = a.prev),
                N(r, s, a),
                N(r, a, O),
                H(a, O, e),
                s = a,
                o = [],
                p = [],
                l = s.next;
                continue
            }
        if ((a.f & B) !== 0 && (P(a),
        i && (a.nodes?.a?.unfix(),
        (g ??= new Set).delete(a))),
        a !== l) {
            if (d !== void 0 && d.has(a)) {
                if (o.length < p.length) {
                    var R = p[0], A;
                    s = R.prev;
                    var I = o[0]
                      , M = o[o.length - 1];
                    for (A = 0; A < o.length; A += 1)
                        H(o[A], R, e);
                    for (A = 0; A < p.length; A += 1)
                        d.delete(p[A]);
                    N(r, I.prev, M.next),
                    N(r, s, I),
                    N(r, M, R),
                    l = R,
                    s = M,
                    c -= 1,
                    o = [],
                    p = []
                } else
                    d.delete(a),
                    H(a, l, e),
                    N(r, a.prev, a.next),
                    N(r, a, s === null ? r.effect.first : s.next),
                    N(r, s, a),
                    s = a;
                continue
            }
            for (o = [],
            p = []; l !== null && l !== a; )
                (d ??= new Set).add(l),
                p.push(l),
                l = l.next;
            if (l === null)
                continue
        }
        (a.f & T) === 0 && o.push(a),
        s = a,
        l = a.next
    }
    if (r.outrogroups !== null) {
        for (const h of r.outrogroups)
            h.pending.size === 0 && (Y(k(h.done)),
            r.outrogroups?.delete(h));
        r.outrogroups.size === 0 && (r.outrogroups = null)
    }
    if (l !== null || d !== void 0) {
        var E = [];
        if (d !== void 0)
            for (a of d)
                (a.f & B) === 0 && E.push(a);
        for (; l !== null; )
            (l.f & B) === 0 && l !== r.fallback && E.push(l),
            l = l.next;
        var w = E.length;
        if (w > 0) {
            var D = (f & W) !== 0 && u === 0 ? e : null;
            if (i) {
                for (c = 0; c < w; c += 1)
                    E[c].nodes?.a?.measure();
                for (c = 0; c < w; c += 1)
                    E[c].nodes?.a?.fix()
            }
            br(r, E, D)
        }
    }
    i && Er( () => {
        if (g !== void 0)
            for (a of g)
                a.nodes?.a?.apply()
    }
    )
}
function Tr(r, n, e, f, t, i, u, v) {
    var l = (u & or) !== 0 ? (u & vr) === 0 ? sr(e, !1, !1) : x(e) : null
      , d = (u & cr) !== 0 ? x(t) : null;
    return {
        v: l,
        i: d,
        e: V( () => (i(n, l ?? e, d ?? t, v),
        () => {
            r.delete(f)
        }
        ))
    }
}
function H(r, n, e) {
    if (r.nodes)
        for (var f = r.nodes.start, t = r.nodes.end, i = n && (n.f & T) === 0 ? n.nodes.start : e; f !== null; ) {
            var u = dr(f);
            if (i.before(f),
            f === t)
                return;
            f = u
        }
}
function N(r, n, e) {
    n === null ? r.effect.first = e : n.next = e,
    e === null ? r.effect.last = n : e.prev = n
}
function Z(r) {
    var n, e, f = "";
    if (typeof r == "string" || typeof r == "number")
        f += r;
    else if (typeof r == "object")
        if (Array.isArray(r)) {
            var t = r.length;
            for (n = 0; n < t; n++)
                r[n] && (e = Z(r[n])) && (f && (f += " "),
                f += e)
        } else
            for (e in r)
                r[e] && (f && (f += " "),
                f += e);
    return f
}
function Nr() {
    for (var r, n, e = 0, f = "", t = arguments.length; e < t; e++)
        (r = arguments[e]) && (n = Z(r)) && (f && (f += " "),
        f += n);
    return f
}
function Rr(r) {
    return typeof r == "object" ? Nr(r) : r ?? ""
}
const J = [...` 	
\r\f\v\uFEFF`];
function Sr(r, n, e) {
    var f = r == null ? "" : "" + r;
    if (n && (f = f ? f + " " + n : n),
    e) {
        for (var t in e)
            if (e[t])
                f = f ? f + " " + t : t;
            else if (f.length)
                for (var i = t.length, u = 0; (u = f.indexOf(t, u)) >= 0; ) {
                    var v = u + i;
                    (u === 0 || J.includes(f[u - 1])) && (v === f.length || J.includes(f[v])) ? f = (u === 0 ? "" : f.substring(0, u)) + f.substring(v + 1) : u = v
                }
    }
    return f === "" ? null : f
}
function K(r, n=!1) {
    var e = n ? " !important;" : ";"
      , f = "";
    for (var t in r) {
        var i = r[t];
        i != null && i !== "" && (f += " " + t + ": " + i + e)
    }
    return f
}
function m(r) {
    return r[0] !== "-" || r[1] !== "-" ? r.toLowerCase() : r
}
function Mr(r, n) {
    if (n) {
        var e = "", f, t;
        if (Array.isArray(n) ? (f = n[0],
        t = n[1]) : f = n,
        r) {
            r = String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g, "").trim();
            var i = !1
              , u = 0
              , v = !1
              , l = [];
            f && l.push(...Object.keys(f).map(m)),
            t && l.push(...Object.keys(t).map(m));
            var d = 0
              , s = -1;
            const C = r.length;
            for (var g = 0; g < C; g++) {
                var o = r[g];
                if (v ? o === "/" && r[g - 1] === "*" && (v = !1) : i ? i === o && (i = !1) : o === "/" && r[g + 1] === "*" ? v = !0 : o === '"' || o === "'" ? i = o : o === "(" ? u++ : o === ")" && u--,
                !v && i === !1 && u === 0) {
                    if (o === ":" && s === -1)
                        s = g;
                    else if (o === ";" || g === C - 1) {
                        if (s !== -1) {
                            var p = m(r.substring(d, s).trim());
                            if (!l.includes(p)) {
                                o !== ";" && g++;
                                var b = r.substring(d, g).trim();
                                e += " " + b + ";"
                            }
                        }
                        d = g + 1,
                        s = -1
                    }
                }
            }
        }
        return f && (e += K(f)),
        t && (e += K(t, !0)),
        e = e.trim(),
        e === "" ? null : e
    }
    return r == null ? null : String(r)
}
function Dr(r, n, e, f, t, i) {
    var u = r.__className;
    if (S || u !== e || u === void 0) {
        var v = Sr(e, f, i);
        (!S || v !== r.getAttribute("class")) && (v == null ? r.removeAttribute("class") : n ? r.className = v : r.setAttribute("class", v)),
        r.__className = e
    } else if (i && t !== i)
        for (var l in i) {
            var d = !!i[l];
            (t == null || d !== !!t[l]) && r.classList.toggle(l, d)
        }
    return i
}
export {Rr as c, Or as e, wr as i, Dr as s, Mr as t};
import "./DsnmJJEf.js";
import {p as A, u as B, g as s, s as C, f as m, c as I, b as g, d as u, e as p, h as D, i as n, j as w, k as E, r as x, a as G} from "./ByWyckft.js";
import {i as b, b as H} from "./CmM7tx7L.js";
import {e as J} from "./C1pxLudc.js";
import {p as _} from "./B4HP8HCJ.js";
import "./NCWCRVn4.js";
var K = m("<!> <!>", 1)
  , N = m("<span>...</span>")
  , P = m('<div class="post-list__loading svelte-1srdn5h"><!></div>')
  , Q = m('<div class="post-list svelte-1srdn5h"><!> <div class="post-list__sentinel svelte-1srdn5h" aria-hidden="true"></div> <!></div>');
function $(F, a) {
    A(a, !0);
    let O = _(a, "keyFn", 3, (e, t) => t)
      , S = _(a, "hasMore", 3, !1)
      , M = _(a, "isLoading", 3, !1)
      , V = _(a, "injectSlots", 19, () => []);
    const L = D( () => new Map(V().map(e => [e.afterIndex, e.snippet])));
    let v = C(null)
      , l = null;
    B( () => {
        if (s(v))
            return l?.disconnect(),
            l = new IntersectionObserver(e => {
                e[0]?.isIntersecting && S() && !M() && a.onLoadMore && a.onLoadMore()
            }
            ,{
                rootMargin: "400px",
                threshold: 0
            }),
            l.observe(s(v)),
            () => {
                l?.disconnect()
            }
    }
    );
    var h = Q()
      , j = I(h);
    J(j, 19, () => a.items, (e, t) => O()(e, t), (e, t, o) => {
        var c = K()
          , f = g(c);
        u(f, () => a.children, () => ({
            item: s(t),
            index: s(o)
        }));
        var r = p(f, 2);
        {
            var i = d => {
                var y = w()
                  , z = g(y);
                u(z, () => s(L).get(s(o))),
                n(d, y)
            }
            ;
            b(r, d => {
                s(L).has(s(o)) && d(i)
            }
            )
        }
        n(e, c)
    }
    );
    var k = p(j, 2);
    H(k, e => E(v, e), () => s(v));
    var R = p(k, 2);
    {
        var q = e => {
            var t = P()
              , o = I(t);
            {
                var c = r => {
                    var i = w()
                      , d = g(i);
                    u(d, () => a.loading),
                    n(r, i)
                }
                  , f = r => {
                    var i = N();
                    n(r, i)
                }
                ;
                b(o, r => {
                    a.loading ? r(c) : r(f, !1)
                }
                )
            }
            x(t),
            n(e, t)
        }
        ;
        b(R, e => {
            M() && e(q)
        }
        )
    }
    x(h),
    n(F, h),
    G()
}
export {$ as V};
import {m as T, n as e, ac as b, ad as l, ae as E, af as S, ag as k, w as y, ah as A, v as c, a3 as g, ai as v, I as R, aj as N, S as w} from "./ByWyckft.js";
function B(a, r, t=!1) {
    e && b();
    var u = new A(a)
      , i = t ? l : 0;
    function s(f, n) {
        if (e) {
            const d = E(a) === S;
            if (f === d) {
                var h = k();
                y(h),
                u.anchor = h,
                c(!1),
                u.ensure(f, n),
                c(!0);
                return
            }
        }
        u.ensure(f, n)
    }
    T( () => {
        var f = !1;
        r( (n, h=!0) => {
            f = !0,
            s(h, n)
        }
        ),
        f || s(!1, null)
    }
    , i)
}
function _(a, r) {
    return a === r || a?.[w] === r
}
function F(a={}, r, t, u) {
    return g( () => {
        var i, s;
        return v( () => {
            i = s,
            s = [],
            R( () => {
                a !== t(...s) && (r(a, ...s),
                i && _(t(...i), a) && r(null, ...i))
            }
            )
        }
        ),
        () => {
            N( () => {
                s && _(t(...s), a) && r(null, ...s)
            }
            )
        }
    }
    ),
    a
}
export {F as b, B as i};
import {s as e} from "./DF08NYXu.js";
const r = () => {
    const s = e;
    return {
        page: {
            subscribe: s.page.subscribe
        },
        navigating: {
            subscribe: s.navigating.subscribe
        },
        updated: s.updated
    }
}
  , b = {
    subscribe(s) {
        return r().page.subscribe(s)
    }
};
export {b as p};
import {aQ as Ie, o as ze, s as A, g as T, k as $, aH as re, aX as bt, aY as Je, aZ as kt, I as St} from "./ByWyckft.js";
class Pe {
    constructor(t, n) {
        this.status = t,
        typeof n == "string" ? this.body = {
            message: n
        } : n ? this.body = n : this.body = {
            message: `Error: ${t}`
        }
    }
    toString() {
        return JSON.stringify(this.body)
    }
}
class Oe {
    constructor(t, n) {
        this.status = t,
        this.location = n
    }
}
class Ce extends Error {
    constructor(t, n, a) {
        super(a),
        this.status = t,
        this.text = n
    }
}
new URL("sveltekit-internal://");
function Et(e, t) {
    return e === "/" || t === "ignore" ? e : t === "never" ? e.endsWith("/") ? e.slice(0, -1) : e : t === "always" && !e.endsWith("/") ? e + "/" : e
}
function Rt(e) {
    return e.split("%25").map(decodeURI).join("%25")
}
function xt(e) {
    for (const t in e)
        e[t] = decodeURIComponent(e[t]);
    return e
}
function be({href: e}) {
    return e.split("#")[0]
}
function Lt(...e) {
    let t = 5381;
    for (const n of e)
        if (typeof n == "string") {
            let a = n.length;
            for (; a; )
                t = t * 33 ^ n.charCodeAt(--a)
        } else if (ArrayBuffer.isView(n)) {
            const a = new Uint8Array(n.buffer,n.byteOffset,n.byteLength);
            let r = a.length;
            for (; r; )
                t = t * 33 ^ a[--r]
        } else
            throw new TypeError("value must be a string or TypedArray");
    return (t >>> 0).toString(36)
}
new TextEncoder;
new TextDecoder;
function Ut(e) {
    const t = atob(e)
      , n = new Uint8Array(t.length);
    for (let a = 0; a < t.length; a++)
        n[a] = t.charCodeAt(a);
    return n
}
const At = window.fetch;
window.fetch = (e, t) => ((e instanceof Request ? e.method : t?.method || "GET") !== "GET" && W.delete(je(e)),
At(e, t));
const W = new Map;
function Tt(e, t) {
    const n = je(e, t)
      , a = document.querySelector(n);
    if (a?.textContent) {
        a.remove();
        let {body: r, ...s} = JSON.parse(a.textContent);
        const o = a.getAttribute("data-ttl");
        return o && W.set(n, {
            body: r,
            init: s,
            ttl: 1e3 * Number(o)
        }),
        a.getAttribute("data-b64") !== null && (r = Ut(r)),
        Promise.resolve(new Response(r,s))
    }
    return window.fetch(e, t)
}
function $t(e, t, n) {
    if (W.size > 0) {
        const a = je(e, n)
          , r = W.get(a);
        if (r) {
            if (performance.now() < r.ttl && ["default", "force-cache", "only-if-cached", void 0].includes(n?.cache))
                return new Response(r.body,r.init);
            W.delete(a)
        }
    }
    return window.fetch(t, n)
}
function je(e, t) {
    let a = `script[data-sveltekit-fetched][data-url=${JSON.stringify(einstanceof Request ? e.url : e)}]`;
    if (t?.headers || t?.body) {
        const r = [];
        t.headers && r.push([...new Headers(t.headers)].join(",")),
        t.body && (typeof t.body == "string" || ArrayBuffer.isView(t.body)) && r.push(t.body),
        a += `[data-hash="${Lt(...r)}"]`
    }
    return a
}
const It = /^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;
function Pt(e) {
    const t = [];
    return {
        pattern: e === "/" ? /^\/$/ : new RegExp(`^${Ct(e).map(a => {
            const r = /^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(a);
            if (r)
                return t.push({
                    name: r[1],
                    matcher: r[2],
                    optional: !1,
                    rest: !0,
                    chained: !0
                }),
                "(?:/([^]*))?";
            const s = /^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(a);
            if (s)
                return t.push({
                    name: s[1],
                    matcher: s[2],
                    optional: !0,
                    rest: !1,
                    chained: !0
                }),
                "(?:/([^/]+))?";
            if (!a)
                return;
            const o = a.split(/\[(.+?)\](?!\])/);
            return "/" + o.map( (c, l) => {
                if (l % 2) {
                    if (c.startsWith("x+"))
                        return ke(String.fromCharCode(parseInt(c.slice(2), 16)));
                    if (c.startsWith("u+"))
                        return ke(String.fromCharCode(...c.slice(2).split("-").map(m => parseInt(m, 16))));
                    const f = It.exec(c)
                      , [,h,v,u,g] = f;
                    return t.push({
                        name: u,
                        matcher: g,
                        optional: !!h,
                        rest: !!v,
                        chained: v ? l === 1 && o[0] === "" : !1
                    }),
                    v ? "([^]*?)" : h ? "([^/]*)?" : "([^/]+?)"
                }
                return ke(c)
            }
            ).join("")
        }
        ).join("")}/?$`),
        params: t
    }
}
function Ot(e) {
    return e !== "" && !/^\([^)]+\)$/.test(e)
}
function Ct(e) {
    return e.slice(1).split("/").filter(Ot)
}
function jt(e, t, n) {
    const a = {}
      , r = e.slice(1)
      , s = r.filter(i => i !== void 0);
    let o = 0;
    for (let i = 0; i < t.length; i += 1) {
        const c = t[i];
        let l = r[i - o];
        if (c.chained && c.rest && o && (l = r.slice(i - o, i + 1).filter(f => f).join("/"),
        o = 0),
        l === void 0) {
            c.rest && (a[c.name] = "");
            continue
        }
        if (!c.matcher || n[c.matcher](l)) {
            a[c.name] = l;
            const f = t[i + 1]
              , h = r[i + 1];
            f && !f.rest && f.optional && h && c.chained && (o = 0),
            !f && !h && Object.keys(a).length === s.length && (o = 0);
            continue
        }
        if (c.optional && c.chained) {
            o++;
            continue
        }
        return
    }
    if (!o)
        return a
}
function ke(e) {
    return e.normalize().replace(/[[\]]/g, "\\$&").replace(/%/g, "%25").replace(/\//g, "%2[Ff]").replace(/\?/g, "%3[Ff]").replace(/#/g, "%23").replace(/[.*+?^${}()|\\]/g, "\\$&")
}
function Nt({nodes: e, server_loads: t, dictionary: n, matchers: a}) {
    const r = new Set(t);
    return Object.entries(n).map( ([i,[c,l,f]]) => {
        const {pattern: h, params: v} = Pt(i)
          , u = {
            id: i,
            exec: g => {
                const m = h.exec(g);
                if (m)
                    return jt(m, v, a)
            }
            ,
            errors: [1, ...f || []].map(g => e[g]),
            layouts: [0, ...l || []].map(o),
            leaf: s(c)
        };
        return u.errors.length = u.layouts.length = Math.max(u.errors.length, u.layouts.length),
        u
    }
    );
    function s(i) {
        const c = i < 0;
        return c && (i = ~i),
        [c, e[i]]
    }
    function o(i) {
        return i === void 0 ? i : [r.has(i), e[i]]
    }
}
function nt(e, t=JSON.parse) {
    try {
        return t(sessionStorage[e])
    } catch {}
}
function Xe(e, t, n=JSON.stringify) {
    const a = n(t);
    try {
        sessionStorage[e] = a
    } catch {}
}
const L = globalThis.__sveltekit_prpdwx?.base ?? ""
  , Dt = globalThis.__sveltekit_prpdwx?.assets ?? L ?? ""
  , qt = "1770725198317"
  , at = "sveltekit:snapshot"
  , rt = "sveltekit:scroll"
  , ge = "sveltekit:states"
  , Ne = "sveltekit:pageurl"
  , j = "sveltekit:history"
  , q = "sveltekit:navigation"
  , D = {
    tap: 1,
    hover: 2,
    viewport: 3,
    eager: 4,
    off: -1,
    false: -1
}
  , _e = location.origin;
function Z(e) {
    if (e instanceof URL)
        return e;
    let t = document.baseURI;
    if (!t) {
        const n = document.getElementsByTagName("base");
        t = n.length ? n[0].href : document.URL
    }
    return new URL(e,t)
}
function me() {
    return {
        x: pageXOffset,
        y: pageYOffset
    }
}
function K(e, t) {
    return e.getAttribute(`data-sveltekit-${t}`)
}
const Qe = {
    ...D,
    "": D.hover
};
function ot(e) {
    let t = e.assignedSlot ?? e.parentNode;
    return t?.nodeType === 11 && (t = t.host),
    t
}
function st(e, t) {
    for (; e && e !== t; ) {
        if (e.nodeName.toUpperCase() === "A" && e.hasAttribute("href"))
            return e;
        e = ot(e)
    }
}
function xe(e, t, n) {
    let a;
    try {
        if (a = new URL(e instanceof SVGAElement ? e.href.baseVal : e.href,document.baseURI),
        n && a.hash.match(/^#[^/]/)) {
            const i = location.hash.split("#")[1] || "/";
            a.hash = `#${i}${a.hash}`
        }
    } catch {}
    const r = e instanceof SVGAElement ? e.target.baseVal : e.target
      , s = !a || !!r || we(a, t, n) || (e.getAttribute("rel") || "").split(/\s+/).includes("external")
      , o = a?.origin === _e && e.hasAttribute("download");
    return {
        url: a,
        external: s,
        target: r,
        download: o
    }
}
function oe(e) {
    let t = null
      , n = null
      , a = null
      , r = null
      , s = null
      , o = null
      , i = e;
    for (; i && i !== document.documentElement; )
        a === null && (a = K(i, "preload-code")),
        r === null && (r = K(i, "preload-data")),
        t === null && (t = K(i, "keepfocus")),
        n === null && (n = K(i, "noscroll")),
        s === null && (s = K(i, "reload")),
        o === null && (o = K(i, "replacestate")),
        i = ot(i);
    function c(l) {
        switch (l) {
        case "":
        case "true":
            return !0;
        case "off":
        case "false":
            return !1;
        default:
            return
        }
    }
    return {
        preload_code: Qe[a ?? "off"],
        preload_data: Qe[r ?? "off"],
        keepfocus: c(t),
        noscroll: c(n),
        reload: c(s),
        replace_state: c(o)
    }
}
function Ze(e) {
    const t = Ie(e);
    let n = !0;
    function a() {
        n = !0,
        t.update(o => o)
    }
    function r(o) {
        n = !1,
        t.set(o)
    }
    function s(o) {
        let i;
        return t.subscribe(c => {
            (i === void 0 || n && c !== i) && o(i = c)
        }
        )
    }
    return {
        notify: a,
        set: r,
        subscribe: s
    }
}
const it = {
    v: () => {}
};
function Vt() {
    const {set: e, subscribe: t} = Ie(!1);
    let n;
    async function a() {
        clearTimeout(n);
        try {
            const r = await fetch(`${Dt}/_app/version.json`, {
                headers: {
                    pragma: "no-cache",
                    "cache-control": "no-cache"
                }
            });
            if (!r.ok)
                return !1;
            const o = (await r.json()).version !== qt;
            return o && (e(!0),
            it.v(),
            clearTimeout(n)),
            o
        } catch {
            return !1
        }
    }
    return {
        subscribe: t,
        check: a
    }
}
function we(e, t, n) {
    return e.origin !== _e || !e.pathname.startsWith(t) ? !0 : n ? e.pathname !== location.pathname : !1
}
function dn(e) {}
const ct = new Set(["load", "prerender", "csr", "ssr", "trailingSlash", "config"]);
[...ct];
const Bt = new Set([...ct]);
[...Bt];
function Kt(e) {
    return e.filter(t => t != null)
}
function De(e) {
    return e instanceof Pe || e instanceof Ce ? e.status : 500
}
function Mt(e) {
    return e instanceof Ce ? e.text : "Internal Error"
}
let w, H, Se;
const Yt = ze.toString().includes("$$") || /function \w+\(\) \{\}/.test(ze.toString());
Yt ? (w = {
    data: {},
    form: null,
    error: null,
    params: {},
    route: {
        id: null
    },
    state: {},
    status: -1,
    url: new URL("https://example.com")
},
H = {
    current: null
},
Se = {
    current: !1
}) : (w = new class {
    #e = A({});
    get data() {
        return T(this.#e)
    }
    set data(t) {
        $(this.#e, t)
    }
    #t = A(null);
    get form() {
        return T(this.#t)
    }
    set form(t) {
        $(this.#t, t)
    }
    #n = A(null);
    get error() {
        return T(this.#n)
    }
    set error(t) {
        $(this.#n, t)
    }
    #a = A({});
    get params() {
        return T(this.#a)
    }
    set params(t) {
        $(this.#a, t)
    }
    #r = A({
        id: null
    });
    get route() {
        return T(this.#r)
    }
    set route(t) {
        $(this.#r, t)
    }
    #o = A({});
    get state() {
        return T(this.#o)
    }
    set state(t) {
        $(this.#o, t)
    }
    #s = A(-1);
    get status() {
        return T(this.#s)
    }
    set status(t) {
        $(this.#s, t)
    }
    #i = A(new URL("https://example.com"));
    get url() {
        return T(this.#i)
    }
    set url(t) {
        $(this.#i, t)
    }
}
,
H = new class {
    #e = A(null);
    get current() {
        return T(this.#e)
    }
    set current(t) {
        $(this.#e, t)
    }
}
,
Se = new class {
    #e = A(!1);
    get current() {
        return T(this.#e)
    }
    set current(t) {
        $(this.#e, t)
    }
}
,
it.v = () => Se.current = !0);
function qe(e) {
    Object.assign(w, e)
}
const {onMount: Ft} = bt
  , lt = St ?? (e => e())
  , Gt = new Set(["icon", "shortcut icon", "apple-touch-icon"])
  , V = nt(rt) ?? {}
  , z = nt(at) ?? {}
  , N = {
    url: Ze({}),
    page: Ze({}),
    navigating: Ie(null),
    updated: Vt()
};
function ve(e) {
    V[e] = me()
}
function ut(e, t) {
    let n = e + 1;
    for (; V[n]; )
        delete V[n],
        n += 1;
    for (n = t + 1; z[n]; )
        delete z[n],
        n += 1
}
function J(e, t=!1) {
    return t ? location.replace(e.href) : location.href = e.href,
    new Promise( () => {}
    )
}
async function ft() {
    if ("serviceWorker"in navigator) {
        const e = await navigator.serviceWorker.getRegistration(L || "/");
        e && await e.update()
    }
}
function Le() {}
let Ve, Ue, se, I, Ae, b;
const ie = []
  , ce = [];
let x = null;
function le() {
    x?.fork?.then(e => e?.discard()),
    x = null
}
const ae = new Map
  , Be = new Set
  , Wt = new Set
  , M = new Set;
let _ = {
    branch: [],
    error: null,
    url: null
}, dt = !1, ue = !1, et = !0, X = !1, G = !1, Ke = !1, ee = !1, F, y, k, P;
const fe = new Set;
let Ee;
const de = new Map;
async function _n(e, t, n) {
    globalThis.__sveltekit_prpdwx?.data && globalThis.__sveltekit_prpdwx.data,
    document.URL !== location.href && (location.href = location.href),
    b = e,
    await e.hooks.init?.(),
    Ve = Nt(e),
    I = document.documentElement,
    Ae = t,
    Ue = e.nodes[0],
    se = e.nodes[1],
    Ue(),
    se(),
    y = history.state?.[j],
    k = history.state?.[q],
    y || (y = k = Date.now(),
    history.replaceState({
        ...history.state,
        [j]: y,
        [q]: k
    }, ""));
    const a = V[y];
    function r() {
        a && (history.scrollRestoration = "manual",
        scrollTo(a.x, a.y))
    }
    n ? (r(),
    await sn(Ae, n)) : (await Y({
        type: "enter",
        url: Z(b.hash ? un(new URL(location.href)) : location.href),
        replace_state: !0
    }),
    r()),
    on()
}
async function Ht(e=!0, t=!0) {
    if (await (Ee ||= Promise.resolve()),
    !Ee)
        return;
    Ee = null;
    const n = P = {}
      , a = await te(_.url, !0);
    if (le(),
    ee && de.forEach( ({resource: r}) => {
        r.refresh?.()
    }
    ),
    e) {
        const r = w.state
          , s = a && await Ge(a);
        if (!s || n !== P)
            return;
        if (s.type === "redirect")
            return Me(new URL(s.location,_.url).href, {
                replaceState: !0
            }, 1, n);
        t || (s.props.page.state = r),
        qe(s.props.page),
        _ = s.state,
        Te(),
        F.$set(s.props)
    } else
        Te();
    await Promise.all([...de.values()].map( ({resource: r}) => r)).catch(Le)
}
function Te() {
    ie.length = 0,
    ee = !1
}
function ht(e) {
    ce.some(t => t?.snapshot) && (z[e] = ce.map(t => t?.snapshot?.capture()))
}
function pt(e) {
    z[e]?.forEach( (t, n) => {
        ce[n]?.snapshot?.restore(t)
    }
    )
}
function tt() {
    ve(y),
    Xe(rt, V),
    ht(k),
    Xe(at, z)
}
async function Me(e, t, n, a) {
    let r;
    t.invalidateAll && le(),
    await Y({
        type: "goto",
        url: Z(e),
        keepfocus: t.keepFocus,
        noscroll: t.noScroll,
        replace_state: t.replaceState,
        state: t.state,
        redirect_count: n,
        nav_token: a,
        accept: () => {
            t.invalidateAll && (ee = !0,
            r = [...de.keys()]),
            t.invalidate && t.invalidate.forEach(rn)
        }
    }),
    t.invalidateAll && re().then(re).then( () => {
        de.forEach( ({resource: s}, o) => {
            r?.includes(o) && s.refresh?.()
        }
        )
    }
    )
}
async function zt(e) {
    if (e.id !== x?.id) {
        le();
        const t = {};
        if (fe.add(t),
        x = {
            id: e.id,
            token: t,
            promise: Ge({
                ...e,
                preload: t
            }).then(n => (fe.delete(t),
            n.type === "loaded" && n.state.error && le(),
            n)),
            fork: null
        },
        Je) {
            const n = x;
            n.fork = n.promise.then(a => {
                if (n === x && a.type === "loaded")
                    try {
                        return Je( () => {
                            F.$set(a.props),
                            qe(a.props.page)
                        }
                        )
                    } catch {}
                return null
            }
            )
        }
    }
    return x.promise
}
async function Re(e) {
    const t = (await te(e, !1))?.route;
    t && await Promise.all([...t.layouts, t.leaf].map(n => n?.[1]()))
}
async function gt(e, t, n) {
    _ = e.state;
    const a = document.querySelector("style[data-sveltekit]");
    if (a && a.remove(),
    Object.assign(w, e.props.page),
    F = new b.root({
        target: t,
        props: {
            ...e.props,
            stores: N,
            components: ce
        },
        hydrate: n,
        sync: !1
    }),
    await Promise.resolve(),
    pt(k),
    n) {
        const r = {
            from: null,
            to: {
                params: _.params,
                route: {
                    id: _.route?.id ?? null
                },
                url: new URL(location.href)
            },
            willUnload: !1,
            type: "enter",
            complete: Promise.resolve()
        };
        M.forEach(s => s(r))
    }
    ue = !0
}
function he({url: e, params: t, branch: n, status: a, error: r, route: s, form: o}) {
    let i = "never";
    if (L && (e.pathname === L || e.pathname === L + "/"))
        i = "always";
    else
        for (const u of n)
            u?.slash !== void 0 && (i = u.slash);
    e.pathname = Et(e.pathname, i),
    e.search = e.search;
    const c = {
        type: "loaded",
        state: {
            url: e,
            params: t,
            branch: n,
            error: r,
            route: s
        },
        props: {
            constructors: Kt(n).map(u => u.node.component),
            page: ne(w)
        }
    };
    o !== void 0 && (c.props.form = o);
    let l = {}
      , f = !w
      , h = 0;
    for (let u = 0; u < Math.max(n.length, _.branch.length); u += 1) {
        const g = n[u]
          , m = _.branch[u];
        g?.data !== m?.data && (f = !0),
        g && (l = {
            ...l,
            ...g.data
        },
        f && (c.props[`data_${h}`] = l),
        h += 1)
    }
    return (!_.url || e.href !== _.url.href || _.error !== r || o !== void 0 && o !== w.form || f) && (c.props.page = {
        error: r,
        params: t,
        route: {
            id: s?.id ?? null
        },
        state: {},
        status: a,
        url: new URL(e),
        form: o ?? null,
        data: f ? l : w.data
    }),
    c
}
async function Ye({loader: e, parent: t, url: n, params: a, route: r, server_data_node: s}) {
    let o = null;
    const i = {
        dependencies: new Set,
        params: new Set,
        parent: !1,
        route: !1,
        url: !1,
        search_params: new Set
    }
      , c = await e();
    return {
        node: c,
        loader: e,
        server: s,
        universal: c.universal?.load ? {
            type: "data",
            data: o,
            uses: i
        } : null,
        data: o ?? s?.data ?? null,
        slash: c.universal?.trailingSlash ?? s?.slash
    }
}
function Jt(e, t, n) {
    let a = e instanceof Request ? e.url : e;
    const r = new URL(a,n);
    r.origin === n.origin && (a = r.href.slice(n.origin.length));
    const s = ue ? $t(a, r.href, t) : Tt(a, t);
    return {
        resolved: r,
        promise: s
    }
}
function Xt(e, t, n, a, r, s) {
    if (ee)
        return !0;
    if (!r)
        return !1;
    if (r.parent && e || r.route && t || r.url && n)
        return !0;
    for (const o of r.search_params)
        if (a.has(o))
            return !0;
    for (const o of r.params)
        if (s[o] !== _.params[o])
            return !0;
    for (const o of r.dependencies)
        if (ie.some(i => i(new URL(o))))
            return !0;
    return !1
}
function Fe(e, t) {
    return e?.type === "data" ? e : e?.type === "skip" ? t ?? null : null
}
function Qt(e, t) {
    if (!e)
        return new Set(t.searchParams.keys());
    const n = new Set([...e.searchParams.keys(), ...t.searchParams.keys()]);
    for (const a of n) {
        const r = e.searchParams.getAll(a)
          , s = t.searchParams.getAll(a);
        r.every(o => s.includes(o)) && s.every(o => r.includes(o)) && n.delete(a)
    }
    return n
}
function Zt({error: e, url: t, route: n, params: a}) {
    return {
        type: "loaded",
        state: {
            error: e,
            url: t,
            route: n,
            params: a,
            branch: []
        },
        props: {
            page: ne(w),
            constructors: []
        }
    }
}
async function Ge({id: e, invalidating: t, url: n, params: a, route: r, preload: s}) {
    if (x?.id === e)
        return fe.delete(x.token),
        x.promise;
    const {errors: o, layouts: i, leaf: c} = r
      , l = [...i, c];
    o.forEach(p => p?.().catch( () => {}
    )),
    l.forEach(p => p?.[1]().catch( () => {}
    ));
    const f = _.url ? e !== pe(_.url) : !1
      , h = _.route ? r.id !== _.route.id : !1
      , v = Qt(_.url, n);
    let u = !1;
    const g = l.map(async (p, d) => {
        if (!p)
            return;
        const E = _.branch[d];
        return p[1] === E?.loader && !Xt(u, h, f, v, E.universal?.uses, a) ? E : (u = !0,
        Ye({
            loader: p[1],
            url: n,
            params: a,
            route: r,
            parent: async () => {
                const O = {};
                for (let U = 0; U < d; U += 1)
                    Object.assign(O, (await g[U])?.data);
                return O
            }
            ,
            server_data_node: Fe(p[0] ? {
                type: "skip"
            } : null, p[0] ? E?.server : void 0)
        }))
    }
    );
    for (const p of g)
        p.catch( () => {}
        );
    const m = [];
    for (let p = 0; p < l.length; p += 1)
        if (l[p])
            try {
                m.push(await g[p])
            } catch (d) {
                if (d instanceof Oe)
                    return {
                        type: "redirect",
                        location: d.location
                    };
                if (fe.has(s))
                    return Zt({
                        error: await Q(d, {
                            params: a,
                            url: n,
                            route: {
                                id: r.id
                            }
                        }),
                        url: n,
                        params: a,
                        route: r
                    });
                let E = De(d), R;
                if (d instanceof Pe)
                    R = d.body;
                else {
                    if (await N.updated.check())
                        return await ft(),
                        await J(n);
                    R = await Q(d, {
                        params: a,
                        url: n,
                        route: {
                            id: r.id
                        }
                    })
                }
                const O = await en(p, m, o);
                return O ? he({
                    url: n,
                    params: a,
                    branch: m.slice(0, O.idx).concat(O.node),
                    status: E,
                    error: R,
                    route: r
                }) : await mt(n, {
                    id: r.id
                }, R, E)
            }
        else
            m.push(void 0);
    return he({
        url: n,
        params: a,
        branch: m,
        status: 200,
        error: null,
        route: r,
        form: t ? void 0 : null
    })
}
async function en(e, t, n) {
    for (; e--; )
        if (n[e]) {
            let a = e;
            for (; !t[a]; )
                a -= 1;
            try {
                return {
                    idx: a + 1,
                    node: {
                        node: await n[e](),
                        loader: n[e],
                        data: {},
                        server: null,
                        universal: null
                    }
                }
            } catch {
                continue
            }
        }
}
async function We({status: e, error: t, url: n, route: a}) {
    const r = {};
    let s = null;
    try {
        const o = await Ye({
            loader: Ue,
            url: n,
            params: r,
            route: a,
            parent: () => Promise.resolve({}),
            server_data_node: Fe(s)
        })
          , i = {
            node: await se(),
            loader: se,
            universal: null,
            server: null,
            data: null
        };
        return he({
            url: n,
            params: r,
            branch: [o, i],
            status: e,
            error: t,
            route: null
        })
    } catch (o) {
        if (o instanceof Oe)
            return Me(new URL(o.location,location.href), {}, 0);
        throw o
    }
}
async function tn(e) {
    const t = e.href;
    if (ae.has(t))
        return ae.get(t);
    let n;
    try {
        const a = (async () => {
            let r = await b.hooks.reroute({
                url: new URL(e),
                fetch: async (s, o) => Jt(s, o, e).promise
            }) ?? e;
            if (typeof r == "string") {
                const s = new URL(e);
                b.hash ? s.hash = r : s.pathname = r,
                r = s
            }
            return r
        }
        )();
        ae.set(t, a),
        n = await a
    } catch {
        ae.delete(t);
        return
    }
    return n
}
async function te(e, t) {
    if (e && !we(e, L, b.hash)) {
        const n = await tn(e);
        if (!n)
            return;
        const a = nn(n);
        for (const r of Ve) {
            const s = r.exec(a);
            if (s)
                return {
                    id: pe(e),
                    invalidating: t,
                    route: r,
                    params: xt(s),
                    url: e
                }
        }
    }
}
function nn(e) {
    return Rt(b.hash ? e.hash.replace(/^#/, "").replace(/[?#].+/, "") : e.pathname.slice(L.length)) || "/"
}
function pe(e) {
    return (b.hash ? e.hash.replace(/^#/, "") : e.pathname) + e.search
}
function _t({url: e, type: t, intent: n, delta: a, event: r}) {
    let s = !1;
    const o = He(_, n, e, t);
    a !== void 0 && (o.navigation.delta = a),
    r !== void 0 && (o.navigation.event = r);
    const i = {
        ...o.navigation,
        cancel: () => {
            s = !0,
            o.reject(new Error("navigation cancelled"))
        }
    };
    return X || Be.forEach(c => c(i)),
    s ? null : o
}
async function Y({type: e, url: t, popped: n, keepfocus: a, noscroll: r, replace_state: s, state: o={}, redirect_count: i=0, nav_token: c={}, accept: l=Le, block: f=Le, event: h}) {
    const v = P;
    P = c;
    const u = await te(t, !1)
      , g = e === "enter" ? He(_, u, t, e) : _t({
        url: t,
        type: e,
        delta: n?.delta,
        intent: u,
        event: h
    });
    if (!g) {
        f(),
        P === c && (P = v);
        return
    }
    const m = y
      , p = k;
    l(),
    X = !0,
    ue && g.navigation.type !== "enter" && N.navigating.set(H.current = g.navigation);
    let d = u && await Ge(u);
    if (!d) {
        if (we(t, L, b.hash))
            return await J(t, s);
        d = await mt(t, {
            id: null
        }, await Q(new Ce(404,"Not Found",`Not found: ${t.pathname}`), {
            url: t,
            params: {},
            route: {
                id: null
            }
        }), 404, s)
    }
    if (t = u?.url || t,
    P !== c)
        return g.reject(new Error("navigation aborted")),
        !1;
    if (d.type === "redirect") {
        if (i < 20) {
            await Y({
                type: e,
                url: new URL(d.location,t),
                popped: n,
                keepfocus: a,
                noscroll: r,
                replace_state: s,
                state: o,
                redirect_count: i + 1,
                nav_token: c
            }),
            g.fulfil(void 0);
            return
        }
        d = await We({
            status: 500,
            error: await Q(new Error("Redirect loop"), {
                url: t,
                params: {},
                route: {
                    id: null
                }
            }),
            url: t,
            route: {
                id: null
            }
        })
    } else
        d.props.page.status >= 400 && await N.updated.check() && (await ft(),
        await J(t, s));
    if (Te(),
    ve(m),
    ht(p),
    d.props.page.url.pathname !== t.pathname && (t.pathname = d.props.page.url.pathname),
    o = n ? n.state : o,
    !n) {
        const S = s ? 0 : 1
          , B = {
            [j]: y += S,
            [q]: k += S,
            [ge]: o
        };
        (s ? history.replaceState : history.pushState).call(history, B, "", t),
        s || ut(y, k)
    }
    const E = u && x?.id === u.id ? x.fork : null;
    x = null,
    d.props.page.state = o;
    let R;
    if (ue) {
        const S = (await Promise.all(Array.from(Wt, C => C(g.navigation)))).filter(C => typeof C == "function");
        if (S.length > 0) {
            let C = function() {
                S.forEach(ye => {
                    M.delete(ye)
                }
                )
            };
            S.push(C),
            S.forEach(ye => {
                M.add(ye)
            }
            )
        }
        _ = d.state,
        d.props.page && (d.props.page.url = t);
        const B = E && await E;
        B ? R = B.commit() : (F.$set(d.props),
        qe(d.props.page),
        R = kt?.()),
        Ke = !0
    } else
        await gt(d, Ae, !1);
    const {activeElement: O} = document;
    await R,
    await re(),
    await re();
    let U = n ? n.scroll : r ? me() : null;
    if (et) {
        const S = t.hash && document.getElementById(vt(t));
        if (U)
            scrollTo(U.x, U.y);
        else if (S) {
            S.scrollIntoView();
            const {top: B, left: C} = S.getBoundingClientRect();
            U = {
                x: pageXOffset + C,
                y: pageYOffset + B
            }
        } else
            scrollTo(0, 0)
    }
    const yt = document.activeElement !== O && document.activeElement !== document.body;
    !a && !yt && ln(t, U),
    et = !0,
    d.props.page && Object.assign(w, d.props.page),
    X = !1,
    e === "popstate" && pt(k),
    g.fulfil(void 0),
    M.forEach(S => S(g.navigation)),
    N.navigating.set(H.current = null)
}
async function mt(e, t, n, a, r) {
    return e.origin === _e && e.pathname === location.pathname && !dt ? await We({
        status: a,
        error: n,
        url: e,
        route: t
    }) : await J(e, r)
}
function an() {
    let e, t, n;
    I.addEventListener("mousemove", i => {
        const c = i.target;
        clearTimeout(e),
        e = setTimeout( () => {
            s(c, D.hover)
        }
        , 20)
    }
    );
    function a(i) {
        i.defaultPrevented || s(i.composedPath()[0], D.tap)
    }
    I.addEventListener("mousedown", a),
    I.addEventListener("touchstart", a, {
        passive: !0
    });
    const r = new IntersectionObserver(i => {
        for (const c of i)
            c.isIntersecting && (Re(new URL(c.target.href)),
            r.unobserve(c.target))
    }
    ,{
        threshold: 0
    });
    async function s(i, c) {
        const l = st(i, I)
          , f = l === t && c >= n;
        if (!l || f)
            return;
        const {url: h, external: v, download: u} = xe(l, L, b.hash);
        if (v || u)
            return;
        const g = oe(l)
          , m = h && pe(_.url) === pe(h);
        if (!(g.reload || m))
            if (c <= g.preload_data) {
                t = l,
                n = D.tap;
                const p = await te(h, !1);
                if (!p)
                    return;
                zt(p)
            } else
                c <= g.preload_code && (t = l,
                n = c,
                Re(h))
    }
    function o() {
        r.disconnect();
        for (const i of I.querySelectorAll("a")) {
            const {url: c, external: l, download: f} = xe(i, L, b.hash);
            if (l || f)
                continue;
            const h = oe(i);
            h.reload || (h.preload_code === D.viewport && r.observe(i),
            h.preload_code === D.eager && Re(c))
        }
    }
    M.add(o),
    o()
}
function Q(e, t) {
    if (e instanceof Pe)
        return e.body;
    const n = De(e)
      , a = Mt(e);
    return b.hooks.handleError({
        error: e,
        event: t,
        status: n,
        message: a
    }) ?? {
        message: a
    }
}
function wt(e, t) {
    Ft( () => (e.add(t),
    () => {
        e.delete(t)
    }
    ))
}
function mn(e) {
    wt(M, e)
}
function wn(e) {
    wt(Be, e)
}
function vn(e, t={}) {
    return e = new URL(Z(e)),
    e.origin !== _e ? Promise.reject(new Error("goto: invalid URL")) : Me(e, t, 0)
}
function rn(e) {
    if (typeof e == "function")
        ie.push(e);
    else {
        const {href: t} = new URL(e,location.href);
        ie.push(n => n.href === t)
    }
}
function yn() {
    return ee = !0,
    Ht()
}
function bn(e, t) {
    ve(y);
    const n = {
        [j]: y += 1,
        [q]: k,
        [Ne]: w.url.href,
        [ge]: t
    };
    history.pushState(n, "", Z(e)),
    Ke = !0,
    w.state = t,
    F.$set({
        page: lt( () => ne(w))
    }),
    ut(y, k)
}
function kn(e, t) {
    const n = {
        [j]: y,
        [q]: k,
        [Ne]: w.url.href,
        [ge]: t
    };
    history.replaceState(n, "", Z(e)),
    w.state = t,
    F.$set({
        page: lt( () => ne(w))
    })
}
function on() {
    history.scrollRestoration = "manual",
    addEventListener("beforeunload", t => {
        let n = !1;
        if (tt(),
        !X) {
            const a = He(_, void 0, null, "leave")
              , r = {
                ...a.navigation,
                cancel: () => {
                    n = !0,
                    a.reject(new Error("navigation cancelled"))
                }
            };
            Be.forEach(s => s(r))
        }
        n ? (t.preventDefault(),
        t.returnValue = "") : history.scrollRestoration = "auto"
    }
    ),
    addEventListener("visibilitychange", () => {
        document.visibilityState === "hidden" && tt()
    }
    ),
    navigator.connection?.saveData || an(),
    I.addEventListener("click", async t => {
        if (t.button || t.which !== 1 || t.metaKey || t.ctrlKey || t.shiftKey || t.altKey || t.defaultPrevented)
            return;
        const n = st(t.composedPath()[0], I);
        if (!n)
            return;
        const {url: a, external: r, target: s, download: o} = xe(n, L, b.hash);
        if (!a)
            return;
        if (s === "_parent" || s === "_top") {
            if (window.parent !== window)
                return
        } else if (s && s !== "_self")
            return;
        const i = oe(n);
        if (!(n instanceof SVGAElement) && a.protocol !== location.protocol && !(a.protocol === "https:" || a.protocol === "http:") || o)
            return;
        const [l,f] = (b.hash ? a.hash.replace(/^#/, "") : a.href).split("#")
          , h = l === be(location);
        if (r || i.reload && (!h || !f)) {
            _t({
                url: a,
                type: "link",
                event: t
            }) ? X = !0 : t.preventDefault();
            return
        }
        if (f !== void 0 && h) {
            const [,v] = _.url.href.split("#");
            if (v === f) {
                if (t.preventDefault(),
                f === "" || f === "top" && n.ownerDocument.getElementById("top") === null)
                    scrollTo({
                        top: 0
                    });
                else {
                    const u = n.ownerDocument.getElementById(decodeURIComponent(f));
                    u && (u.scrollIntoView(),
                    u.focus())
                }
                return
            }
            if (G = !0,
            ve(y),
            e(a),
            !i.replace_state)
                return;
            G = !1
        }
        t.preventDefault(),
        await new Promise(v => {
            requestAnimationFrame( () => {
                setTimeout(v, 0)
            }
            ),
            setTimeout(v, 100)
        }
        ),
        await Y({
            type: "link",
            url: a,
            keepfocus: i.keepfocus,
            noscroll: i.noscroll,
            replace_state: i.replace_state ?? a.href === location.href,
            event: t
        })
    }
    ),
    I.addEventListener("submit", t => {
        if (t.defaultPrevented)
            return;
        const n = HTMLFormElement.prototype.cloneNode.call(t.target)
          , a = t.submitter;
        if ((a?.formTarget || n.target) === "_blank" || (a?.formMethod || n.method) !== "get")
            return;
        const o = new URL(a?.hasAttribute("formaction") && a?.formAction || n.action);
        if (we(o, L, !1))
            return;
        const i = t.target
          , c = oe(i);
        if (c.reload)
            return;
        t.preventDefault(),
        t.stopPropagation();
        const l = new FormData(i,a);
        o.search = new URLSearchParams(l).toString(),
        Y({
            type: "form",
            url: o,
            keepfocus: c.keepfocus,
            noscroll: c.noscroll,
            replace_state: c.replace_state ?? o.href === location.href,
            event: t
        })
    }
    ),
    addEventListener("popstate", async t => {
        if (!$e) {
            if (t.state?.[j]) {
                const n = t.state[j];
                if (P = {},
                n === y)
                    return;
                const a = V[n]
                  , r = t.state[ge] ?? {}
                  , s = new URL(t.state[Ne] ?? location.href)
                  , o = t.state[q]
                  , i = _.url ? be(location) === be(_.url) : !1;
                if (o === k && (Ke || i)) {
                    r !== w.state && (w.state = r),
                    e(s),
                    V[y] = me(),
                    a && scrollTo(a.x, a.y),
                    y = n;
                    return
                }
                const l = n - y;
                await Y({
                    type: "popstate",
                    url: s,
                    popped: {
                        state: r,
                        scroll: a,
                        delta: l
                    },
                    accept: () => {
                        y = n,
                        k = o
                    }
                    ,
                    block: () => {
                        history.go(-l)
                    }
                    ,
                    nav_token: P,
                    event: t
                })
            } else if (!G) {
                const n = new URL(location.href);
                e(n),
                b.hash && location.reload()
            }
        }
    }
    ),
    addEventListener("hashchange", () => {
        G && (G = !1,
        history.replaceState({
            ...history.state,
            [j]: ++y,
            [q]: k
        }, "", location.href))
    }
    );
    for (const t of document.querySelectorAll("link"))
        Gt.has(t.rel) && (t.href = t.href);
    addEventListener("pageshow", t => {
        t.persisted && N.navigating.set(H.current = null)
    }
    );
    function e(t) {
        _.url = w.url = t,
        N.page.set(ne(w)),
        N.page.notify()
    }
}
async function sn(e, {status: t=200, error: n, node_ids: a, params: r, route: s, server_route: o, data: i, form: c}) {
    dt = !0;
    const l = new URL(location.href);
    let f;
    ({params: r={}, route: s={
        id: null
    }} = await te(l, !1) || {}),
    f = Ve.find( ({id: u}) => u === s.id);
    let h, v = !0;
    try {
        const u = a.map(async (m, p) => {
            const d = i[p];
            return d?.uses && (d.uses = cn(d.uses)),
            Ye({
                loader: b.nodes[m],
                url: l,
                params: r,
                route: s,
                parent: async () => {
                    const E = {};
                    for (let R = 0; R < p; R += 1)
                        Object.assign(E, (await u[R]).data);
                    return E
                }
                ,
                server_data_node: Fe(d)
            })
        }
        )
          , g = await Promise.all(u);
        if (f) {
            const m = f.layouts;
            for (let p = 0; p < m.length; p++)
                m[p] || g.splice(p, 0, void 0)
        }
        h = he({
            url: l,
            params: r,
            branch: g,
            status: t,
            error: n,
            form: c,
            route: f ?? null
        })
    } catch (u) {
        if (u instanceof Oe) {
            await J(new URL(u.location,location.href));
            return
        }
        h = await We({
            status: De(u),
            error: await Q(u, {
                url: l,
                params: r,
                route: s
            }),
            url: l,
            route: s
        }),
        e.textContent = "",
        v = !1
    }
    h.props.page && (h.props.page.state = {}),
    await gt(h, e, v)
}
function cn(e) {
    return {
        dependencies: new Set(e?.dependencies ?? []),
        params: new Set(e?.params ?? []),
        parent: !!e?.parent,
        route: !!e?.route,
        url: !!e?.url,
        search_params: new Set(e?.search_params ?? [])
    }
}
let $e = !1;
function ln(e, t=null) {
    const n = document.querySelector("[autofocus]");
    if (n)
        n.focus();
    else {
        const a = vt(e);
        if (a && document.getElementById(a)) {
            const {x: s, y: o} = t ?? me();
            setTimeout( () => {
                const i = history.state;
                $e = !0,
                location.replace(`#${a}`),
                b.hash && location.replace(e.hash),
                history.replaceState(i, "", e.hash),
                scrollTo(s, o),
                $e = !1
            }
            )
        } else {
            const s = document.body
              , o = s.getAttribute("tabindex");
            s.tabIndex = -1,
            s.focus({
                preventScroll: !0,
                focusVisible: !1
            }),
            o !== null ? s.setAttribute("tabindex", o) : s.removeAttribute("tabindex")
        }
        const r = getSelection();
        if (r && r.type !== "None") {
            const s = [];
            for (let o = 0; o < r.rangeCount; o += 1)
                s.push(r.getRangeAt(o));
            setTimeout( () => {
                if (r.rangeCount === s.length) {
                    for (let o = 0; o < r.rangeCount; o += 1) {
                        const i = s[o]
                          , c = r.getRangeAt(o);
                        if (i.commonAncestorContainer !== c.commonAncestorContainer || i.startContainer !== c.startContainer || i.endContainer !== c.endContainer || i.startOffset !== c.startOffset || i.endOffset !== c.endOffset)
                            return
                    }
                    r.removeAllRanges()
                }
            }
            )
        }
    }
}
function He(e, t, n, a) {
    let r, s;
    const o = new Promise( (c, l) => {
        r = c,
        s = l
    }
    );
    return o.catch( () => {}
    ),
    {
        navigation: {
            from: {
                params: e.params,
                route: {
                    id: e.route?.id ?? null
                },
                url: e.url
            },
            to: n && {
                params: t?.params ?? null,
                route: {
                    id: t?.route?.id ?? null
                },
                url: n
            },
            willUnload: !t,
            type: a,
            complete: o
        },
        fulfil: r,
        reject: s
    }
}
function ne(e) {
    return {
        data: e.data,
        error: e.error,
        form: e.form,
        params: e.params,
        route: e.route,
        state: e.state,
        status: e.status,
        url: e.url
    }
}
function un(e) {
    const t = new URL(e);
    return t.hash = decodeURIComponent(e.hash),
    t
}
function vt(e) {
    let t;
    if (b.hash) {
        const [,,n] = e.hash.split("#", 3);
        t = n ?? ""
    } else
        t = e.hash.slice(1);
    return decodeURIComponent(t)
}
export {w as a, wn as b, mn as c, _n as d, vn as g, yn as i, dn as l, bn as p, kn as r, N as s};
typeof window<"u"&&((window.__svelte??={}).v??=new Set).add("5");
import {n as C, aI as Q, aJ as ee, aK as re, aj as te, aL as se, aM as ae, aN as V, aH as oe, I as G, ai as z, am as y, aO as ne, aP as g, aQ as v, U as p} from "./ByWyckft.js";
const ie = Symbol("is custom element")
  , ce = Symbol("is html");
function Ue(e) {
    if (C) {
        var r = !1
          , t = () => {
            if (!r) {
                if (r = !0,
                e.hasAttribute("value")) {
                    var s = e.value;
                    D(e, "value", null),
                    e.value = s
                }
                if (e.hasAttribute("checked")) {
                    var a = e.checked;
                    D(e, "checked", null),
                    e.checked = a
                }
            }
        }
        ;
        e.__on_r = t,
        te(t),
        se()
    }
}
function Le(e, r) {
    var t = F(e);
    t.value === (t.value = r ?? void 0) || e.value === r && (r !== 0 || e.nodeName !== "PROGRESS") || (e.value = r ?? "")
}
function D(e, r, t, s) {
    var a = F(e);
    C && (a[r] = e.getAttribute(r),
    r === "src" || r === "srcset" || r === "href" && e.nodeName === "LINK") || a[r] !== (a[r] = t) && (r === "loading" && (e[Q] = t),
    t == null ? e.removeAttribute(r) : typeof t != "string" && ue(e).includes(r) ? e[r] = t : e.setAttribute(r, t))
}
function F(e) {
    return e.__attributes ??= {
        [ie]: e.nodeName.includes("-"),
        [ce]: e.namespaceURI === ee
    }
}
var B = new Map;
function ue(e) {
    var r = e.getAttribute("is") || e.nodeName
      , t = B.get(r);
    if (t)
        return t;
    B.set(r, t = []);
    for (var s, a = e, o = Element.prototype; o !== a; ) {
        s = ae(a);
        for (var i in s)
            s[i].set && t.push(i);
        a = re(a)
    }
    return t
}
function Ce(e, r, t=r) {
    var s = new WeakSet;
    V(e, "input", async a => {
        var o = a ? e.defaultValue : e.value;
        if (o = P(e) ? x(o) : o,
        t(o),
        y !== null && s.add(y),
        await oe(),
        o !== (o = r())) {
            var i = e.selectionStart
              , u = e.selectionEnd
              , U = e.value.length;
            if (e.value = o ?? "",
            u !== null) {
                var d = e.value.length;
                i === u && u === U && d > U ? (e.selectionStart = d,
                e.selectionEnd = d) : (e.selectionStart = i,
                e.selectionEnd = Math.min(u, d))
            }
        }
    }
    ),
    (C && e.defaultValue !== e.value || G(r) == null && e.value) && (t(P(e) ? x(e.value) : e.value),
    y !== null && s.add(y)),
    z( () => {
        var a = r();
        if (e === document.activeElement) {
            var o = ne ?? y;
            if (s.has(o))
                return
        }
        P(e) && a === x(e.value) || e.type === "date" && !a && !e.value || a !== e.value && (e.value = a ?? "")
    }
    )
}
function Ne(e, r, t=r) {
    V(e, "change", s => {
        var a = s ? e.defaultChecked : e.checked;
        t(a)
    }
    ),
    (C && e.defaultChecked !== e.checked || G(r) == null) && t(e.checked),
    z( () => {
        var s = r();
        e.checked = !!s
    }
    )
}
function P(e) {
    var r = e.type;
    return r === "number" || r === "range"
}
function x(e) {
    return e === "" ? null : +e
}
const I = "nowkie_user";
function H() {
    try {
        const e = localStorage.getItem(I);
        if (e)
            return JSON.parse(e)
    } catch {}
    return null
}
function A(e) {
    try {
        e ? localStorage.setItem(I, JSON.stringify(e)) : localStorage.removeItem(I)
    } catch {}
}
function le() {
    const e = H()
      , {subscribe: r, set: t, update: s} = v({
        user: e,
        accessToken: null,
        isLoading: !1,
        isChecked: !1,
        profileRequired: !1
    });
    return {
        subscribe: r,
        setAccessToken(a) {
            s(o => ({
                ...o,
                accessToken: a
            }))
        },
        getAccessToken() {
            return p({
                subscribe: r
            }).accessToken
        },
        setUser(a) {
            s(o => (A(a),
            {
                ...o,
                user: a,
                isChecked: !0
            }))
        },
        login(a, o) {
            t({
                user: a,
                accessToken: o || null,
                isLoading: !1,
                isChecked: !0,
                profileRequired: !1
            }),
            A(a)
        },
        setProfileRequired(a) {
            t({
                user: null,
                accessToken: a,
                isLoading: !1,
                isChecked: !0,
                profileRequired: !0
            }),
            A(null)
        },
        logout() {
            t({
                user: null,
                accessToken: null,
                isLoading: !1,
                isChecked: !0,
                profileRequired: !1
            }),
            A(null)
        },
        setLoading(a) {
            s(o => ({
                ...o,
                isLoading: a
            }))
        },
        setChecked(a) {
            s(o => ({
                ...o,
                isChecked: a
            }))
        },
        updateUser(a) {
            s(o => {
                if (!o.user)
                    return o;
                const i = {
                    ...o.user,
                    ...a
                };
                return A(i),
                {
                    ...o,
                    user: i
                }
            }
            )
        },
        hasCachedUser() {
            return !!H()
        }
    }
}
const n = le()
  , be = g(n, e => e.isChecked && !!e.user)
  , Oe = g(n, e => e.user)
  , Pe = g(n, e => e.isLoading)
  , xe = g(n, e => e.isChecked);
g(n, e => e.isChecked && e.user?.roles?.includes("healer"));
g(n, e => e.accessToken);
const qe = g(n, e => e.profileRequired)
  , fe = ""
  , J = `${fe}/api`
  , de = ""
  , K = `${de}/api/v1/auth`
  , c = {
    auth: {
        signUp: "/sign-up",
        signIn: "/sign-in",
        verifyOtp: "/verify-otp",
        resendOtp: "/resend-otp",
        refresh: "/refresh",
        logout: "/logout",
        changePassword: "/change-password",
        forgotPassword: "/forgot-password",
        resetPassword: "/reset-password",
        loginYandex: "/login/yandex",
        loginGoogle: "/login/google"
    },
    users: {
        me: "/users/me",
        profile: e => `/users/${e}`,
        updateProfile: "/users/me",
        privacy: "/users/me/privacy",
        follow: e => `/users/${e}/follow`,
        followers: e => `/users/${e}/followers`,
        following: e => `/users/${e}/following`,
        whoToFollow: "/users/suggestions/who-to-follow",
        topClans: "/users/stats/top-clans",
        search: "/users/search",
        pins: "/users/me/pins",
        setPin: "/users/me/pin",
        block: e => `/users/${e}/block`,
        blocked: "/users/me/blocked"
    },
    posts: {
        list: "/posts",
        single: e => `/posts/${e}`,
        create: "/posts",
        update: e => `/posts/${e}`,
        delete: e => `/posts/${e}`,
        restore: e => `/posts/${e}/restore`,
        like: e => `/posts/${e}/like`,
        repost: e => `/posts/${e}/repost`,
        view: e => `/posts/${e}/view`,
        pin: e => `/posts/${e}/pin`,
        byUser: e => `/posts/user/${e}`,
        likedByUser: e => `/posts/user/${e}/liked`,
        wallByUser: e => `/posts/user/${e}/wall`,
        comments: e => `/posts/${e}/comments`
    },
    comments: {
        delete: e => `/comments/${e}`,
        restore: e => `/comments/${e}/restore`,
        like: e => `/comments/${e}/like`,
        replies: e => `/comments/${e}/replies`
    },
    notifications: {
        list: "/notifications/",
        count: "/notifications/count",
        markRead: e => `/notifications/${e}/read`,
        markReadBatch: "/notifications/read-batch",
        markAllRead: "/notifications/read-all",
        stream: "/notifications/stream",
        settings: "/notifications/settings"
    },
    files: {
        upload: "/files/upload",
        get: e => `/files/${e}`,
        delete: e => `/files/${e}`
    },
    reports: {
        create: "/reports"
    },
    hashtags: {
        search: "/hashtags",
        trending: "/hashtags/trending",
        posts: e => `/hashtags/${encodeURIComponent(e)}/posts`
    },
    search: {
        global: "/search"
    },
    verification: {
        status: "/verification/status",
        submit: "/verification/submit"
    }
};
let q = !1
  , R = null;
async function M() {
    return q && R || (q = !0,
    R = (async () => {
        try {
            const e = await fetch(`${K}/refresh`, {
                method: "POST",
                credentials: "include",
                headers: {
                    "Content-Type": "application/json"
                }
            });
            if (!e.ok)
                return n.logout(),
                null;
            const t = (await e.json()).accessToken;
            return t ? (n.setAccessToken(t),
            t) : null
        } catch {
            return null
        } finally {
            q = !1,
            R = null
        }
    }
    )()),
    R
}
const he = [502, 503, 504];
class Y {
    baseUrl;
    constructor(r) {
        this.baseUrl = r
    }
    getHeaders(r=!0) {
        const t = {
            "Content-Type": "application/json"
        };
        if (r) {
            const s = n.getAccessToken();
            s && (t.Authorization = `Bearer ${s}`)
        }
        return t
    }
    logError(r, t) {}
    async handleResponse(r) {
        if (r.status === 204)
            return {
                data: void 0
            };
        if (he.includes(r.status))
            return this.logError(`Server error (${r.status})`, "Backend unavailable"),
            {
                error: {
                    code: "SERVER_ERROR",
                    message: "  "
                }
            };
        let t = null;
        if ((r.headers.get("content-type") || "").includes("application/json"))
            t = await r.json().catch( () => null),
            typeof t == "string" && (t = {
                message: t
            });
        else {
            const o = await r.text().catch( () => null);
            o && (t = {
                message: o
            })
        }
        if (r.status === 401) {
            const o = t?.error || {
                code: "UNAUTHORIZED",
                message: t?.message || " "
            };
            return this.logError("Unauthorized (401)", o),
            {
                error: o
            }
        }
        if (!r.ok) {
            const o = t?.error || {
                code: r.status === 422 ? "VALIDATION_ERROR" : "UNKNOWN_ERROR",
                message: t?.message || " "
            };
            return this.logError(`Request failed (${r.status})`, o),
            {
                error: o
            }
        }
        return {
            data: t?.data !== void 0 ? t.data : t
        }
    }
    async executeWithRefresh(r, t, s, a) {
        const o = a?.skipAuth ?? !1;
        let i = await this.executeRequest(r, t, s, {
            ...a,
            skipAuth: o
        });
        return i.error?.code === "UNAUTHORIZED" && !o && await M() && (i = await this.executeRequest(r, t, s, a)),
        i
    }
    async executeRequest(r, t, s, a) {
        try {
            const o = await fetch(t, {
                method: r,
                headers: this.getHeaders(!a?.skipAuth),
                credentials: "include",
                body: s ? JSON.stringify(s) : void 0,
                signal: a?.signal
            });
            return this.handleResponse(o)
        } catch (o) {
            if (o instanceof Error && o.name === "AbortError")
                throw o;
            return this.logError(`Network error (${r})`, o),
            {
                error: {
                    code: "NETWORK_ERROR",
                    message: "    "
                }
            }
        }
    }
    async get(r, t, s) {
        let a = `${this.baseUrl}${r}`;
        if (t) {
            const o = new URLSearchParams;
            Object.entries(t).forEach( ([i,u]) => {
                o.append(i, String(u))
            }
            ),
            a += `?${o.toString()}`
        }
        return this.executeWithRefresh("GET", a, void 0, s)
    }
    async post(r, t, s) {
        return this.executeWithRefresh("POST", `${this.baseUrl}${r}`, t, s)
    }
    async put(r, t, s) {
        return this.executeWithRefresh("PUT", `${this.baseUrl}${r}`, t, s)
    }
    async patch(r, t, s) {
        return this.executeWithRefresh("PATCH", `${this.baseUrl}${r}`, t, s)
    }
    async delete(r, t) {
        return this.executeWithRefresh("DELETE", `${this.baseUrl}${r}`, void 0, t)
    }
}
const l = new Y(J)
  , f = new Y(K)
  , Ie = {
    async signUp(e) {
        n.setLoading(!0);
        const r = await f.post(c.auth.signUp, {
            email: e.email,
            password: e.password,
            turnstileToken: e.turnstileToken
        }, {
            skipAuth: !0
        });
        return n.setLoading(!1),
        r.error ? {
            success: !1,
            error: r.error.message
        } : {
            success: !0,
            requiresVerification: !0,
            email: r.data?.email || e.email,
            flowToken: r.data?.flowToken
        }
    },
    async verifyOtp(e) {
        n.setLoading(!0);
        const r = await f.post(c.auth.verifyOtp, {
            email: e.email,
            password: e.password,
            otp: e.otp,
            flowToken: e.flowToken
        }, {
            skipAuth: !0
        });
        if (r.error) {
            n.setLoading(!1);
            const a = r.error;
            return {
                success: !1,
                error: r.error.message,
                errorCode: r.error.code,
                attemptsLeft: a.attemptsLeft
            }
        }
        if (!r.data?.accessToken)
            return n.setLoading(!1),
            {
                success: !1,
                error: "Unexpected error"
            };
        const t = r.data.accessToken;
        n.setAccessToken(t);
        const s = await l.get("/profile");
        return n.setLoading(!1),
        s.error ? {
            success: !1,
            error: s.error.message
        } : s.data?.profileRequired ? (n.setProfileRequired(t),
        {
            success: !0,
            profileRequired: !0
        }) : s.data?.user ? (n.login(s.data.user, t),
        {
            success: !0
        }) : {
            success: !1,
            error: "Unexpected error"
        }
    },
    async resendOtp(e) {
        const r = await f.post(c.auth.resendOtp, {
            email: e.email,
            flowToken: e.flowToken
        }, {
            skipAuth: !0
        });
        if (r.error) {
            const t = r.error;
            return {
                success: !1,
                error: r.error.message,
                retryAfter: t.retryAfter
            }
        }
        return {
            success: !0
        }
    },
    async signIn(e) {
        n.setLoading(!0);
        const r = await f.post(c.auth.signIn, {
            email: e.email,
            password: e.password,
            turnstileToken: e.turnstileToken
        }, {
            skipAuth: !0
        });
        if (r.error)
            return n.setLoading(!1),
            {
                success: !1,
                error: r.error.message,
                errorCode: r.error.code
            };
        if (!r.data)
            return n.setLoading(!1),
            {
                success: !1,
                error: "Unexpected error"
            };
        if ("requiresVerification"in r.data && r.data.requiresVerification)
            return n.setLoading(!1),
            {
                success: !0,
                requiresVerification: !0,
                email: r.data.email,
                flowToken: r.data.flowToken
            };
        const t = r.data;
        if (!t.accessToken)
            return n.setLoading(!1),
            {
                success: !1,
                error: "Unexpected error"
            };
        const s = t.accessToken;
        n.setAccessToken(s);
        const a = await l.get("/profile");
        return n.setLoading(!1),
        a.error ? {
            success: !1,
            error: a.error.message
        } : a.data?.profileRequired ? (n.setProfileRequired(s),
        {
            success: !0,
            profileRequired: !0
        }) : a.data?.user ? (n.login(a.data.user, s),
        {
            success: !0
        }) : {
            success: !1,
            error: "Failed to fetch user profile"
        }
    },
    async logout() {
        await f.post(c.auth.logout, void 0, {
            skipAuth: !0
        }),
        n.logout()
    },
    async checkAuth() {
        const e = await M();
        if (!e)
            return n.logout(),
            {
                authenticated: !1,
                user: null
            };
        const r = await l.get("/profile");
        return r.error ? r.error.code === "UNAUTHORIZED" ? (n.logout(),
        {
            authenticated: !1,
            user: null
        }) : {
            authenticated: !1,
            user: null,
            networkError: !0
        } : r.data ? r.data.banned ? (n.logout(),
        {
            authenticated: !1,
            user: null
        }) : r.data.profileRequired ? (n.setProfileRequired(e),
        {
            authenticated: !0,
            user: null,
            profileRequired: !0
        }) : r.data.user ? (n.login(r.data.user, e),
        {
            authenticated: !0,
            user: r.data.user
        }) : (n.logout(),
        {
            authenticated: !1,
            user: null
        }) : (n.logout(),
        {
            authenticated: !1,
            user: null
        })
    },
    async fetchCurrentUser() {
        const e = await l.get(c.users.me);
        return e.error ? (e.error.code === "UNAUTHORIZED" && n.logout(),
        {
            success: !1,
            error: e.error.message
        }) : e.data ? (n.setUser(e.data),
        {
            success: !0
        }) : {
            success: !1,
            error: "Failed to fetch user"
        }
    },
    async createProfile(e) {
        n.setLoading(!0);
        const r = await l.post("/users/profile", {
            displayName: e.displayName,
            avatar: e.avatar,
            username: e.username || void 0,
            gender: e.gender || void 0
        });
        if (n.setLoading(!1),
        r.error)
            return {
                success: !1,
                error: r.error.message,
                errorCode: r.error.code
            };
        if (r.data) {
            const t = n.getAccessToken();
            return n.login(r.data, t || void 0),
            {
                success: !0
            }
        }
        return {
            success: !1,
            error: "Failed to create profile"
        }
    },
    async forgotPassword(e) {
        const r = await f.post(c.auth.forgotPassword, {
            email: e.email,
            turnstileToken: e.turnstileToken
        }, {
            skipAuth: !0
        });
        return r.error ? {
            success: !1,
            error: r.error.message,
            errorCode: r.error.code
        } : {
            success: !0,
            email: r.data?.email || e.email,
            flowToken: r.data?.flowToken
        }
    },
    async resetPassword(e) {
        const r = await f.post(c.auth.resetPassword, {
            email: e.email,
            flowToken: e.flowToken,
            otp: e.otp,
            newPassword: e.newPassword
        }, {
            skipAuth: !0
        });
        if (r.error) {
            const t = r.error;
            return {
                success: !1,
                error: r.error.message,
                errorCode: r.error.code,
                attemptsLeft: t.attemptsLeft,
                retryAfter: t.retryAfter
            }
        }
        return {
            success: !0
        }
    },
    async resendForgotPasswordOtp(e) {
        const r = await f.post(c.auth.resendOtp, {
            email: e.email,
            flowToken: e.flowToken
        }, {
            skipAuth: !0
        });
        if (r.error) {
            const t = r.error;
            return {
                success: !1,
                error: r.error.message,
                retryAfter: t.retryAfter
            }
        }
        return {
            success: !0
        }
    }
}
  , m = v([])
  , S = v(0)
  , W = v(!1)
  , pe = v(!0)
  , N = v([])
  , ge = 3
  , me = 15e3;
let _ = !1
  , j = Date.now();
const k = new Map;
function we() {
    if (typeof window > "u")
        return;
    const e = () => {
        _ = !0,
        j = Date.now()
    }
    ;
    window.addEventListener("mousemove", e, {
        passive: !0
    }),
    window.addEventListener("click", e, {
        passive: !0
    }),
    window.addEventListener("keydown", e, {
        passive: !0
    }),
    window.addEventListener("scroll", e, {
        passive: !0
    }),
    window.addEventListener("touchstart", e, {
        passive: !0
    }),
    setInterval( () => {
        Date.now() - j > 2e3 && (_ = !1),
        _ && !k.size && p(N).forEach(s => {
            Z(s.id)
        }
        )
    }
    , 1e3)
}
function Z(e) {
    const r = k.get(e);
    if (r && clearTimeout(r),
    !_)
        return;
    const t = setTimeout( () => {
        N.update(s => s.filter(a => a.id !== e)),
        k.delete(e)
    }
    , me);
    k.set(e, t)
}
function ke(e) {
    const r = k.get(e);
    r && (clearTimeout(r),
    k.delete(e))
}
function Te(e) {
    N.update(r => [e, ...r].slice(0, ge)),
    _ && Z(e.id)
}
typeof window < "u" && we();
let E = null;
function ve() {
    try {
        E || (E = new Audio("/assets/notification.ogg"),
        E.volume = .5),
        E.currentTime = 0,
        E.play().catch( () => {}
        )
    } catch {}
}
let T = null
  , L = null
  , h = 0
  , w = !1
  , $ = !1;
const ye = 10
  , Ae = 2e3
  , Re = 3e4;
function Ee(e) {
    const r = e.split(`
`);
    let t = "message"
      , s = "";
    for (const a of r)
        a.startsWith("event:") ? t = a.slice(6).trim() : a.startsWith("data:") && (s = a.slice(5).trim());
    return s ? {
        event: t,
        data: s
    } : null
}
function Se(e, r) {
    if (e !== "connected" && e === "notification")
        try {
            const t = JSON.parse(r);
            m.update(s => [t, ...s]),
            S.update(s => s + 1),
            t.sound && ve(),
            Te(t)
        } catch {}
}
async function X() {
    let e = p(n);
    if (!e.user || !e.accessToken || w || $)
        return;
    w = !0;
    const r = `${J}${c.notifications.stream}`;
    try {
        T = new AbortController;
        let s = await fetch(r, {
            method: "GET",
            headers: {
                Accept: "text/event-stream",
                "Cache-Control": "no-cache",
                Authorization: `Bearer ${e.accessToken}`
            },
            signal: T.signal
        });
        if (s.status === 401) {
            const u = await M();
            if (u)
                s = await fetch(r, {
                    method: "GET",
                    headers: {
                        Accept: "text/event-stream",
                        "Cache-Control": "no-cache",
                        Authorization: `Bearer ${u}`
                    },
                    signal: T.signal
                });
            else {
                w = !1;
                return
            }
        }
        if (!s.ok)
            throw new Error(`HTTP ${s.status}: ${s.statusText}`);
        if (!s.body)
            throw new Error("No response body");
        $ = !0,
        w = !1,
        h = 0;
        const a = s.body.getReader()
          , o = new TextDecoder;
        let i = "";
        for (; ; ) {
            const {done: u, value: U} = await a.read();
            if (u)
                break;
            i += o.decode(U, {
                stream: !0
            });
            const d = i.split(`

`);
            i = d.pop() || "";
            for (const b of d)
                if (b.trim()) {
                    if (b.startsWith(":"))
                        continue;
                    const O = Ee(b);
                    O && Se(O.event, O.data)
                }
        }
    } catch (s) {
        if (s.name === "AbortError")
            return
    } finally {
        w = !1,
        $ = !1
    }
    if (p(n).user)
        if (h < ye) {
            const s = Math.min(Ae * Math.pow(1.5, h), Re);
            h++,
            L = setTimeout(X, s)
        } else
            h = 0
}
function _e() {
    L && (clearTimeout(L),
    L = null),
    T && (T.abort(),
    T = null),
    h = 0,
    w = !1,
    $ = !1
}
function Me() {
    return $
}
function De() {
    h = 0,
    _e(),
    X()
}
const Be = {
    async fetchNotifications(e=0, r=20) {
        if (!p(n).user)
            return {
                success: !1,
                error: "Not authenticated"
            };
        W.set(!0);
        const s = await l.get(`${c.notifications.list}?offset=${e}&limit=${r}`);
        return W.set(!1),
        s.error ? {
            success: !1,
            error: s.error.message
        } : s.data ? (e === 0 ? m.set(s.data.notifications) : m.update(a => [...a, ...s.data.notifications]),
        pe.set(s.data.hasMore),
        {
            success: !0
        }) : {
            success: !1,
            error: "Unexpected error"
        }
    },
    async fetchUnreadCount() {
        if (!p(n).user)
            return 0;
        const r = await l.get(c.notifications.count);
        return r.data ? (S.set(r.data.count),
        r.data.count) : 0
    },
    async markAsRead(e) {
        return (await l.post(c.notifications.markRead(e))).data?.success ? (m.update(t => t.map(s => s.id === e ? {
            ...s,
            read: !0
        } : s)),
        S.update(t => Math.max(0, t - 1)),
        !0) : !1
    },
    async markAllAsRead() {
        return (await l.post(c.notifications.markAllRead)).data?.success ? (m.update(r => r.map(t => ({
            ...t,
            read: !0
        }))),
        S.set(0),
        !0) : !1
    },
    async markBatchAsRead(e) {
        if (e.length === 0)
            return 0;
        const r = await l.post(c.notifications.markReadBatch, {
            ids: e
        });
        if (r.data?.success) {
            const t = r.data.count;
            return m.update(s => s.map(a => e.includes(a.id) ? {
                ...a,
                read: !0
            } : a)),
            S.update(s => Math.max(0, s - t)),
            t
        }
        return 0
    },
    removeToast(e) {
        ke(e),
        N.update(r => r.filter(t => t.id !== e))
    },
    getNotificationText(e) {
        const r = e.actor.displayName;
        switch (e.type) {
        case "like":
            return `${r}   `;
        case "comment":
            return `${r}   `;
        case "reply":
            return `${r}    `;
        case "follow":
            return `${r}   `;
        case "repost":
            return `${r}    `;
        case "mention":
            return `${r}  `;
        case "wall_post":
            return `${r}    `;
        case "verification_approved":
            return "    !";
        case "verification_rejected":
            return e.preview || "    ";
        default:
            return `${r}  `
        }
    },
    async getSettings() {
        if (!p(n).user)
            return {
                error: "Not authenticated"
            };
        const r = await l.get(c.notifications.settings);
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data
        }
    },
    async updateSettings(e) {
        const r = await l.put(c.notifications.settings, e);
        return r.error ? {
            success: !1,
            error: r.error.message
        } : {
            success: !0
        }
    },
    getNotificationLink(e) {
        return e.type === "follow" ? `/${e.actor.username || e.actor.id}` : e.type === "verification_approved" || e.type === "verification_rejected" ? "/settings" : e.targetId ? `/post/${e.targetId}` : "/"
    }
};
export {c as A, l as a, Ce as b, Ie as c, Le as d, Pe as e, m as f, W as g, pe as h, be as i, X as j, Me as k, De as l, xe as m, Be as n, n as o, qe as p, _e as q, Ue as r, D as s, Oe as t, Ne as u, f as v, J as w, M as x, S as y, N as z};
import {a, A as t} from "./Dy9ItHHp.js";
const s = {
    async createReport(e) {
        const r = await a.post(t.reports.create, e);
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data?.data
        }
    }
};
export {s as r};
import "./DsnmJJEf.js";
import {a3 as Is, I as an, ai as sn, aa as nn, aT as rn, n as ys, V as on, as as ln, aU as cn, aV as dn, aN as vn, am as cs, aO as un, a2 as Ee, Z as D, i as v, c as i, r as o, aQ as ta, U as Gt, X as it, p as Qe, f as p, b as we, e as c, g as e, h as K, s as k, k as a, a as Je, a1 as re, Y as _t, aP as Ts, D as pt, aS as ja, _ as Zt, j as Ve, d as Ja, o as Ha, a5 as fs, u as Et, a0 as Aa, aH as vs, $ as Ra, aR as _s, aW as fn} from "./ByWyckft.js";
import {i as P, b as kt} from "./CmM7tx7L.js";
import {s as V, a as Ae, A as Ie, v as _n, o as as, w as Ya, x as xs, i as gs, y as Ds, t as za, c as Rs, d as La, r as Ta, b as Pa, n as ka, z as gn} from "./Dy9ItHHp.js";
import {t as pn, s as he, e as ht, c as As, i as Qt} from "./C1pxLudc.js";
import {p as ue} from "./B4HP8HCJ.js";
import {a as bt, s as aa} from "./BIPZIaNt.js";
import {p as ss} from "./CmX0Oqut.js";
import {g as Ma, i as hn} from "./DF08NYXu.js";
import {i as Ls} from "./BNIeskg8.js";
function qa(n, t, r) {
    Is( () => {
        var s = an( () => t(n, r?.()) || {});
        if (r && s?.update) {
            var d = !1
              , _ = {};
            sn( () => {
                var l = r();
                nn(l),
                d && rn(_, l) && (_ = l,
                s.update(l))
            }
            ),
            d = !0
        }
        if (s?.destroy)
            return () => s.destroy()
    }
    )
}
function ds(n, t={}, r, s) {
    for (var d in r) {
        var _ = r[d];
        t[d] !== _ && (r[d] == null ? n.style.removeProperty(d) : n.style.setProperty(d, _, s))
    }
}
function At(n, t, r, s) {
    var d = n.__style;
    if (ys || d !== t) {
        var _ = pn(t, s);
        (!ys || _ !== n.getAttribute("style")) && (_ == null ? n.removeAttribute("style") : n.style.cssText = _),
        n.__style = t
    } else
        s && (Array.isArray(s) ? (ds(n, r?.[0], s[0]),
        ds(n, r?.[1], s[1], "important")) : ds(n, r, s));
    return s
}
function Oa(n, t, r=!1) {
    if (n.multiple) {
        if (t == null)
            return;
        if (!ln(t))
            return cn();
        for (var s of n.options)
            s.selected = t.includes(Ea(s));
        return
    }
    for (s of n.options) {
        var d = Ea(s);
        if (dn(d, t)) {
            s.selected = !0;
            return
        }
    }
    (!r || t !== void 0) && (n.selectedIndex = -1)
}
function $a(n) {
    var t = new MutationObserver( () => {
        Oa(n, n.__value)
    }
    );
    t.observe(n, {
        childList: !0,
        subtree: !0,
        attributes: !0,
        attributeFilter: ["value"]
    }),
    on( () => {
        t.disconnect()
    }
    )
}
function mn(n, t, r=t) {
    var s = new WeakSet
      , d = !0;
    vn(n, "change", _ => {
        var l = _ ? "[selected]" : ":checked", u;
        if (n.multiple)
            u = [].map.call(n.querySelectorAll(l), Ea);
        else {
            var f = n.querySelector(l) ?? n.querySelector("option:not([disabled])");
            u = f && Ea(f)
        }
        r(u),
        cs !== null && s.add(cs)
    }
    ),
    Is( () => {
        var _ = t();
        if (n === document.activeElement) {
            var l = un ?? cs;
            if (s.has(l))
                return
        }
        if (Oa(n, _, d),
        d && _ === void 0) {
            var u = n.querySelector(":checked");
            u !== null && (_ = Ea(u),
            r(_))
        }
        n.__value = _,
        d = !1
    }
    ),
    $a(n)
}
function Ea(n) {
    return "__value"in n ? n.__value : n.value
}
var wn = Ee('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M14.595 16.187H9.406a.657.657 0 0 1-.67-.643c0-.355.3-.643.67-.643h5.189c.37 0 .67.288.67.643 0 .355-.3.643-.67.643Zm3.873-9.194c-.323-.275-.692-.585-1.131-.975-.199-.154-.417-.33-.648-.518C15.386 4.445 13.602 3 11.975 3c-1.608 0-3.278 1.365-4.619 2.46-.248.203-.48.393-.716.578-.416.37-.785.681-1.11.956C3.4 8.795 3 9.267 3 13.468 3 21 5.267 21 12 21c6.732 0 9 0 9-7.532 0-4.201-.4-4.674-2.532-6.475Z" clip-rule="evenodd"></path></svg>');
function Us(n, t) {
    let r = ue(t, "size", 8, 24);
    var s = wn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var bn = Ee('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="m19.5 19.5-3-3M11 4.5a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13Z"></path></svg>');
function Bs(n, t) {
    let r = ue(t, "size", 8, 24);
    var s = bn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var kn = Ee('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M19.742 13.807c-.86-1.832-.837-2.52-.798-3.773.01-.296.02-.617.02-.986 0-2.926-2.16-7.048-6.963-7.048-4.804 0-6.965 4.122-6.965 7.048 0 .368.01.69.02.986.04 1.252.062 1.941-.807 3.797-.372.928-.327 1.73.135 2.382C5.492 17.783 8.7 18 12 18c3.3 0 6.508-.216 7.616-1.787.463-.653.508-1.454.125-2.406ZM15.056 19.005c-1.848.193-3.852.192-6.13-.002-.34-.026-.678.143-.835.437a.763.763 0 0 0 .125.893C9.236 21.407 10.578 22 11.994 22h.002c1.42 0 2.765-.592 3.788-1.667a.765.765 0 0 0 .122-.9c-.162-.294-.495-.458-.85-.428Z" clip-rule="evenodd"></path></svg>');
function Os(n, t) {
    let r = ue(t, "size", 8, 24);
    var s = kn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var yn = Ee('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path fill="currentColor" fill-rule="evenodd" d="M11.998 11a3.995 3.995 0 0 0 4-4c.084-2.213-1.702-4-4-4A3.995 3.995 0 0 0 8 7c0 2.213 1.787 4 3.998 4ZM18.938 17.878c-.3-1.04-.899-1.986-2.097-2.743C15.843 14.473 14.246 14 12.05 14c-4.292 0-6.389 1.892-6.987 3.878-.2.568.1 1.136.598 1.42C7.458 20.431 9.654 21 12.05 21c2.296 0 4.492-.662 6.288-1.703.5-.284.8-.851.6-1.419Z" clip-rule="evenodd"></path></svg>');
function xn(n, t) {
    let r = ue(t, "size", 8, 24);
    var s = yn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var zn = Ee('<path fill="currentColor" fill-rule="evenodd" d="M17.57 3.221c-1.738-.533-4.103-.162-5.57 1.77-1.423-1.865-3.788-2.327-5.582-1.769C2.5 4.45 1.29 8.638 2.384 11.978 4.156 17.356 10.344 21 12.001 21c1.672 0 7.882-3.644 9.617-9.022 1.091-3.339-.123-7.527-4.048-8.757" clip-rule="evenodd"></path>')
  , Cn = Ee('<path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 5.5C10.5 3.5 7.5 3 5.5 4.5S2.5 9 4 12c1.5 3 8 8 8 8s6.5-5 8-8 0-6-2-7.5-5-1-6 1"></path>')
  , Pn = Ee('<svg viewBox="0 0 24 24" fill="none"><!></svg>');
function ps(n, t) {
    let r = ue(t, "size", 8, 18)
      , s = ue(t, "filled", 8, !1);
    var d = Pn()
      , _ = i(d);
    {
        var l = f => {
            var b = zn();
            v(f, b)
        }
          , u = f => {
            var b = Cn();
            v(f, b)
        }
        ;
        P(_, f => {
            s() ? f(l) : f(u, !1)
        }
        )
    }
    o(d),
    D( () => {
        V(d, "width", r()),
        V(d, "height", r())
    }
    ),
    v(n, d)
}
var Mn = Ee('<svg viewBox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>');
function Es(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Mn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var jn = Ee('<svg viewBox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m2 9 3-3 3 3"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 18H7a2 2 0 0 1-2-2V6M22 15l-3 3-3-3"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 6h6a2 2 0 0 1 2 2v10"></path></svg>');
function ns(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = jn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var qn = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>');
function Ns(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = qn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Sn = Ee('<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"></circle><circle cx="12" cy="12" r="2"></circle><circle cx="12" cy="19" r="2"></circle></svg>');
function hs(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Sn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var In = Ee('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" fill="none" aria-label=" " role="img"><title> </title><path fill="#0080FF" d="M15.13 1.848c1.46-2.514 5.057-2.45 6.429.115l1.253 2.343a3.677 3.677 0 0 0 3.762 1.926l2.597-.373c2.842-.408 5.036 2.493 3.92 5.182L32.07 13.5a3.804 3.804 0 0 0 .865 4.192l1.906 1.833c2.086 2.006 1.224 5.56-1.54 6.348l-2.525.721c-1.484.424-2.554 1.74-2.683 3.302l-.22 2.658c-.242 2.91-3.51 4.44-5.84 2.734l-2.13-1.558a3.644 3.644 0 0 0-4.21-.075l-2.181 1.482c-2.387 1.622-5.601-.023-5.743-2.94l-.129-2.664c-.076-1.566-1.1-2.919-2.568-3.395l-2.499-.81c-2.735-.887-3.474-4.469-1.32-6.4l1.967-1.763a3.801 3.801 0 0 0 1.008-4.16l-.935-2.492C2.27 7.785 4.563 4.963 7.39 5.472l2.582.465a3.673 3.673 0 0 0 3.826-1.791l1.333-2.298Z"></path><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="m24 15-8 8-4-4"></path></svg>');
function Hs(n, t) {
    let r = ue(t, "size", 3, 16);
    var s = In();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Tn = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>');
function ya(n, t) {
    let r = ue(t, "size", 8, 16);
    var s = Tn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Dn = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>');
function Rn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Dn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var An = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg>');
function ms(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = An();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Ln = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>');
function ws(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Ln();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Un = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>');
function Bn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Un();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var On = Ee('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="17" x2="12" y2="22"></line><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"></path></svg>');
function zs(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = On();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var En = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M19.742 13.807c-.86-1.832-.837-2.52-.798-3.773.01-.296.02-.617.02-.986C18.964 6.122 16.804 2 12 2 7.197 2 5.036 6.122 5.036 9.048c0 .368.01.69.02.986.04 1.252.062 1.941-.807 3.797-.372.928-.327 1.73.135 2.382C5.492 17.783 8.7 18 12 18s6.508-.216 7.616-1.787c.463-.653.508-1.454.125-2.406Zm-4.686 5.198c-1.848.193-3.852.192-6.13-.002a.873.873 0 0 0-.835.437.763.763 0 0 0 .125.893C9.236 21.407 10.578 22 11.994 22h.002c1.42 0 2.765-.592 3.788-1.667a.765.765 0 0 0 .122-.9c-.162-.294-.495-.458-.85-.428Z" clip-rule="evenodd"></path></svg>');
function Cs(n, t) {
    let r = ue(t, "size", 8, 24);
    var s = En();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Nn = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path fill="currentColor" d="M7.048 14.278c.022.184.052.368.09.55v.001a6.5 6.5 0 0 0 .466 1.403 4.044 4.044 0 0 1-1.442-.982.573.573 0 0 1-.094-.67.654.654 0 0 1 .626-.328c.12.01.237.018.354.026Zm3.925 1.383c.052.062.108.12.166.179h-.001a3.253 3.253 0 0 1-.166-.179ZM9 1.5c3.602 0 5.222 3.092 5.222 5.286 0 .088-.005.173-.006.254A6.5 6.5 0 0 0 7 13.443c-1.682-.111-3.11-.43-3.712-1.283-.346-.489-.38-1.091-.101-1.787.651-1.392.635-1.909.605-2.848a21.233 21.233 0 0 1-.015-.739c0-2.194 1.621-5.286 5.224-5.286Zm.32 10.333-.067.177c.02-.06.042-.119.065-.177l.075-.174a4.47 4.47 0 0 0-.074.174Zm4.998-2.759v.002c-.017-.003-.034-.008-.051-.01l.051.008Zm-.344-.05Z"></path><path fill="currentColor" d="M15.065 11.348c.324 0 .587.263.587.587v1.956a.587.587 0 0 0 1.174 0V13.5a3.327 3.327 0 1 0-1.33 2.66.587.587 0 0 1 .704.94 4.5 4.5 0 1 1 1.8-3.6v.391a1.76 1.76 0 0 1-3.05 1.2 2.152 2.152 0 1 1-.386-3.46.586.586 0 0 1 .501-.283ZM12.522 13.5a.978.978 0 1 0 1.956 0 .978.978 0 0 0-1.956 0Z"></path></svg>');
function Hn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Nn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Fn = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path fill="currentColor" d="M7.17 14.288c.03.12.064.238.102.354.213.661.543 1.251.926 1.772a3.964 3.964 0 0 1-2.036-1.164.573.573 0 0 1-.094-.67.654.654 0 0 1 .626-.328c.16.014.32.025.477.036ZM9.002 1.5c3.602 0 5.222 3.092 5.222 5.286 0 .277-.008.517-.015.74-.006.202-.011.384-.01.56-.253.05-.49.126-.706.213a3.832 3.832 0 0 0-.803-.23v.001a5.083 5.083 0 0 0-2.274.149l-.009.003-.01.003c-2.594.808-3.54 3.168-3.364 5.22-1.696-.11-3.138-.427-3.744-1.285-.346-.489-.38-1.091-.101-1.787.651-1.392.635-1.909.605-2.848a21.233 21.233 0 0 1-.015-.739c0-2.194 1.621-5.286 5.224-5.286Z"></path><path fill="currentColor" fill-rule="evenodd" d="M17.758 11.709a2.743 2.743 0 0 0-1.751-1.575 3.024 3.024 0 0 0-1.38-.095c-.423.069-.806.313-1.128.54-.311-.218-.704-.466-1.129-.535a3.083 3.083 0 0 0-1.378.09c-1.768.55-2.312 2.412-1.818 3.893.77 2.377 4.084 3.888 4.225 3.952a.247.247 0 0 0 .2 0c.139-.063 3.404-1.548 4.22-3.95.261-.783.239-1.607-.061-2.32Z" clip-rule="evenodd"></path></svg>');
function Vn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Fn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Zn = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path fill="currentColor" d="M7.048 14.278c.022.184.052.368.09.55v.001a6.5 6.5 0 0 0 .466 1.403 4.044 4.044 0 0 1-1.442-.982.573.573 0 0 1-.094-.67.654.654 0 0 1 .626-.328c.12.01.237.018.354.026Zm3.925 1.383c.052.062.108.12.166.179h-.001a3.253 3.253 0 0 1-.166-.179ZM9 1.5c3.602 0 5.222 3.092 5.222 5.286 0 .088-.005.173-.006.254A6.5 6.5 0 0 0 7 13.443c-1.682-.111-3.11-.43-3.712-1.283-.346-.489-.38-1.091-.101-1.787.651-1.392.635-1.909.605-2.848a21.233 21.233 0 0 1-.015-.739c0-2.194 1.621-5.286 5.224-5.286Zm.32 10.333-.067.177c.02-.06.042-.119.065-.177l.075-.174a4.47 4.47 0 0 0-.074.174Zm4.998-2.759v.002c-.017-.003-.034-.008-.051-.01l.051.008Zm-.344-.05Z"></path><path fill="currentColor" d="M15.065 11.348c.324 0 .587.263.587.587v1.956a.587.587 0 0 0 1.174 0V13.5a3.327 3.327 0 1 0-1.33 2.66.587.587 0 0 1 .704.94 4.5 4.5 0 1 1 1.8-3.6v.391a1.76 1.76 0 0 1-3.05 1.2 2.152 2.152 0 1 1-.386-3.46.586.586 0 0 1 .501-.283ZM12.522 13.5a.978.978 0 1 0 1.956 0 .978.978 0 0 0-1.956 0Z"></path></svg>');
function Wn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Zn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Yn = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path fill="currentColor" d="M6.694 14.252c.453.038.891.066 1.317.084.034.63.168 1.26.406 1.864-.021.07-.043.153-.065.243a3.946 3.946 0 0 1-2.19-1.193.573.573 0 0 1-.094-.67.654.654 0 0 1 .626-.328ZM9.001 1.5c3.602 0 5.222 3.092 5.222 5.286 0 .277-.008.517-.015.74-.005.17-.01.327-.01.477a5.988 5.988 0 0 0-4.44 1.75l-.001.002a6.01 6.01 0 0 0-1.734 3.733c-2.108-.05-4.014-.307-4.735-1.328-.346-.489-.38-1.091-.101-1.787.651-1.392.635-1.909.605-2.848a21.233 21.233 0 0 1-.015-.739c0-2.194 1.621-5.286 5.224-5.286Zm1.963 9.894a3.977 3.977 0 0 0-.004.004l.004-.004Z"></path><path fill="currentColor" fill-rule="evenodd" d="M16.83 11.17a4.008 4.008 0 0 0-5.659 0 4.017 4.017 0 0 0-.805 4.506c.077.192.132.337.132.456 0 .141-.06.316-.117.486-.111.327-.238.698.034.969.27.271.642.143.97.031.167-.057.34-.117.48-.117.122 0 .277.062.455.134a4.019 4.019 0 0 0 4.51-.807 4.007 4.007 0 0 0 0-5.659Z" clip-rule="evenodd"></path></svg>');
function Xn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Yn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Kn = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path fill="currentColor" d="M6.694 14.252C7.151 14.291 7.593 14.318 8.021 14.336 8.121 15.23 8.613 16.004 9.322 16.484 9.215 16.494 9.106 16.5 8.997 16.5H8.995C7.933 16.5 6.927 16.055 6.162 15.25 6.077 15.163 6.023 15.051 6.006 14.931 5.989 14.81 6.011 14.687 6.068 14.58 6.186 14.36 6.439 14.233 6.694 14.252ZM9.001 1.5C12.603 1.5 14.223 4.592 14.223 6.786 14.223 7.063 14.216 7.303 14.208 7.525 14.203 7.697 14.199 7.855 14.198 8.007 14.133 8.003 14.067 8 14 8 12.343 8 11 9.343 11 11 9.517 11 8.287 12.076 8.045 13.489 5.928 13.44 4.012 13.185 3.288 12.16 2.942 11.671 2.908 11.069 3.187 10.373 3.838 8.981 3.822 8.464 3.792 7.525 3.784 7.303 3.777 7.062 3.777 6.786 3.777 4.592 5.398 1.5 9.001 1.5ZM13 11C13 10.448 13.448 10 14 10 14.552 10 15 10.448 15 11V17C15 17.552 14.552 18 14 18 13.448 18 13 17.552 13 17V11Z"></path><path fill="currentColor" d="M11 15C10.4477 15 10 14.5523 10 14C10 13.4477 10.4477 13 11 13H17C17.5523 13 18 13.4477 18 14C18 14.5523 17.5523 15 17 15H11Z"></path></svg>');
function Gn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Kn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
var Qn = Ee('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18"><path fill="currentColor" d="M6.694 14.252c.479.04.941.069 1.389.087a4.72 4.72 0 0 0 .067 2.063 3.968 3.968 0 0 1-1.988-1.152.573.573 0 0 1-.094-.67.654.654 0 0 1 .626-.328ZM9.001 1.5c3.269 0 4.905 2.546 5.18 4.657-1.042.362-1.842 1.336-1.842 2.559v1.764c-1.79.208-3.352 1.368-4.009 3.012-2.228-.033-4.286-.261-5.042-1.332-.346-.489-.38-1.091-.101-1.787.651-1.392.635-1.909.605-2.848a21.233 21.233 0 0 1-.015-.739c0-2.194 1.621-5.286 5.224-5.286Zm3.919 10.944a2.894 2.894 0 0 1 .191.007l-.191-.007Z"></path><path fill="currentColor" fill-rule="evenodd" d="M15.835 15.172c0-.01.006-.018.006-.028v-4.477a3.56 3.56 0 0 0 1.259.5c.404.077.801-.17.885-.556.083-.387-.18-.764-.586-.842-1.136-.22-1.591-1.27-1.608-1.31a.756.756 0 0 0-.838-.446.725.725 0 0 0-.614.703v4.094a2.99 2.99 0 0 0-1.42-.365c-1.61 0-2.919 1.246-2.919 2.778C10 16.754 11.31 18 12.92 18c1.61 0 2.92-1.245 2.92-2.777 0-.018-.005-.033-.005-.051Z" clip-rule="evenodd"></path></svg>');
function Jn(n, t) {
    let r = ue(t, "size", 8, 18);
    var s = Qn();
    D( () => {
        V(s, "width", r()),
        V(s, "height", r())
    }
    ),
    v(n, s)
}
const Ot = {
    async getFeed(n={}) {
        const t = {
            limit: n.limit || 20,
            tab: n.tab || "popular"
        };
        n.cursor && (t.cursor = n.cursor);
        const r = await Ae.get(Ie.posts.list, t);
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data
        }
    },
    async getPost(n) {
        const t = await Ae.get(Ie.posts.single(n));
        return t.error ? {
            error: t.error.message
        } : {
            data: t.data
        }
    },
    async getUserPosts(n, t={}) {
        const r = {
            limit: t.limit || 20,
            sort: t.sort || "new"
        };
        t.cursor && (r.cursor = t.cursor),
        t.pinnedPostId && (r.pinnedPostId = t.pinnedPostId);
        const s = await Ae.get(Ie.posts.byUser(n), r);
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    },
    async getLikedPosts(n, t={}) {
        const r = {
            limit: t.limit || 20
        };
        t.cursor && (r.cursor = t.cursor);
        const s = await Ae.get(Ie.posts.likedByUser(n), r);
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    },
    async getWallPosts(n, t={}) {
        const r = {
            limit: t.limit || 20
        };
        t.cursor && (r.cursor = t.cursor);
        const s = await Ae.get(Ie.posts.wallByUser(n), r);
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    },
    async createPost(n) {
        const t = await Ae.post(Ie.posts.create, n);
        return t.error ? {
            error: t.error.message
        } : {
            data: t.data
        }
    },
    async updatePost(n, t) {
        const r = await Ae.put(Ie.posts.update(n), {
            content: t
        });
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data
        }
    },
    async deletePost(n) {
        const t = await Ae.delete(Ie.posts.delete(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async restorePost(n) {
        const t = await Ae.post(Ie.posts.restore(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async likePost(n, t) {
        const r = await Ae.post(Ie.posts.like(n), void 0, {
            signal: t
        });
        return r.error ? {
            success: !1,
            error: r.error.message
        } : {
            success: !0
        }
    },
    async unlikePost(n, t) {
        const r = await Ae.delete(Ie.posts.like(n), {
            signal: t
        });
        return r.error ? {
            success: !1,
            error: r.error.message
        } : {
            success: !0
        }
    },
    async repostPost(n, t) {
        const r = await Ae.post(Ie.posts.repost(n), {
            content: t
        });
        return r.error ? {
            success: !1,
            error: r.error.message
        } : {
            success: !0,
            data: r.data
        }
    },
    async unrepostPost(n) {
        const t = await Ae.delete(Ie.posts.repost(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    _viewedPosts: new Set,
    _MAX_VIEWED_POSTS: 5e3,
    async recordView(n) {
        if (!this._viewedPosts.has(n)) {
            if (this._viewedPosts.size >= this._MAX_VIEWED_POSTS) {
                const t = this._viewedPosts.values();
                for (let r = 0; r < 200; r++) {
                    const s = t.next().value;
                    s && this._viewedPosts.delete(s)
                }
            }
            this._viewedPosts.add(n),
            Ae.post(Ie.posts.view(n)).catch( () => {}
            )
        }
    },
    isViewed(n) {
        return this._viewedPosts.has(n)
    },
    async pinPost(n) {
        const t = await Ae.post(Ie.posts.pin(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0,
            pinnedPostId: t.data?.pinnedPostId
        }
    },
    async unpinPost(n) {
        const t = await Ae.delete(Ie.posts.pin(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    }
}
  , _a = {
    async getProfile(n) {
        const t = await Ae.get(Ie.users.profile(n));
        return t.error ? {
            error: t.error.message
        } : {
            data: t.data
        }
    },
    async updateProfile(n) {
        const t = await Ae.put(Ie.users.updateProfile, n);
        return t.error ? {
            error: t.error.message
        } : (t.data && as.setUser(t.data),
        {
            data: t.data
        })
    },
    async changePassword(n) {
        const t = await _n.post(Ie.auth.changePassword, n);
        return t.error ? {
            success: !1,
            error: t.error.message,
            errorCode: t.error.code
        } : {
            success: !0
        }
    },
    async follow(n) {
        const t = await Ae.post(Ie.users.follow(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async unfollow(n) {
        const t = await Ae.delete(Ie.users.follow(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async getFollowers(n, t=1, r=20) {
        const s = await Ae.get(Ie.users.followers(n), {
            page: t,
            limit: r
        });
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    },
    async getFollowing(n, t=1, r=20) {
        const s = await Ae.get(Ie.users.following(n), {
            page: t,
            limit: r
        });
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    },
    async getWhoToFollow() {
        const n = await Ae.get(Ie.users.whoToFollow);
        return n.error ? {
            error: n.error.message
        } : {
            data: n.data?.users
        }
    },
    async getTopClans() {
        const n = await Ae.get(Ie.users.topClans);
        return n.error ? {
            error: n.error.message
        } : {
            data: n.data?.clans
        }
    },
    async searchUsers(n, t=10) {
        const r = await Ae.get(Ie.users.search, {
            q: n,
            limit: t
        });
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data?.data?.users
        }
    },
    async getPrivacySettings() {
        const n = await Ae.get(Ie.users.privacy);
        return n.error ? {
            error: n.error.message
        } : {
            data: n.data
        }
    },
    async updatePrivacySettings(n) {
        const t = await Ae.put(Ie.users.privacy, n);
        return t.error ? {
            error: t.error.message
        } : {
            data: t.data
        }
    },
    async getMyPins() {
        const n = await Ae.get(Ie.users.pins);
        if (n.error)
            return {
                error: n.error.message
            };
        const t = n.data?.activePin || null;
        return {
            data: (n.data?.pins || []).map(s => ({
                slug: s.slug,
                name: s.name,
                description: s.description,
                isActive: s.slug === t
            }))
        }
    },
    async setActivePin(n) {
        const t = await Ae.put(Ie.users.setPin, {
            slug: n
        });
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async removeActivePin() {
        const n = await Ae.delete(Ie.users.setPin);
        return n.error ? {
            success: !1,
            error: n.error.message
        } : {
            success: !0
        }
    },
    async blockUser(n) {
        const t = await Ae.post(Ie.users.block(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async unblockUser(n) {
        const t = await Ae.delete(Ie.users.block(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async getBlockedUsers(n=1, t=20) {
        const r = await Ae.get(Ie.users.blocked, {
            page: n,
            limit: t
        });
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data
        }
    }
}
  , pa = {
    async getPostComments(n, t=20, r="popular", s, d) {
        const _ = {
            limit: t,
            sort: r
        };
        s && (_.cursor = s);
        const l = await Ae.get(Ie.posts.comments(n), _, {
            signal: d
        });
        return l.error ? {
            error: l.error.message
        } : {
            data: l.data
        }
    },
    async createComment(n, t) {
        const r = await Ae.post(Ie.posts.comments(n), t);
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data
        }
    },
    async deleteComment(n) {
        const t = await Ae.delete(Ie.comments.delete(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async restoreComment(n) {
        const t = await Ae.post(Ie.comments.restore(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async likeComment(n) {
        const t = await Ae.post(Ie.comments.like(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async unlikeComment(n) {
        const t = await Ae.delete(Ie.comments.like(n));
        return t.error ? {
            success: !1,
            error: t.error.message
        } : {
            success: !0
        }
    },
    async getReplies(n, t=1, r=10, s="popular") {
        const d = await Ae.get(Ie.comments.replies(n), {
            page: t,
            limit: r,
            sort: s
        });
        return d.error ? {
            error: d.error.message
        } : {
            data: d.data
        }
    },
    async createReply(n, t) {
        const r = await Ae.post(Ie.comments.replies(n), t);
        return r.error ? {
            error: r.error.message
        } : {
            data: r.data
        }
    }
};
function Xa() {
    const n = {}
      , t = as.getAccessToken();
    return t && (n.Authorization = `Bearer ${t}`),
    n
}
const ma = {
    async uploadFile(n) {
        const t = new FormData;
        t.append("file", n);
        try {
            let r = await fetch(`${Ya}${Ie.files.upload}`, {
                method: "POST",
                credentials: "include",
                headers: Xa(),
                body: t
            });
            if (r.status === 401 && await xs()) {
                const _ = new FormData;
                _.append("file", n),
                r = await fetch(`${Ya}${Ie.files.upload}`, {
                    method: "POST",
                    credentials: "include",
                    headers: Xa(),
                    body: _
                })
            }
            const s = await r.json().catch( () => null);
            return r.ok ? {
                data: s
            } : {
                error: s?.error?.message || "Failed to upload file",
                errorCode: s?.error?.code
            }
        } catch {
            return {
                error: "Network error during upload"
            }
        }
    },
    async deleteFile(n) {
        try {
            let t = await fetch(`${Ya}${Ie.files.delete(n)}`, {
                method: "DELETE",
                credentials: "include",
                headers: Xa()
            });
            return t.status === 401 && await xs() && (t = await fetch(`${Ya}${Ie.files.delete(n)}`, {
                method: "DELETE",
                credentials: "include",
                headers: Xa()
            })),
            t.ok ? {
                success: !0
            } : {
                success: !1,
                error: (await t.json().catch( () => null))?.error?.message || "Failed to delete file"
            }
        } catch {
            return {
                success: !1,
                error: "Network error"
            }
        }
    }
}
  , Fs = ta(!1)
  , Vs = new Map;
function Dc(n) {
    let t = window.scrollY;
    document.body.style.position === "fixed" && (t = Math.abs(parseInt(document.body.style.top || "0", 10))),
    Vs.set(n, t)
}
function Rc(n) {
    return Vs.get(n) ?? 0
}
const $n = ta(0);
function Zs() {
    $n.update(n => n + 1)
}
function Sa(n, t, r, s) {
    const d = n % 10
      , _ = n % 100;
    return _ >= 11 && _ <= 14 ? s : d === 1 ? t : d >= 2 && d <= 4 ? r : s
}
function er(n) {
    const t = new Date
      , r = t.getTime() - n.getTime()
      , s = Math.floor(r / 1e3)
      , d = Math.floor(s / 60)
      , _ = Math.floor(d / 60)
      , l = Math.floor(_ / 24)
      , u = Math.floor(l / 7)
      , f = Math.floor(l / 30)
      , b = Math.floor(l / 365);
    if (s < 60)
        return {
            text: " ",
            nextUpdateMs: (60 - s) * 1e3
        };
    if (d < 60) {
        const y = (60 - s % 60) * 1e3;
        if (d === 1)
            return {
                text: " ",
                nextUpdateMs: y
            };
        const j = Sa(d, "", "", "");
        return {
            text: `${d} ${j} `,
            nextUpdateMs: y
        }
    }
    if (_ < 24) {
        const w = d % 60
          , y = s % 60
          , j = ((60 - w - 1) * 60 + (60 - y)) * 1e3;
        if (_ === 1)
            return {
                text: " ",
                nextUpdateMs: j
            };
        const q = Sa(_, "", "", "");
        return {
            text: `${_} ${q} `,
            nextUpdateMs: j
        }
    }
    if (l < 7) {
        const w = new Date(t);
        w.setDate(w.getDate() + 1),
        w.setHours(0, 0, 0, 0);
        const y = w.getTime() - t.getTime();
        if (l === 1)
            return {
                text: "",
                nextUpdateMs: y
            };
        const j = Sa(l, "", "", "");
        return {
            text: `${l} ${j} `,
            nextUpdateMs: y
        }
    }
    if (u < 4) {
        const w = new Date(t);
        w.setDate(w.getDate() + 1),
        w.setHours(0, 0, 0, 0);
        const y = w.getTime() - t.getTime();
        if (u === 1)
            return {
                text: " ",
                nextUpdateMs: y
            };
        const j = Sa(u, "", "", "");
        return {
            text: `${u} ${j} `,
            nextUpdateMs: y
        }
    }
    if (f < 12) {
        const w = new Date(t);
        w.setDate(w.getDate() + 1),
        w.setHours(0, 0, 0, 0);
        const y = w.getTime() - t.getTime();
        if (f === 1)
            return {
                text: " ",
                nextUpdateMs: y
            };
        const j = Sa(f, "", "", "");
        return {
            text: `${f} ${j} `,
            nextUpdateMs: y
        }
    }
    const x = new Date(t);
    x.setDate(x.getDate() + 1),
    x.setHours(0, 0, 0, 0);
    const C = x.getTime() - t.getTime();
    if (b === 1)
        return {
            text: " ",
            nextUpdateMs: C
        };
    const h = Sa(b, "", "", "");
    return {
        text: `${b} ${h} `,
        nextUpdateMs: C
    }
}
function ha(n) {
    return n == null ? "0" : n >= 1e6 ? `${(n / 1e6).toFixed(1)}M` : n >= 1e3 ? `${(n / 1e3).toFixed(1)}K` : n.toString()
}
function rs(n, t) {
    const r = s => {
        n && !n.contains(s.target) && !s.defaultPrevented && t()
    }
    ;
    return setTimeout( () => {
        document.addEventListener("click", r, !0)
    }
    , 0),
    {
        update(s) {
            t = s
        },
        destroy() {
            document.removeEventListener("click", r, !0)
        }
    }
}
function tr(n) {
    return {
        id: n.id,
        author: n.author.displayName,
        authorId: n.author.id,
        username: n.author.username || null,
        avatar: n.author.avatar || "",
        verified: n.author.verified,
        content: n.content,
        time: n.createdAt,
        createdAt: n.createdAt,
        likes: n.likesCount,
        isLiked: n.isLiked,
        replyTo: n.replyTo || null,
        attachments: n.attachments?.map(t => ({
            id: t.id,
            type: t.type,
            url: t.url,
            thumbnailUrl: t.thumbnailUrl || void 0,
            width: t.width || void 0,
            height: t.height || void 0,
            duration: t.duration || void 0
        }))
    }
}
function ar(n) {
    return {
        id: n.id,
        author: n.author.displayName,
        authorId: n.author.id,
        username: n.author.username || null,
        avatar: n.author.avatar || "",
        verified: n.author.verified,
        content: n.content,
        time: n.createdAt,
        createdAt: n.createdAt,
        likes: n.likesCount,
        isLiked: n.isLiked,
        repliesCount: n.repliesCount,
        replies: n.replies?.map(tr) || [],
        attachments: n.attachments?.map(t => ({
            id: t.id,
            type: t.type,
            url: t.url,
            thumbnailUrl: t.thumbnailUrl || void 0,
            width: t.width || void 0,
            height: t.height || void 0,
            duration: t.duration || void 0
        }))
    }
}
function wa() {
    return Gt(gs) ? !0 : (Ma("/login"),
    !1)
}
var sr = p('<span class="notification-badge svelte-13vg9xt"> </span>')
  , nr = p('<div class="sidebar-menu svelte-13vg9xt" role="menu" tabindex="-1"><button class="sidebar-menu-item svelte-13vg9xt"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span></span></button> <button class="sidebar-menu-item danger svelte-13vg9xt"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg> <span></span></button></div>')
  , rr = p('<div class="sidebar-desktop svelte-13vg9xt"><div class="sidebar-top svelte-13vg9xt"><a href="/feed" class="sidebar-logo svelte-13vg9xt" aria-label=" "><svg xmlns="http://www.w3.org/2000/svg" width="36" height="18" fill="none" viewBox="0 0 36 18"><path fill="currentColor" d="m3 9 6-9h3v14H9V5l-6 9H0V0h3zM12 3V0h12v3h-4v11h-4V3z"></path><path fill="currentColor" d="M21 11h3v7h-3zM33 11h3v7h-3zM24 11.091h9v3h-9z"></path><path fill="currentColor" d="M31 0h3v11.09h-3zM24 0h3v11.34s-8.167 1.688-5.444 0S23.667 4.773 24 0"></path><path fill="currentColor" d="M27 0h7l-3 3.09h-4z"></path></svg></a> <div class="sidebar-pill svelte-13vg9xt"><nav class="sidebar-nav svelte-13vg9xt"><a href="/feed"><!></a> <a href="/explore"><!></a> <a><!> <!></a> <a><!></a></nav></div></div> <div class="sidebar-avatar-wrapper svelte-13vg9xt"><button class="sidebar-avatar svelte-13vg9xt" aria-label=" "><!></button> <!></div></div> <!>', 1);
function Ac(n, t) {
    Qe(t, !0);
    const r = () => bt(ss, "$page", l)
      , s = () => bt(za, "$currentUser", l)
      , d = () => bt(gs, "$isAuthenticated", l)
      , _ = () => bt(Ds, "$unreadCount", l)
      , [l,u] = aa();
    let f = k(!1)
      , b = k(!1);
    const x = new Set(["/", "/feed", "/explore", "/notifications", "/login", "/register"]);
    let C = K( () => ( () => {
        const A = r().url.pathname;
        if (A === "/feed")
            return "feed";
        if (A === "/explore")
            return "explore";
        if (A === "/notifications")
            return "notifications";
        if (A === "/login" || A === "/register")
            return "none";
        const M = s()?.username || s()?.id;
        return M && A === `/${M}` ? "profile" : (!x.has(A) && A.match(/^\/[^/]+$/),
        "none")
    }
    )())
      , h = K( () => s()?.username ? `/${s().username}` : s()?.id ? `/${s().id}` : "/feed");
    function w() {
        a(f, !e(f))
    }
    function y() {
        a(f, !1)
    }
    async function j() {
        a(f, !1),
        await Rs.logout(),
        as.logout(),
        Ma("/login")
    }
    var q = rr()
      , R = we(q)
      , L = i(R)
      , N = c(i(L), 2)
      , H = i(N)
      , ee = i(H);
    let te;
    ee.__click = A => {
        r().url.pathname === "/feed" && (A.preventDefault(),
        Zs())
    }
    ;
    var W = i(ee);
    Us(W, {}),
    o(ee);
    var Y = c(ee, 2);
    let de;
    var ce = i(Y);
    Bs(ce, {}),
    o(Y);
    var se = c(Y, 2);
    let G;
    var B = i(se);
    {
        var I = A => {
            var M = sr()
              , T = i(M, !0);
            o(M),
            D( () => re(T, _() > 99 ? "99+" : _())),
            v(A, M)
        }
        ;
        P(B, A => {
            _() > 0 && A(I)
        }
        )
    }
    var U = c(B, 2);
    Os(U, {}),
    o(se);
    var Z = c(se, 2);
    let X;
    var me = i(Z);
    xn(me, {}),
    o(Z),
    o(H),
    o(N),
    o(L);
    var pe = c(L, 2)
      , ze = i(pe);
    ze.__click = A => {
        if (A.stopPropagation(),
        !d()) {
            Ma("/login");
            return
        }
        w()
    }
    ;
    var fe = i(ze);
    {
        let A = K( () => s()?.avatar)
          , M = K( () => s()?.displayName);
        ea(fe, {
            get avatar() {
                return e(A)
            },
            get name() {
                return e(M)
            },
            size: 40
        })
    }
    o(ze);
    var Q = c(ze, 2);
    {
        var F = A => {
            var M = nr();
            M.__click = m => m.stopPropagation();
            var T = i(M);
            T.__click = () => {
                a(f, !1),
                a(b, !0)
            }
            ;
            var g = c(T, 2);
            g.__click = j,
            o(M),
            qa(M, (m, z) => rs?.(m, z), () => y),
            v(A, M)
        }
        ;
        P(Q, A => {
            e(f) && A(F)
        }
        )
    }
    o(pe),
    o(R);
    var J = c(R, 2);
    Wi(J, {
        get isOpen() {
            return e(b)
        },
        onClose: () => a(b, !1)
    }),
    D( () => {
        te = he(ee, 1, "sidebar-nav-item svelte-13vg9xt", null, te, {
            active: e(C) === "feed"
        }),
        de = he(Y, 1, "sidebar-nav-item svelte-13vg9xt", null, de, {
            active: e(C) === "explore"
        }),
        V(se, "href", d() ? "/notifications" : "/login"),
        G = he(se, 1, "sidebar-nav-item svelte-13vg9xt", null, G, {
            active: e(C) === "notifications"
        }),
        V(Z, "href", d() ? e(h) : "/login"),
        X = he(Z, 1, "sidebar-nav-item svelte-13vg9xt", null, X, {
            active: e(C) === "profile"
        })
    }
    ),
    v(n, q),
    Je(),
    u()
}
it(["click"]);
var or = p('<div class="mobile-nav-slider svelte-16uf3bx"></div>')
  , ir = p('<span class="notification-badge mobile svelte-16uf3bx"> </span>')
  , lr = p('<div class="sidebar-mobile svelte-16uf3bx"><nav class="mobile-nav svelte-16uf3bx"><!> <a href="/feed"><!> <span class="mobile-nav-label svelte-16uf3bx"></span></a> <a href="/explore"><!> <span class="mobile-nav-label svelte-16uf3bx"></span></a> <a href="/notifications"><!> <!> <span class="mobile-nav-label svelte-16uf3bx"></span></a> <a><!> <span class="mobile-nav-label svelte-16uf3bx"></span></a></nav></div>');
function Lc(n, t) {
    Qe(t, !0);
    const r = () => bt(ss, "$page", _)
      , s = () => bt(za, "$currentUser", _)
      , d = () => bt(Ds, "$unreadCount", _)
      , [_,l] = aa()
      , u = new Set(["/", "/feed", "/explore", "/notifications", "/login", "/register"]);
    let f = K( () => ( () => {
        const B = r().url.pathname;
        if (B === "/feed")
            return "feed";
        if (B === "/explore")
            return "explore";
        if (B === "/notifications")
            return "notifications";
        if (B === "/login" || B === "/register")
            return "none";
        const I = s()?.username || s()?.id;
        return I && B === `/${I}` ? "profile" : (!u.has(B) && B.match(/^\/[^/]+$/),
        "none")
    }
    )())
      , b = K( () => ( () => {
        switch (e(f)) {
        case "feed":
            return 0;
        case "explore":
            return 1;
        case "notifications":
            return 2;
        case "profile":
            return 3;
        default:
            return -1
        }
    }
    )())
      , x = K( () => s()?.username ? `/${s().username}` : s()?.id ? `/${s().id}` : "/feed");
    var C = lr()
      , h = i(C)
      , w = i(h);
    {
        var y = B => {
            var I = or();
            D( () => At(I, `transform: translateX(${e(b) * 100}%)`)),
            v(B, I)
        }
        ;
        P(w, B => {
            e(b) >= 0 && B(y)
        }
        )
    }
    var j = c(w, 2);
    let q;
    j.__click = B => {
        r().url.pathname === "/feed" && (B.preventDefault(),
        Zs())
    }
    ;
    var R = i(j);
    Us(R, {}),
    _t(2),
    o(j);
    var L = c(j, 2);
    let N;
    var H = i(L);
    Bs(H, {}),
    _t(2),
    o(L);
    var ee = c(L, 2);
    let te;
    var W = i(ee);
    {
        var Y = B => {
            var I = ir()
              , U = i(I, !0);
            o(I),
            D( () => re(U, d() > 99 ? "99+" : d())),
            v(B, I)
        }
        ;
        P(W, B => {
            d() > 0 && B(Y)
        }
        )
    }
    var de = c(W, 2);
    Os(de, {}),
    _t(2),
    o(ee);
    var ce = c(ee, 2);
    let se;
    var G = i(ce);
    {
        let B = K( () => s()?.avatar)
          , I = K( () => s()?.displayName);
        ea(G, {
            get avatar() {
                return e(B)
            },
            get name() {
                return e(I)
            },
            size: 24
        })
    }
    _t(2),
    o(ce),
    o(h),
    o(C),
    D( () => {
        q = he(j, 1, "mobile-nav-item svelte-16uf3bx", null, q, {
            active: e(f) === "feed"
        }),
        N = he(L, 1, "mobile-nav-item svelte-16uf3bx", null, N, {
            active: e(f) === "explore"
        }),
        te = he(ee, 1, "mobile-nav-item svelte-16uf3bx", null, te, {
            active: e(f) === "notifications"
        }),
        V(ce, "href", e(x)),
        se = he(ce, 1, "mobile-nav-item svelte-16uf3bx", null, se, {
            active: e(f) === "profile"
        })
    }
    ),
    v(n, C),
    Je(),
    l()
}
it(["click"]);
const Ps = {
    async search(n, t=10) {
        const r = {
            limit: t
        };
        n && (r.q = n);
        const s = await Ae.get(Ie.hashtags.search, r);
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    },
    async getTrending(n=10) {
        const t = await Ae.get(Ie.hashtags.trending, {
            limit: n
        });
        return t.error ? {
            error: t.error.message
        } : {
            data: t.data
        }
    },
    async getPostsByHashtag(n, t={}) {
        const r = {
            limit: t.limit || 20
        };
        t.cursor && (r.cursor = t.cursor);
        const s = await Ae.get(Ie.hashtags.posts(n), r);
        return s.error ? {
            error: s.error.message
        } : {
            data: s.data
        }
    }
};
function cr() {
    const {subscribe: n, update: t} = ta([]);
    return {
        subscribe: n,
        show(r, s=5e3) {
            const d = crypto.randomUUID();
            return t(_ => [..._, {
                id: d,
                message: r,
                duration: s
            }]),
            s > 0 && setTimeout( () => {
                this.dismiss(d)
            }
            , s),
            d
        },
        dismiss(r) {
            t(s => s.filter(d => d.id !== r))
        },
        clear() {
            t( () => [])
        }
    }
}
const ra = cr()
  , ga = ta(new Map)
  , Bt = {
    subscribe: ga.subscribe,
    set(n, t) {
        ga.update(r => (r.set(n, t),
        new Map(r)))
    },
    get(n) {
        return Gt(ga).get(n)
    },
    toggleLike(n, t) {
        ga.update(r => {
            const s = r.get(n);
            if (s) {
                const d = s.isLiked
                  , _ = t ? d ? 0 : 1 : d ? -1 : 0;
                r.set(n, {
                    ...s,
                    isLiked: t,
                    likesCount: s.likesCount + _
                })
            }
            return new Map(r)
        }
        )
    },
    toggleRepost(n, t) {
        ga.update(r => {
            const s = r.get(n);
            if (s) {
                const d = s.isReposted
                  , _ = t ? d ? 0 : 1 : d ? -1 : 0;
                r.set(n, {
                    ...s,
                    isReposted: t,
                    repostsCount: s.repostsCount + _
                })
            }
            return new Map(r)
        }
        )
    },
    incrementComments(n) {
        ga.update(t => {
            const r = t.get(n);
            return r && t.set(n, {
                ...r,
                commentsCount: r.commentsCount + 1
            }),
            new Map(t)
        }
        )
    },
    decrementComments(n) {
        ga.update(t => {
            const r = t.get(n);
            return r && t.set(n, {
                ...r,
                commentsCount: Math.max(0, r.commentsCount - 1)
            }),
            new Map(t)
        }
        )
    },
    getPostStore(n) {
        return Ts(ga, t => t.get(n))
    },
    clear() {
        ga.set(new Map)
    }
}
  , es = "nowkie_theme";
function Ws() {
    return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"
}
function Ms() {
    const n = localStorage.getItem(es);
    return n === "dark" || n === "light" || n === "system" ? n : "system"
}
function Ba(n) {
    return n === "system" ? Ws() : n
}
function Ka(n) {
    document.documentElement.setAttribute("data-theme", n)
}
function dr() {
    const n = ta(Ms());
    return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
        const t = localStorage.getItem(es);
        (!t || t === "system") && (Ka(Ws()),
        n.set("system"))
    }
    ),
    {
        subscribe: Ts(n, t => Ba(t)).subscribe,
        preference: {
            subscribe: n.subscribe
        },
        setPreference: t => {
            localStorage.setItem(es, t),
            n.set(t),
            Ka(Ba(t))
        }
        ,
        toggle: () => {
            n.update(t => {
                const s = Ba(t) === "light" ? "dark" : "light";
                return localStorage.setItem(es, s),
                Ka(Ba(s)),
                s
            }
            )
        }
        ,
        init: () => {
            {
                const t = Ms();
                n.set(t),
                Ka(Ba(t))
            }
        }
    }
}
const vr = dr()
  , ts = "nowkie_snow_enabled";
function js() {
    return localStorage.getItem(ts) === "true"
}
function ur() {
    const {subscribe: n, set: t} = ta(js());
    return {
        subscribe: n,
        set: r => {
            localStorage.setItem(ts, String(r)),
            t(r)
        }
        ,
        toggle: () => {
            {
                const d = !(localStorage.getItem(ts) === "true");
                localStorage.setItem(ts, String(d)),
                t(d)
            }
        }
        ,
        init: () => {
            {
                const r = js();
                t(r)
            }
        }
    }
}
const qs = ur();
function fr() {
    const {subscribe: n, set: t, update: r} = ta({
        isOpen: !1,
        postId: null
    });
    return {
        subscribe: n,
        open: s => {
            t({
                isOpen: !0,
                postId: s
            })
        }
        ,
        close: () => {
            t({
                isOpen: !1,
                postId: null
            })
        }
    }
}
const _r = fr();
var gr = p('<div class="create-post__error svelte-1qnpi43"> </div>')
  , pr = p('<div class="upload-overlay svelte-1qnpi43"><svg class="spinner svelte-1qnpi43" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg></div>')
  , hr = p('<div class="upload-error-overlay svelte-1qnpi43"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></div>')
  , mr = p('<button class="create-post__edit-drawing-btn svelte-1qnpi43" title=" "><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"></path><path d="M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"></path></svg></button>')
  , wr = p('<div><img alt=""/> <!> <!> <button class="create-post__remove-media-btn svelte-1qnpi43"><!></button></div>')
  , br = p("<div></div>")
  , kr = p('<span class="create-post__counter svelte-1qnpi43"> </span>')
  , yr = p('<div class="create-post svelte-1qnpi43"><!> <div class="create-post__inner svelte-1qnpi43"><div class="create-post__avatar svelte-1qnpi43"><!></div> <div class="create-post__content svelte-1qnpi43"><textarea placeholder=" ?" class="create-post__textarea svelte-1qnpi43"></textarea> <!> <!></div></div> <div class="create-post__toolbar svelte-1qnpi43"><div class="create-post__attach svelte-1qnpi43"><input type="file" class="create-post__file-input svelte-1qnpi43" accept="image/*" multiple/> <button class="create-post__attach-btn svelte-1qnpi43" title=" "><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg></button> <button class="create-post__attach-btn svelte-1qnpi43" title=""><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"></circle><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"></circle><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"></circle><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"></circle><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"></path></svg></button> <!></div> <button class="create-post__submit svelte-1qnpi43"> </button></div></div>')
  , xr = p("<!> <!>", 1);
function Uc(n, t) {
    Qe(t, !0);
    const r = () => bt(Fs, "$isMobile", d)
      , s = () => bt(za, "$currentUser", d)
      , [d,_] = aa()
      , l = 10;
    let u = k(""), f = k(pt([])), b, x, C = k(!1), h = k(""), w = k(!1), y = k(""), j = k(pt({
        top: 0,
        left: 0
    })), q = k(0), R = k(!1), L = k(null), N = k(void 0), H = K( () => e(f).some(M => M.isUploading)), ee = K( () => e(f).filter(M => M.uploaded).map(M => M.uploaded)), te = K( () => !e(u).trim() && e(ee).length === 0 || e(C) || e(H)), W = K( () => e(f).length < l);
    function Y(M) {
        const T = M.target;
        a(u, T.value, !0),
        T.style.height = "auto",
        T.style.height = `${Math.min(T.scrollHeight, 200)}px`,
        ce(T)
    }
    function de(M) {
        const T = M.clipboardData?.items;
        if (!T)
            return;
        const g = l - e(f).length;
        if (g <= 0)
            return;
        const m = [];
        for (let z = 0; z < T.length && m.length < g; z++) {
            const S = T[z];
            if (S.type.startsWith("image/")) {
                const O = S.getAsFile();
                O && m.push(O)
            }
        }
        if (m.length !== 0) {
            M.preventDefault();
            for (const z of m) {
                const S = crypto.randomUUID()
                  , O = new FileReader;
                O.onload = ie => {
                    const ge = ie.target?.result
                      , ve = {
                        id: S,
                        preview: ge,
                        file: z,
                        isUploading: !0
                    };
                    a(f, [...e(f), ve], !0),
                    I(S, z)
                }
                ,
                O.readAsDataURL(z)
            }
        }
    }
    function ce(M) {
        const T = M.selectionStart
          , g = e(u).slice(0, T)
          , m = g.match(/#([a-zA-Z--0-9_]*)$/);
        if (m) {
            a(q, T - m[0].length),
            a(y, m[1], !0);
            const z = parseInt(getComputedStyle(M).lineHeight) || 22
              , O = g.split(`
`).length - 1;
            a(j, {
                top: (O + 1) * z + 4,
                left: 0
            }, !0),
            a(w, !0)
        } else
            a(w, !1),
            a(y, "")
    }
    function se(M) {
        const T = e(u).slice(0, e(q))
          , g = e(u).slice(x.selectionStart);
        a(u, T + "#" + M.name + " " + g),
        a(w, !1),
        a(y, ""),
        setTimeout( () => {
            x?.focus();
            const m = e(q) + M.name.length + 2;
            x.setSelectionRange(m, m)
        }
        , 0)
    }
    function G() {
        a(w, !1),
        a(y, "")
    }
    async function B(M) {
        const g = M.target.files;
        if (!g || g.length === 0)
            return;
        const m = l - e(f).length
          , z = Array.from(g).slice(0, m);
        for (const S of z) {
            const O = crypto.randomUUID()
              , ie = new FileReader;
            ie.onload = ge => {
                const ve = ge.target?.result
                  , be = {
                    id: O,
                    preview: ve,
                    file: S,
                    isUploading: !0
                };
                a(f, [...e(f), be], !0),
                I(O, S)
            }
            ,
            ie.readAsDataURL(S)
        }
        b && (b.value = "")
    }
    async function I(M, T) {
        const g = await ma.uploadFile(T);
        a(f, e(f).map(m => {
            if (m.id === M) {
                if (g.error)
                    return ra.show(g.error),
                    {
                        ...m,
                        isUploading: !1,
                        error: g.error
                    };
                if (g.data)
                    return {
                        ...m,
                        isUploading: !1,
                        uploaded: g.data
                    }
            }
            return m
        }
        ), !0)
    }
    async function U(M) {
        const T = e(f).find(g => g.id === M);
        T?.uploaded && await ma.deleteFile(T.uploaded.id),
        a(f, e(f).filter(g => g.id !== M), !0)
    }
    function Z(M) {
        M.key === "Enter" && !M.shiftKey && !("ontouchstart"in window) && (M.preventDefault(),
        X())
    }
    async function X() {
        if (!e(u).trim() && e(ee).length === 0)
            return;
        a(C, !0),
        a(h, "");
        const M = e(ee).length > 0 ? e(ee).map(g => g.id) : void 0
          , T = await Ot.createPost({
            content: e(u),
            attachmentIds: M
        });
        T.error ? (a(h, T.error, !0),
        ra.show(T.error)) : T.data && (a(u, ""),
        a(f, [], !0),
        x && (x.style.height = "auto"),
        t.onPostCreated?.(T.data)),
        a(C, !1)
    }
    function me() {
        a(L, null),
        a(N, void 0),
        a(R, !0)
    }
    function pe(M) {
        M.isDrawing && (a(L, M.id, !0),
        a(N, M.preview, !0),
        a(R, !0))
    }
    function ze() {
        a(R, !1),
        a(L, null),
        a(N, void 0)
    }
    async function fe(M, T) {
        const g = e(L) || crypto.randomUUID()
          , m = new File([M],`drawing-${g}.png`,{
            type: "image/png"
        });
        if (e(L)) {
            const z = e(f).find(S => S.id === e(L));
            z?.uploaded && await ma.deleteFile(z.uploaded.id),
            a(f, e(f).map(S => S.id === e(L) ? {
                ...S,
                preview: T,
                file: m,
                isUploading: !0,
                uploaded: void 0
            } : S), !0),
            I(e(L), m)
        } else {
            const z = {
                id: g,
                preview: T,
                file: m,
                isUploading: !0,
                isDrawing: !0
            };
            a(f, [...e(f), z], !0),
            I(g, m)
        }
        ze()
    }
    var Q = xr()
      , F = we(Q);
    {
        var J = M => {
            var T = yr()
              , g = i(T);
            {
                var m = Ce => {
                    var je = gr()
                      , ke = i(je, !0);
                    o(je),
                    D( () => re(ke, e(h))),
                    v(Ce, je)
                }
                ;
                P(g, Ce => {
                    e(h) && Ce(m)
                }
                )
            }
            var z = c(g, 2)
              , S = i(z)
              , O = i(S);
            {
                let Ce = K( () => s()?.avatar)
                  , je = K( () => s()?.displayName);
                ea(O, {
                    get avatar() {
                        return e(Ce)
                    },
                    get name() {
                        return e(je)
                    },
                    size: 40
                })
            }
            o(S);
            var ie = c(S, 2)
              , ge = i(ie);
            ja(ge),
            ge.__input = Y,
            ge.__keydown = Z,
            kt(ge, Ce => x = Ce, () => x);
            var ve = c(ge, 2);
            {
                var be = Ce => {
                    $s(Ce, {
                        get query() {
                            return e(y)
                        },
                        get position() {
                            return e(j)
                        },
                        onSelect: se,
                        onClose: G
                    })
                }
                ;
                P(ve, Ce => {
                    e(w) && Ce(be)
                }
                )
            }
            var Te = c(ve, 2);
            {
                var Ge = Ce => {
                    var je = br();
                    let ke;
                    ht(je, 21, () => e(f), xe => xe.id, (xe, ye) => {
                        var Ne = wr();
                        let He;
                        var ut = i(Ne);
                        let Be;
                        var oe = c(ut, 2);
                        {
                            var qe = ne => {
                                var le = pr();
                                v(ne, le)
                            }
                              , Se = ne => {
                                var le = Ve()
                                  , Pe = we(le);
                                {
                                    var dt = vt => {
                                        var Pt = hr();
                                        D( () => V(Pt, "title", e(ye).error)),
                                        v(vt, Pt)
                                    }
                                    ;
                                    P(Pe, vt => {
                                        e(ye).error && vt(dt)
                                    }
                                    , !0)
                                }
                                v(ne, le)
                            }
                            ;
                            P(oe, ne => {
                                e(ye).isUploading ? ne(qe) : ne(Se, !1)
                            }
                            )
                        }
                        var et = c(oe, 2);
                        {
                            var yt = ne => {
                                var le = mr();
                                le.__click = () => pe(e(ye)),
                                v(ne, le)
                            }
                            ;
                            P(et, ne => {
                                e(ye).isDrawing && !e(ye).isUploading && ne(yt)
                            }
                            )
                        }
                        var xt = c(et, 2);
                        xt.__click = () => U(e(ye).id);
                        var Ze = i(xt);
                        ya(Ze, {
                            size: 14
                        }),
                        o(xt),
                        o(Ne),
                        D( () => {
                            He = he(Ne, 1, "create-post__preview-item svelte-1qnpi43", null, He, {
                                "is-drawing": e(ye).isDrawing,
                                "has-error": e(ye).error
                            }),
                            V(ut, "src", e(ye).preview),
                            Be = he(ut, 1, "svelte-1qnpi43", null, Be, {
                                uploading: e(ye).isUploading
                            }),
                            xt.disabled = e(ye).isUploading
                        }
                        ),
                        v(xe, Ne)
                    }
                    ),
                    o(je),
                    D( () => ke = he(je, 1, "create-post__previews svelte-1qnpi43", null, ke, {
                        single: e(f).length === 1
                    })),
                    v(Ce, je)
                }
                ;
                P(Te, Ce => {
                    e(f).length > 0 && Ce(Ge)
                }
                )
            }
            o(ie),
            o(z);
            var $e = c(z, 2)
              , lt = i($e)
              , $ = i(lt);
            $.__change = B,
            kt($, Ce => b = Ce, () => b);
            var ae = c($, 2);
            ae.__click = () => b?.click();
            var E = c(ae, 2);
            E.__click = me;
            var _e = c(E, 2);
            {
                var De = Ce => {
                    var je = kr()
                      , ke = i(je);
                    o(je),
                    D( () => re(ke, `${e(f).length ?? ""}/10`)),
                    v(Ce, je)
                }
                ;
                P(_e, Ce => {
                    e(f).length > 0 && Ce(De)
                }
                )
            }
            o(lt);
            var Le = c(lt, 2);
            Le.__click = X;
            var Xe = i(Le, !0);
            o(Le),
            o($e),
            o(T),
            D( () => {
                La(ge, e(u)),
                ae.disabled = !e(W),
                E.disabled = !e(W),
                Le.disabled = e(te),
                re(Xe, e(C) ? "..." : "")
            }
            ),
            Zt("paste", ge, de),
            v(M, T)
        }
        ;
        P(F, M => {
            r() || M(J)
        }
        )
    }
    var A = c(F, 2);
    tn(A, {
        get isOpen() {
            return e(R)
        },
        get initialImage() {
            return e(N)
        },
        onSave: fe,
        onClose: ze
    }),
    v(n, Q),
    Je(),
    _()
}
it(["input", "keydown", "click", "change"]);
var zr = p('<div class="modal-error svelte-1eielbp"> </div>')
  , Cr = p('<div class="upload-overlay svelte-1eielbp"><svg class="spinner svelte-1eielbp" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg></div>')
  , Pr = p('<div class="upload-error-overlay svelte-1eielbp"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></div>')
  , Mr = p('<button class="modal-edit-drawing svelte-1eielbp" title=" "><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"></path><path d="M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"></path></svg></button>')
  , jr = p('<div><img alt=""/> <!> <!> <button class="modal-remove-media svelte-1eielbp"><!></button></div>')
  , qr = p('<div class="modal-previews svelte-1eielbp"></div>')
  , Sr = p('<span class="modal-counter svelte-1eielbp"> </span>')
  , Ir = p('<div class="create-post-modal svelte-1eielbp"><div class="modal-header svelte-1eielbp"><button class="modal-close svelte-1eielbp"><!></button> <button class="modal-submit svelte-1eielbp"> </button></div> <!> <div class="modal-body svelte-1eielbp"><div class="modal-avatar svelte-1eielbp"><!></div> <div class="modal-content svelte-1eielbp"><textarea placeholder=" ?" class="modal-textarea svelte-1eielbp"></textarea> <!> <!></div></div> <div class="modal-footer svelte-1eielbp"><input type="file" class="file-input svelte-1eielbp" accept="image/*" multiple/> <button class="modal-attach svelte-1eielbp" title=" "><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg></button> <button class="modal-attach svelte-1eielbp" title=""><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"></circle><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"></circle><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"></circle><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"></circle><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"></path></svg></button> <!></div></div>')
  , Tr = p("<!> <!>", 1);
function Dr(n, t) {
    Qe(t, !0);
    const r = () => bt(za, "$currentUser", s)
      , [s,d] = aa()
      , _ = 10;
    let l = k(""), u = k(pt([])), f, b, x = k(!1), C = k(""), h = k(!1), w = k(""), y = k(pt({
        top: 0,
        left: 0
    })), j = k(0), q = k(!1), R = k(null), L = k(void 0), N = K( () => e(u).some(M => M.isUploading)), H = K( () => e(u).filter(M => M.uploaded).map(M => M.uploaded)), ee = K( () => !e(l).trim() && e(H).length === 0 || e(x) || e(N)), te = K( () => e(u).length < _);
    function W(M) {
        const T = M.target;
        a(l, T.value, !0),
        de(T)
    }
    function Y(M) {
        const T = M.clipboardData?.items;
        if (!T)
            return;
        const g = _ - e(u).length;
        if (g <= 0)
            return;
        const m = [];
        for (let z = 0; z < T.length && m.length < g; z++) {
            const S = T[z];
            if (S.type.startsWith("image/")) {
                const O = S.getAsFile();
                O && m.push(O)
            }
        }
        if (m.length !== 0) {
            M.preventDefault();
            for (const z of m) {
                const S = crypto.randomUUID()
                  , O = new FileReader;
                O.onload = ie => {
                    const ge = ie.target?.result
                      , ve = {
                        id: S,
                        preview: ge,
                        file: z,
                        isUploading: !0
                    };
                    a(u, [...e(u), ve], !0),
                    B(S, z)
                }
                ,
                O.readAsDataURL(z)
            }
        }
    }
    function de(M) {
        const T = M.selectionStart
          , g = e(l).slice(0, T)
          , m = g.match(/#([a-zA-Z--0-9_]*)$/);
        if (m) {
            a(j, T - m[0].length),
            a(w, m[1], !0);
            const z = parseInt(getComputedStyle(M).lineHeight) || 22
              , O = g.split(`
`).length - 1;
            a(y, {
                top: (O + 1) * z + 4,
                left: 0
            }, !0),
            a(h, !0)
        } else
            a(h, !1),
            a(w, "")
    }
    function ce(M) {
        const T = e(l).slice(0, e(j))
          , g = e(l).slice(b.selectionStart);
        a(l, T + "#" + M.name + " " + g),
        a(h, !1),
        a(w, ""),
        setTimeout( () => {
            b?.focus();
            const m = e(j) + M.name.length + 2;
            b.setSelectionRange(m, m)
        }
        , 0)
    }
    function se() {
        a(h, !1),
        a(w, "")
    }
    async function G(M) {
        const g = M.target.files;
        if (!g || g.length === 0)
            return;
        const m = _ - e(u).length
          , z = Array.from(g).slice(0, m);
        for (const S of z) {
            const O = crypto.randomUUID()
              , ie = new FileReader;
            ie.onload = ge => {
                const ve = ge.target?.result
                  , be = {
                    id: O,
                    preview: ve,
                    file: S,
                    isUploading: !0
                };
                a(u, [...e(u), be], !0),
                B(O, S)
            }
            ,
            ie.readAsDataURL(S)
        }
        f && (f.value = "")
    }
    async function B(M, T) {
        const g = await ma.uploadFile(T);
        a(u, e(u).map(m => {
            if (m.id === M) {
                if (g.error)
                    return ra.show(g.error),
                    {
                        ...m,
                        isUploading: !1,
                        error: g.error
                    };
                if (g.data)
                    return {
                        ...m,
                        isUploading: !1,
                        uploaded: g.data
                    }
            }
            return m
        }
        ), !0)
    }
    async function I(M) {
        const T = e(u).find(g => g.id === M);
        T?.uploaded && await ma.deleteFile(T.uploaded.id),
        a(u, e(u).filter(g => g.id !== M), !0)
    }
    function U(M) {
        M.key === "Enter" && !M.shiftKey && !("ontouchstart"in window) && (M.preventDefault(),
        Z())
    }
    async function Z() {
        if (!e(l).trim() && e(H).length === 0)
            return;
        a(x, !0),
        a(C, "");
        const M = e(H).length > 0 ? e(H).map(g => g.id) : void 0
          , T = await Ot.createPost({
            content: e(l),
            attachmentIds: M
        });
        T.error ? (a(C, T.error, !0),
        ra.show(T.error)) : T.data && (a(l, ""),
        a(u, [], !0),
        t.onPostCreated?.(T.data),
        t.onClose()),
        a(x, !1)
    }
    function X() {
        e(x) || (a(l, ""),
        a(u, [], !0),
        a(C, ""),
        t.onClose())
    }
    function me() {
        a(R, null),
        a(L, void 0),
        a(q, !0)
    }
    function pe(M) {
        M.isDrawing && (a(R, M.id, !0),
        a(L, M.preview, !0),
        a(q, !0))
    }
    function ze() {
        a(q, !1),
        a(R, null),
        a(L, void 0)
    }
    async function fe(M, T) {
        const g = e(R) || crypto.randomUUID()
          , m = new File([M],`drawing-${g}.png`,{
            type: "image/png"
        });
        if (e(R)) {
            const z = e(u).find(S => S.id === e(R));
            z?.uploaded && await ma.deleteFile(z.uploaded.id),
            a(u, e(u).map(S => S.id === e(R) ? {
                ...S,
                preview: T,
                file: m,
                isUploading: !0,
                uploaded: void 0
            } : S), !0),
            B(e(R), m)
        } else {
            const z = {
                id: g,
                preview: T,
                file: m,
                isUploading: !0,
                isDrawing: !0
            };
            a(u, [...e(u), z], !0),
            B(g, m)
        }
        ze()
    }
    var Q = Tr()
      , F = we(Q);
    {
        var J = M => {
            var T = Ir()
              , g = i(T)
              , m = i(g);
            m.__click = X;
            var z = i(m);
            ya(z, {
                size: 24
            }),
            o(m);
            var S = c(m, 2);
            S.__click = Z;
            var O = i(S, !0);
            o(S),
            o(g);
            var ie = c(g, 2);
            {
                var ge = ke => {
                    var xe = zr()
                      , ye = i(xe, !0);
                    o(xe),
                    D( () => re(ye, e(C))),
                    v(ke, xe)
                }
                ;
                P(ie, ke => {
                    e(C) && ke(ge)
                }
                )
            }
            var ve = c(ie, 2)
              , be = i(ve)
              , Te = i(be);
            {
                let ke = K( () => r()?.avatar)
                  , xe = K( () => r()?.displayName);
                ea(Te, {
                    get avatar() {
                        return e(ke)
                    },
                    get name() {
                        return e(xe)
                    },
                    size: 40
                })
            }
            o(be);
            var Ge = c(be, 2)
              , $e = i(Ge);
            ja($e),
            $e.__input = W,
            $e.__keydown = U,
            kt($e, ke => b = ke, () => b);
            var lt = c($e, 2);
            {
                var $ = ke => {
                    $s(ke, {
                        get query() {
                            return e(w)
                        },
                        get position() {
                            return e(y)
                        },
                        onSelect: ce,
                        onClose: se
                    })
                }
                ;
                P(lt, ke => {
                    e(h) && ke($)
                }
                )
            }
            var ae = c(lt, 2);
            {
                var E = ke => {
                    var xe = qr();
                    ht(xe, 21, () => e(u), ye => ye.id, (ye, Ne) => {
                        var He = jr();
                        let ut;
                        var Be = i(He);
                        let oe;
                        var qe = c(Be, 2);
                        {
                            var Se = le => {
                                var Pe = Cr();
                                v(le, Pe)
                            }
                              , et = le => {
                                var Pe = Ve()
                                  , dt = we(Pe);
                                {
                                    var vt = Pt => {
                                        var St = Pr();
                                        D( () => V(St, "title", e(Ne).error)),
                                        v(Pt, St)
                                    }
                                    ;
                                    P(dt, Pt => {
                                        e(Ne).error && Pt(vt)
                                    }
                                    , !0)
                                }
                                v(le, Pe)
                            }
                            ;
                            P(qe, le => {
                                e(Ne).isUploading ? le(Se) : le(et, !1)
                            }
                            )
                        }
                        var yt = c(qe, 2);
                        {
                            var xt = le => {
                                var Pe = Mr();
                                Pe.__click = () => pe(e(Ne)),
                                v(le, Pe)
                            }
                            ;
                            P(yt, le => {
                                e(Ne).isDrawing && !e(Ne).isUploading && le(xt)
                            }
                            )
                        }
                        var Ze = c(yt, 2);
                        Ze.__click = () => I(e(Ne).id);
                        var ne = i(Ze);
                        ya(ne, {
                            size: 14
                        }),
                        o(Ze),
                        o(He),
                        D( () => {
                            ut = he(He, 1, "modal-preview-item svelte-1eielbp", null, ut, {
                                "is-drawing": e(Ne).isDrawing,
                                "has-error": e(Ne).error
                            }),
                            V(Be, "src", e(Ne).preview),
                            oe = he(Be, 1, "svelte-1eielbp", null, oe, {
                                uploading: e(Ne).isUploading
                            }),
                            Ze.disabled = e(Ne).isUploading
                        }
                        ),
                        v(ye, He)
                    }
                    ),
                    o(xe),
                    v(ke, xe)
                }
                ;
                P(ae, ke => {
                    e(u).length > 0 && ke(E)
                }
                )
            }
            o(Ge),
            o(ve);
            var _e = c(ve, 2)
              , De = i(_e);
            De.__change = G,
            kt(De, ke => f = ke, () => f);
            var Le = c(De, 2);
            Le.__click = () => f?.click();
            var Xe = c(Le, 2);
            Xe.__click = me;
            var Ce = c(Xe, 2);
            {
                var je = ke => {
                    var xe = Sr()
                      , ye = i(xe);
                    o(xe),
                    D( () => re(ye, `${e(u).length ?? ""}/10`)),
                    v(ke, xe)
                }
                ;
                P(Ce, ke => {
                    e(u).length > 0 && ke(je)
                }
                )
            }
            o(_e),
            o(T),
            D( () => {
                m.disabled = e(x),
                S.disabled = e(ee),
                re(O, e(x) ? "..." : ""),
                La($e, e(l)),
                Le.disabled = !e(te),
                Xe.disabled = !e(te)
            }
            ),
            Zt("paste", $e, Y),
            v(M, T)
        }
        ;
        P(F, M => {
            t.isOpen && M(J)
        }
        )
    }
    var A = c(F, 2);
    tn(A, {
        get isOpen() {
            return e(q)
        },
        get initialImage() {
            return e(L)
        },
        onSave: fe,
        onClose: ze
    }),
    v(n, Q),
    Je(),
    d()
}
it(["click", "input", "keydown", "change"]);
var Rr = p('<button class="fab svelte-5ery86" aria-label=" "><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button> <!>', 1);
function Bc(n, t) {
    Qe(t, !0);
    const r = () => bt(ss, "$page", d)
      , s = () => bt(za, "$currentUser", d)
      , [d,_] = aa();
    let l = k(!1)
      , u = K( () => r().url.pathname === "/" || r().url.pathname === "/feed")
      , f = K( () => s() && (r().url.pathname === `/${s().username}` || r().url.pathname === `/${s().id}`))
      , b = K( () => e(u) || e(f));
    function x() {
        a(l, !0)
    }
    function C() {
        a(l, !1)
    }
    async function h() {
        await hn(),
        window.location.reload()
    }
    var w = Ve()
      , y = we(w);
    {
        var j = q => {
            var R = Rr()
              , L = we(R);
            L.__click = x;
            var N = c(L, 2);
            Dr(N, {
                get isOpen() {
                    return e(l)
                },
                onClose: C,
                onPostCreated: h
            }),
            v(q, R)
        }
        ;
        P(y, q => {
            s() && e(b) && q(j)
        }
        )
    }
    v(n, w),
    Je(),
    _()
}
it(["click"]);
var Ar = p('<div style="display: contents;"><!></div>');
function Na(n, t) {
    let r = ue(t, "target", 3, "body");
    function s(l) {
        const u = typeof r() == "string" ? document.querySelector(r()) : r();
        return u && u.appendChild(l),
        {
            destroy() {
                l.remove()
            }
        }
    }
    var d = Ar()
      , _ = i(d);
    Ja(_, () => t.children),
    o(d),
    qa(d, l => s?.(l)),
    v(n, d)
}
var Lr = p('<div class="pin-hint"><span class="pin-hint__row"><span class="pin-hint__label">:</span> </span> <span class="pin-hint__row"><span class="pin-hint__label">:</span> </span> <div class="pin-hint__arrow"></div></div>')
  , Ur = p('<span class="pin-badge svelte-1ibpnsz" role="img"><img class="pin-badge__icon svelte-1ibpnsz"/></span> <!>', 1);
function Fa(n, t) {
    Qe(t, !0);
    let r = ue(t, "size", 3, 16)
      , s = k(null)
      , d = k(!1)
      , _ = k(0)
      , l = k(0);
    function u() {
        if (!e(s))
            return;
        const y = e(s).getBoundingClientRect();
        a(_, y.left + y.width / 2),
        a(l, y.top, !0),
        a(d, !0)
    }
    function f() {
        a(d, !1)
    }
    var b = Ur()
      , x = we(b)
      , C = i(x);
    o(x),
    kt(x, y => a(s, y), () => e(s));
    var h = c(x, 2);
    {
        var w = y => {
            Na(y, {
                children: (j, q) => {
                    var R = Lr()
                      , L = i(R)
                      , N = c(i(L));
                    o(L);
                    var H = c(L, 2)
                      , ee = c(i(H));
                    o(H),
                    _t(2),
                    o(R),
                    D( () => {
                        At(R, `left: ${e(_) ?? ""}px; top: ${e(l) ?? ""}px;`),
                        re(N, ` ${t.pin.name ?? ""}`),
                        re(ee, ` ${t.pin.description ?? ""}`)
                    }
                    ),
                    v(j, R)
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        P(h, y => {
            e(d) && y(w)
        }
        )
    }
    D( () => {
        V(x, "aria-label", t.pin.name),
        V(C, "src", `/assets/pins/${t.pin.slug ?? ""}.png`),
        V(C, "alt", t.pin.name),
        V(C, "width", r()),
        V(C, "height", r())
    }
    ),
    Zt("mouseenter", x, u),
    Zt("mouseleave", x, f),
    v(n, b),
    Je()
}
var Br = p("<span> </span>");
function Va(n, t) {
    Qe(t, !0);
    let r = ue(t, "class", 3, "")
      , s = k("")
      , d = null;
    function _() {
        const f = typeof t.date == "string" ? new Date(t.date) : t.date
          , b = er(f);
        a(s, b.text, !0),
        d && clearTimeout(d),
        d = setTimeout(_, b.nextUpdateMs)
    }
    Ha( () => {
        _()
    }
    ),
    fs( () => {
        d && clearTimeout(d)
    }
    ),
    Et( () => {
        t.date,
        _()
    }
    );
    var l = Br()
      , u = i(l, !0);
    o(l),
    D( () => {
        he(l, 1, As(r())),
        re(u, e(s))
    }
    ),
    v(n, l),
    Je()
}
var Or = p('<a class="post-avatar-wrapper svelte-kvcx9g"><!></a>')
  , Er = p('<div class="post-avatar-wrapper svelte-kvcx9g"><!></div>')
  , Nr = p('<a class="post-author svelte-kvcx9g"> </a>')
  , Hr = p('<span class="post-author svelte-kvcx9g"> </span>')
  , Fr = p('<span class="post-verified svelte-kvcx9g"><!></span>')
  , Vr = p('<button class="post-dropdown-item svelte-kvcx9g"><!> <span></span></button>')
  , Zr = p('<button class="post-dropdown-item svelte-kvcx9g"><!> <span></span></button>')
  , Wr = p('<button class="post-dropdown-item svelte-kvcx9g"><!> <span></span></button>')
  , Yr = p('<button class="post-dropdown-item danger svelte-kvcx9g"><!> <span></span></button>')
  , Xr = p('<button class="post-dropdown-item danger svelte-kvcx9g"><!> <span></span></button>')
  , Kr = p('<div class="post-dropdown svelte-kvcx9g" role="menu" tabindex="-1"><button class="post-dropdown-item svelte-kvcx9g"><!> <span></span></button> <!> <!> <!> <!></div>')
  , Gr = p('<div class="post-header svelte-kvcx9g"><div class="post-header-left svelte-kvcx9g"><!> <div class="post-meta svelte-kvcx9g"><div class="post-meta__top svelte-kvcx9g"><!> <!> <!></div> <!></div></div> <div class="post-menu svelte-kvcx9g"><button class="post-menu-btn svelte-kvcx9g" aria-label=" "><!></button> <!></div></div>');
function Qr(n, t) {
    Qe(t, !0);
    let r = ue(t, "verified", 3, !1)
      , s = ue(t, "pin", 3, null)
      , d = ue(t, "isOwner", 3, !1)
      , _ = ue(t, "canDelete", 3, !1)
      , l = ue(t, "isPinned", 3, !1)
      , u = ue(t, "canPin", 3, !1)
      , f = k(!1)
      , b = K( () => {
        const F = t.username || t.authorId;
        return F ? `/${F}` : null
    }
    );
    function x(F) {
        F.preventDefault(),
        F.stopPropagation(),
        e(b) && Ma(e(b))
    }
    function C(F) {
        F.stopPropagation(),
        a(f, !e(f))
    }
    function h() {
        a(f, !1)
    }
    function w(F) {
        F.stopPropagation(),
        t.onShare?.(),
        a(f, !1)
    }
    function y(F) {
        F.stopPropagation(),
        t.onEdit?.(),
        a(f, !1)
    }
    function j(F) {
        F.stopPropagation(),
        t.onDelete?.(),
        a(f, !1)
    }
    function q(F) {
        F.stopPropagation(),
        t.onReport?.(),
        a(f, !1)
    }
    function R(F) {
        F.stopPropagation(),
        t.onPin?.(),
        a(f, !1)
    }
    function L(F) {
        F.stopPropagation(),
        t.onUnpin?.(),
        a(f, !1)
    }
    var N = Gr()
      , H = i(N)
      , ee = i(H);
    {
        var te = F => {
            var J = Or();
            J.__click = x;
            var A = i(J);
            ea(A, {
                get avatar() {
                    return t.avatar
                },
                get name() {
                    return t.author
                },
                size: 40
            }),
            o(J),
            D( () => V(J, "href", e(b))),
            v(F, J)
        }
          , W = F => {
            var J = Er()
              , A = i(J);
            ea(A, {
                get avatar() {
                    return t.avatar
                },
                get name() {
                    return t.author
                },
                size: 40
            }),
            o(J),
            v(F, J)
        }
        ;
        P(ee, F => {
            e(b) ? F(te) : F(W, !1)
        }
        )
    }
    var Y = c(ee, 2)
      , de = i(Y)
      , ce = i(de);
    {
        var se = F => {
            var J = Nr();
            J.__click = x;
            var A = i(J, !0);
            o(J),
            D( () => {
                V(J, "href", e(b)),
                re(A, t.author)
            }
            ),
            v(F, J)
        }
          , G = F => {
            var J = Hr()
              , A = i(J, !0);
            o(J),
            D( () => re(A, t.author)),
            v(F, J)
        }
        ;
        P(ce, F => {
            e(b) ? F(se) : F(G, !1)
        }
        )
    }
    var B = c(ce, 2);
    {
        var I = F => {
            var J = Fr()
              , A = i(J);
            Hs(A, {
                size: 16
            }),
            o(J),
            v(F, J)
        }
        ;
        P(B, F => {
            r() && F(I)
        }
        )
    }
    var U = c(B, 2);
    {
        var Z = F => {
            Fa(F, {
                get pin() {
                    return s()
                }
            })
        }
        ;
        P(U, F => {
            s() && F(Z)
        }
        )
    }
    o(de);
    var X = c(de, 2);
    Va(X, {
        get date() {
            return t.time
        },
        class: "post-time"
    }),
    o(Y),
    o(H);
    var me = c(H, 2)
      , pe = i(me);
    pe.__click = C;
    var ze = i(pe);
    hs(ze, {}),
    o(pe);
    var fe = c(pe, 2);
    {
        var Q = F => {
            var J = Kr();
            J.__click = ve => ve.stopPropagation();
            var A = i(J);
            A.__click = w;
            var M = i(A);
            Ns(M, {
                size: 16
            }),
            _t(2),
            o(A);
            var T = c(A, 2);
            {
                var g = ve => {
                    var be = Vr();
                    be.__click = y;
                    var Te = i(be);
                    Rn(Te, {
                        size: 16
                    }),
                    _t(2),
                    o(be),
                    v(ve, be)
                }
                ;
                P(T, ve => {
                    d() && ve(g)
                }
                )
            }
            var m = c(T, 2);
            {
                var z = ve => {
                    var be = Ve()
                      , Te = we(be);
                    {
                        var Ge = lt => {
                            var $ = Zr();
                            $.__click = L;
                            var ae = i($);
                            zs(ae, {
                                size: 16
                            }),
                            _t(2),
                            o($),
                            v(lt, $)
                        }
                          , $e = lt => {
                            var $ = Wr();
                            $.__click = R;
                            var ae = i($);
                            zs(ae, {
                                size: 16
                            }),
                            _t(2),
                            o($),
                            v(lt, $)
                        }
                        ;
                        P(Te, lt => {
                            l() ? lt(Ge) : lt($e, !1)
                        }
                        )
                    }
                    v(ve, be)
                }
                ;
                P(m, ve => {
                    u() && ve(z)
                }
                )
            }
            var S = c(m, 2);
            {
                var O = ve => {
                    var be = Yr();
                    be.__click = j;
                    var Te = i(be);
                    ws(Te, {
                        size: 16
                    }),
                    _t(2),
                    o(be),
                    v(ve, be)
                }
                ;
                P(S, ve => {
                    (d() || _()) && ve(O)
                }
                )
            }
            var ie = c(S, 2);
            {
                var ge = ve => {
                    var be = Xr();
                    be.__click = q;
                    var Te = i(be);
                    ms(Te, {
                        size: 16
                    }),
                    _t(2),
                    o(be),
                    v(ve, be)
                }
                ;
                P(ie, ve => {
                    !d() && !_() && ve(ge)
                }
                )
            }
            o(J),
            qa(J, (ve, be) => rs?.(ve, be), () => h),
            v(F, J)
        }
        ;
        P(fe, F => {
            e(f) && F(Q)
        }
        )
    }
    o(me),
    o(N),
    v(n, N),
    Je()
}
it(["click"]);
var Jr = p('<div class="mosaic__overlay svelte-1jfdpkh"><span> </span></div>')
  , $r = p("<button><!> <!></button>")
  , eo = p("<div></div> <!>", 1);
function bs(n, t) {
    Qe(t, !0);
    let r = ue(t, "disableGallery", 3, !1)
      , s = k(!1)
      , d = k(0);
    function _(C, h) {
        h.stopPropagation(),
        !r() && (a(d, C, !0),
        a(s, !0))
    }
    function l() {
        a(s, !1)
    }
    function u(C) {
        if (C.width && C.height) {
            const h = C.width / C.height;
            return `aspect-ratio: ${Math.max(.5, Math.min(2, h))};`
        }
        return ""
    }
    var f = Ve()
      , b = we(f);
    {
        var x = C => {
            var h = eo()
              , w = we(h);
            let y;
            ht(w, 23, () => t.attachments.slice(0, 4), (R, L) => R.id || L, (R, L, N) => {
                var H = $r();
                H.__click = Y => _(e(N), Y);
                var ee = i(H);
                {
                    let Y = K( () => e(L).alt || "");
                    ol(ee, {
                        get src() {
                            return e(L).url
                        },
                        get alt() {
                            return e(Y)
                        },
                        get width() {
                            return e(L).width
                        },
                        get height() {
                            return e(L).height
                        }
                    })
                }
                var te = c(ee, 2);
                {
                    var W = Y => {
                        var de = Jr()
                          , ce = i(de)
                          , se = i(ce);
                        o(ce),
                        o(de),
                        D( () => re(se, `+${t.attachments.length - 4}`)),
                        v(Y, de)
                    }
                    ;
                    P(te, Y => {
                        e(N) === 3 && t.attachments.length > 4 && Y(W)
                    }
                    )
                }
                o(H),
                D( () => he(H, 1, `mosaic__item mosaic__item--${e(N) + 1}`, "svelte-1jfdpkh")),
                v(R, H)
            }
            ),
            o(w);
            var j = c(w, 2);
            {
                var q = R => {
                    Js(R, {
                        get isOpen() {
                            return e(s)
                        },
                        get attachments() {
                            return t.attachments
                        },
                        get initialIndex() {
                            return e(d)
                        },
                        onClose: l
                    })
                }
                ;
                P(j, R => {
                    r() || R(q)
                }
                )
            }
            D(R => {
                y = he(w, 1, "mosaic svelte-1jfdpkh", null, y, {
                    "mosaic--1": t.attachments.length === 1,
                    "mosaic--2": t.attachments.length === 2,
                    "mosaic--3": t.attachments.length === 3,
                    "mosaic--4": t.attachments.length >= 4
                }),
                At(w, R)
            }
            , [ () => t.attachments.length === 1 ? u(t.attachments[0]) : ""]),
            v(C, h)
        }
        ;
        P(b, C => {
            t.attachments.length > 0 && C(x)
        }
        )
    }
    v(n, f),
    Je()
}
it(["click"]);
var to = p('<div class="post-actions svelte-1055p8k"><div class="post-actions-left svelte-1055p8k"><button><!> <span class="svelte-1055p8k"> </span></button> <button class="post-action svelte-1055p8k"><!> <span class="svelte-1055p8k"> </span></button> <button><!> <span class="svelte-1055p8k"> </span></button></div> <div class="post-actions-right svelte-1055p8k"><div class="post-views svelte-1055p8k"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1055p8k"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" class="svelte-1055p8k"></path><circle cx="12" cy="12" r="3" class="svelte-1055p8k"></circle></svg> <span class="svelte-1055p8k"> </span></div></div></div>');
function ao(n, t) {
    Qe(t, !0);
    const r = () => bt(e(_), "$postStateStore", s)
      , [s,d] = aa();
    let _ = K( () => Bt.getPostStore(t.postId))
      , l = k(!1)
      , u = Promise.resolve()
      , f = K( () => r()?.isLiked ?? t.isLiked)
      , b = K( () => r()?.likesCount ?? t.likes)
      , x = K( () => r()?.isReposted ?? t.isReposted)
      , C = K( () => r()?.repostsCount ?? t.reposts)
      , h = K( () => r()?.commentsCount ?? t.commentsCount);
    Ha( () => {
        Bt.get(t.postId) || Bt.set(t.postId, {
            isLiked: t.isLiked,
            likesCount: t.likes,
            isReposted: t.isReposted,
            repostsCount: t.reposts,
            commentsCount: t.commentsCount
        })
    }
    );
    function w(Q) {
        if (Q.stopPropagation(),
        !wa())
            return;
        a(l, !0);
        const F = !e(f);
        Bt.toggleLike(t.postId, F),
        u = u.then(async () => {
            (F ? await Ot.likePost(t.postId) : await Ot.unlikePost(t.postId)).success || Bt.toggleLike(t.postId, !F)
        }
        )
    }
    async function y(Q) {
        Q.stopPropagation(),
        wa() && (t.isOwner || (e(x) ? (Bt.toggleRepost(t.postId, !1),
        (await Ot.unrepostPost(t.postId)).success || Bt.toggleRepost(t.postId, !0)) : t.onRepostClick?.()))
    }
    function j(Q) {
        Bt.toggleRepost(t.postId, Q)
    }
    var q = {
        setReposted: j
    }
      , R = to()
      , L = i(R)
      , N = i(L);
    let H;
    N.__click = w;
    var ee = i(N);
    ps(ee, {
        size: 20,
        get filled() {
            return e(f)
        }
    });
    var te = c(ee, 2)
      , W = i(te, !0);
    o(te),
    o(N);
    var Y = c(N, 2);
    Y.__click = Q => {
        Q.stopPropagation(),
        wa() && t.onCommentClick?.()
    }
    ;
    var de = i(Y);
    Es(de, {
        size: 20
    });
    var ce = c(de, 2)
      , se = i(ce, !0);
    o(ce),
    o(Y);
    var G = c(Y, 2);
    let B;
    G.__click = y;
    var I = i(G);
    ns(I, {
        size: 20
    });
    var U = c(I, 2)
      , Z = i(U, !0);
    o(U),
    o(G),
    o(L);
    var X = c(L, 2)
      , me = i(X)
      , pe = c(i(me), 2)
      , ze = i(pe, !0);
    o(pe),
    o(me),
    o(X),
    o(R),
    D( (Q, F, J, A) => {
        H = he(N, 1, "post-action like svelte-1055p8k", null, H, {
            liked: e(f),
            animated: e(l)
        }),
        re(W, Q),
        re(se, F),
        B = he(G, 1, "post-action repost svelte-1055p8k", null, B, {
            reposted: e(x),
            disabled: t.isOwner
        }),
        G.disabled = t.isOwner,
        V(G, "title", t.isOwner ? "   " : e(x) ? " " : ""),
        re(Z, J),
        re(ze, A)
    }
    , [ () => ha(e(b)), () => ha(e(h)), () => ha(e(C)), () => ha(t.views)]),
    v(n, R);
    var fe = Je(q);
    return d(),
    fe
}
it(["click"]);
var so = p('<div class="original-post__deleted svelte-9y6twa"><span>   </span></div>')
  , no = p('<p class="original-post__content svelte-9y6twa"> </p>')
  , ro = p('<div class="original-post__gallery svelte-9y6twa"><!></div>')
  , oo = p('<div class="original-post__header svelte-9y6twa"><div class="original-post__repost-icon svelte-9y6twa"><!></div> <!> <div class="original-post__info svelte-9y6twa"><span class="original-post__name svelte-9y6twa"> <!> <!></span> <span class="original-post__meta svelte-9y6twa"><!><!></span></div></div> <!> <!>', 1)
  , io = p("<button><!></button>");
function Ys(n, t) {
    Qe(t, !0);
    function r() {
        t.post.isDeleted || t.onPostClick?.(t.post.id)
    }
    var s = io();
    let d;
    s.__click = r;
    var _ = i(s);
    {
        var l = f => {
            var b = so();
            v(f, b)
        }
          , u = f => {
            var b = oo()
              , x = we(b)
              , C = i(x)
              , h = i(C);
            ns(h, {
                size: 16
            }),
            o(C);
            var w = c(C, 2);
            ea(w, {
                get avatar() {
                    return t.post.author.avatar
                },
                get name() {
                    return t.post.author.displayName
                },
                size: 32
            });
            var y = c(w, 2)
              , j = i(y)
              , q = i(j)
              , R = c(q);
            {
                var L = B => {
                    ks(B, {})
                }
                ;
                P(R, B => {
                    t.post.author.verified && B(L)
                }
                )
            }
            var N = c(R, 2);
            {
                var H = B => {
                    Fa(B, {
                        get pin() {
                            return t.post.author.pin
                        }
                    })
                }
                ;
                P(N, B => {
                    t.post.author.pin && B(H)
                }
                )
            }
            o(j);
            var ee = c(j, 2)
              , te = i(ee);
            {
                var W = B => {
                    var I = Aa();
                    D( () => re(I, `@${t.post.author.username ?? ""} `)),
                    v(B, I)
                }
                ;
                P(te, B => {
                    t.post.author.username && B(W)
                }
                )
            }
            var Y = c(te);
            Va(Y, {
                get date() {
                    return t.post.createdAt
                }
            }),
            o(ee),
            o(y),
            o(x);
            var de = c(x, 2);
            {
                var ce = B => {
                    var I = no()
                      , U = i(I, !0);
                    o(I),
                    D( () => re(U, t.post.content)),
                    v(B, I)
                }
                ;
                P(de, B => {
                    t.post.content && B(ce)
                }
                )
            }
            var se = c(de, 2);
            {
                var G = B => {
                    var I = ro()
                      , U = i(I);
                    bs(U, {
                        get attachments() {
                            return t.post.attachments
                        },
                        compact: !0
                    }),
                    o(I),
                    v(B, I)
                }
                ;
                P(se, B => {
                    t.post.attachments && t.post.attachments.length > 0 && B(G)
                }
                )
            }
            D( () => re(q, `${t.post.author.displayName ?? ""} `)),
            v(f, b)
        }
        ;
        P(_, f => {
            t.post.isDeleted ? f(l) : f(u, !1)
        }
        )
    }
    o(s),
    D( () => d = he(s, 1, "original-post svelte-9y6twa", null, d, {
        deleted: t.post.isDeleted
    })),
    v(n, s),
    Je()
}
it(["click"]);
function lo() {
    const {subscribe: n, set: t, update: r} = ta({
        topClans: null,
        whoToFollow: null,
        trendingHashtags: null
    });
    return {
        subscribe: n,
        setTopClans(s) {
            r(d => ({
                ...d,
                topClans: s
            }))
        },
        getTopClans() {
            return Gt({
                subscribe: n
            }).topClans
        },
        setWhoToFollow(s) {
            r(d => ({
                ...d,
                whoToFollow: s
            }))
        },
        getWhoToFollow() {
            return Gt({
                subscribe: n
            }).whoToFollow
        },
        setTrendingHashtags(s) {
            r(d => ({
                ...d,
                trendingHashtags: s
            }))
        },
        getTrendingHashtags() {
            return Gt({
                subscribe: n
            }).trendingHashtags
        },
        clear() {
            t({
                topClans: null,
                whoToFollow: null,
                trendingHashtags: null
            })
        }
    }
}
const Oc = lo()
  , xa = 300 * 1e3;
function co() {
    const {subscribe: n, set: t, update: r} = ta({
        popular: null,
        following: null
    });
    return {
        subscribe: n,
        setTab(s, d) {
            r(_ => ({
                ..._,
                [s]: {
                    data: d,
                    timestamp: Date.now()
                }
            }))
        },
        appendPosts(s, d, _, l) {
            r(u => {
                const f = u[s];
                if (!f)
                    return u;
                const b = new Set(f.data.posts.map(C => C.id))
                  , x = d.filter(C => !b.has(C.id));
                return {
                    ...u,
                    [s]: {
                        data: {
                            posts: [...f.data.posts, ...x],
                            nextCursor: _,
                            hasMore: l
                        },
                        timestamp: f.timestamp
                    }
                }
            }
            )
        },
        prependPost(s, d) {
            r(_ => {
                const l = _[s];
                return l ? {
                    ..._,
                    [s]: {
                        data: {
                            ...l.data,
                            posts: [d, ...l.data.posts]
                        },
                        timestamp: l.timestamp
                    }
                } : _
            }
            )
        },
        removePost(s) {
            r(d => {
                const _ = {
                    ...d
                };
                for (const l of ["popular", "following"]) {
                    const u = _[l];
                    u && (_[l] = {
                        ...u,
                        data: {
                            ...u.data,
                            posts: u.data.posts.filter(f => f.id !== s)
                        }
                    })
                }
                return _
            }
            )
        },
        getTab(s) {
            const _ = Gt({
                subscribe: n
            })[s];
            return !_ || Date.now() - _.timestamp > xa ? null : _.data
        },
        isValid(s) {
            const _ = Gt({
                subscribe: n
            })[s];
            return _ ? Date.now() - _.timestamp <= xa : !1
        },
        clear() {
            t({
                popular: null,
                following: null
            })
        }
    }
}
function vo() {
    const {subscribe: n, set: t, update: r} = ta(null);
    return {
        subscribe: n,
        setData(s) {
            t({
                ...s,
                timestamp: Date.now()
            })
        },
        getData() {
            const s = Gt({
                subscribe: n
            });
            return !s || Date.now() - s.timestamp > xa ? null : s
        },
        isValid() {
            const s = Gt({
                subscribe: n
            });
            return s ? Date.now() - s.timestamp <= xa : !1
        },
        clear() {
            t(null)
        }
    }
}
function uo() {
    const {subscribe: n, set: t, update: r} = ta(null);
    return {
        subscribe: n,
        setData(s, d) {
            t({
                notifications: s,
                hasMore: d,
                timestamp: Date.now()
            })
        },
        appendNotifications(s, d) {
            r(_ => {
                if (!_)
                    return null;
                const l = new Set(_.notifications.map(f => f.id))
                  , u = s.filter(f => !l.has(f.id));
                return {
                    notifications: [..._.notifications, ...u],
                    hasMore: d,
                    timestamp: _.timestamp
                }
            }
            )
        },
        getData() {
            const s = Gt({
                subscribe: n
            });
            return !s || Date.now() - s.timestamp > xa ? null : s
        },
        isValid() {
            const s = Gt({
                subscribe: n
            });
            return s ? Date.now() - s.timestamp <= xa : !1
        },
        clear() {
            t(null)
        }
    }
}
function fo() {
    const {subscribe: n, set: t, update: r} = ta({});
    return {
        subscribe: n,
        setProfile(s, d, _, l="posts") {
            r(u => ({
                ...u,
                [s]: {
                    profile: d,
                    posts: l === "posts" ? _ : u[s]?.posts || {
                        posts: [],
                        nextCursor: null,
                        hasMore: !1
                    },
                    liked: l === "liked" ? _ : u[s]?.liked || {
                        posts: [],
                        nextCursor: null,
                        hasMore: !1
                    },
                    timestamp: Date.now()
                }
            }))
        },
        setPostsTab(s, d, _) {
            r(l => {
                const u = l[s];
                return u ? {
                    ...l,
                    [s]: {
                        ...u,
                        [d]: _,
                        timestamp: u.timestamp
                    }
                } : l
            }
            )
        },
        appendPosts(s, d, _, l, u) {
            r(f => {
                const b = f[s];
                if (!b)
                    return f;
                const x = b[d].posts
                  , C = new Set(x.map(w => w.id))
                  , h = _.filter(w => !C.has(w.id));
                return {
                    ...f,
                    [s]: {
                        ...b,
                        [d]: {
                            posts: [...x, ...h],
                            nextCursor: l,
                            hasMore: u
                        }
                    }
                }
            }
            )
        },
        prependPost(s, d) {
            r(_ => {
                const l = _[s];
                return l ? {
                    ..._,
                    [s]: {
                        ...l,
                        posts: {
                            ...l.posts,
                            posts: [d, ...l.posts.posts]
                        }
                    }
                } : _
            }
            )
        },
        removePost(s) {
            r(d => {
                const _ = {
                    ...d
                };
                for (const l of Object.keys(_)) {
                    const u = _[l];
                    u && (_[l] = {
                        ...u,
                        posts: {
                            ...u.posts,
                            posts: u.posts.posts.filter(f => f.id !== s)
                        },
                        liked: {
                            ...u.liked,
                            posts: u.liked.posts.filter(f => f.id !== s)
                        }
                    })
                }
                return _
            }
            )
        },
        updateProfile(s, d) {
            r(_ => {
                const l = _[s];
                return l ? {
                    ..._,
                    [s]: {
                        ...l,
                        profile: {
                            ...l.profile,
                            ...d
                        }
                    }
                } : _
            }
            )
        },
        getProfile(s) {
            const _ = Gt({
                subscribe: n
            })[s];
            return !_ || Date.now() - _.timestamp > xa ? null : _
        },
        isValid(s) {
            const _ = Gt({
                subscribe: n
            })[s];
            return _ ? Date.now() - _.timestamp <= xa : !1
        },
        clear(s) {
            s ? r(d => {
                const {[s]: _, ...l} = d;
                return l
            }
            ) : t({})
        }
    }
}
const Xs = co();
vo();
uo();
const Ks = fo();
var _o = p('<div class="post-deleted svelte-cvb24n"><span class="post-deleted-text svelte-cvb24n"> .</span> <button class="post-restore-btn svelte-cvb24n"> </button></div>')
  , go = p('<div class="post-pinned-badge svelte-cvb24n"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-cvb24n"><line x1="12" y1="17" x2="12" y2="22" class="svelte-cvb24n"></line><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z" class="svelte-cvb24n"></path></svg> <span class="svelte-cvb24n"> </span></div>')
  , po = p('<div class="post svelte-cvb24n"><!> <!> <!> <!> <!> <!></div>')
  , ho = p('<div role="article" tabindex="0"><!></div> <!> <!> <!>', 1);
function Ec(n, t) {
    Qe(t, !0);
    let r = ue(t, "isPinned", 3, !1)
      , s = ue(t, "canPin", 3, !1)
      , d = ue(t, "isHighlighted", 3, !1)
      , _ = ue(t, "isWallOwner", 3, !1)
      , l = K( () => t.post.id)
      , u = K( () => t.post.author.displayName)
      , f = K( () => t.post.author.id)
      , b = K( () => t.post.author.username)
      , x = K( () => t.post.author.avatar || "")
      , C = K( () => t.post.createdAt)
      , h = K( () => t.post.author.verified)
      , w = K( () => t.post.author.pin || null)
      , y = K( () => t.post.attachments)
      , j = K( () => t.post.originalPost || null)
      , q = K( () => t.post.isOwner ?? !1)
      , R = K( () => e(q) || _())
      , L = t.post.isViewed ?? !1
      , N = t.post.commentsCount
      , H = t.post.content
      , ee = k(pt(L))
      , te = k(!1)
      , W = k(!1)
      , Y = k(!1)
      , de = pt(N)
      , ce = k(null)
      , se = k(!1)
      , G = k(!1)
      , B = k(!1)
      , I = k(null)
      , U = k(pt(H));
    const Z = 2e3;
    function X(E) {
        if (e(ee))
            return {
                destroy() {}
            };
        const _e = e(l)
          , De = t.onView;
        let Le = null;
        const Xe = new IntersectionObserver(Ce => {
            Ce.forEach(je => {
                je.isIntersecting && je.intersectionRatio >= .5 ? Le || (Le = setTimeout( () => {
                    a(ee, !0),
                    De?.(_e),
                    Xe.disconnect()
                }
                , Z)) : Le && (clearTimeout(Le),
                Le = null)
            }
            )
        }
        ,{
            threshold: .5
        });
        return Xe.observe(E),
        {
            destroy() {
                Le && clearTimeout(Le),
                Xe.disconnect()
            }
        }
    }
    function me() {
        const E = `${window.location.origin}/@${e(b)}/post/${e(l)}`;
        navigator.clipboard.writeText(E),
        alert(" !")
    }
    async function pe() {
        if (!e(W)) {
            a(W, !0);
            try {
                (await Ot.deletePost(e(l))).success && (a(te, !0),
                Xs.removePost(e(l)),
                Ks.removePost(e(l)),
                t.onDelete?.())
            } catch {} finally {
                a(W, !1)
            }
        }
    }
    async function ze() {
        if (!e(Y)) {
            a(Y, !0);
            try {
                (await Ot.restorePost(e(l))).success && a(te, !1)
            } catch {} finally {
                a(Y, !1)
            }
        }
    }
    function fe() {
        t.onModalOpen?.(e(l), e(b))
    }
    function Q() {
        a(se, !0)
    }
    function F(E) {
        a(U, E, !0)
    }
    function J() {
        a(G, !0)
    }
    function A(E) {
        e(ce)?.setReposted(!0),
        t.onRepost?.(E)
    }
    function M(E) {
        if (t.onModalOpen) {
            const _e = e(j)?.author?.username || null;
            t.onModalOpen(E, _e)
        } else
            a(I, E, !0),
            a(B, !0)
    }
    function T() {
        a(B, !1),
        a(I, null),
        t.onModalClose?.()
    }
    let g = K( () => ({
        id: e(l),
        content: e(U),
        author: {
            id: e(f),
            username: e(b) || null,
            displayName: e(u),
            avatar: e(x) || null,
            verified: e(h),
            pin: e(w)
        },
        createdAt: e(C)
    }));
    function m(E) {
        const _e = E.target;
        _e.closest("button") || _e.closest("a") || _e.closest("input") || _e.closest("textarea") || _e.closest("select") || _e.closest(".post-dropdown") || t.onModalOpen?.(e(l), e(b))
    }
    function z(E) {
        if (E.key === "Enter" || E.key === " ") {
            const _e = E.target;
            if (_e.closest("button") || _e.closest("a") || _e.closest("input") || _e.closest("textarea") || _e.closest("select"))
                return;
            E.preventDefault(),
            t.onModalOpen?.(e(l), e(b))
        }
    }
    var S = ho()
      , O = we(S);
    let ie;
    O.__click = m,
    O.__keydown = z;
    var ge = i(O);
    {
        var ve = E => {
            var _e = _o()
              , De = c(i(_e), 2);
            De.__click = ze;
            var Le = i(De, !0);
            o(De),
            o(_e),
            D( () => {
                De.disabled = e(Y),
                re(Le, e(Y) ? "..." : "")
            }
            ),
            v(E, _e)
        }
          , be = E => {
            var _e = po()
              , De = i(_e);
            {
                var Le = He => {
                    var ut = go();
                    v(He, ut)
                }
                ;
                P(De, He => {
                    r() && He(Le)
                }
                )
            }
            var Xe = c(De, 2);
            Qr(Xe, {
                get author() {
                    return e(u)
                },
                get authorId() {
                    return e(f)
                },
                get username() {
                    return e(b)
                },
                get avatar() {
                    return e(x)
                },
                get time() {
                    return e(C)
                },
                get verified() {
                    return e(h)
                },
                get pin() {
                    return e(w)
                },
                get isOwner() {
                    return e(q)
                },
                get canDelete() {
                    return e(R)
                },
                get isPinned() {
                    return r()
                },
                get canPin() {
                    return s()
                },
                onShare: me,
                onEdit: Q,
                onDelete: pe,
                get onReport() {
                    return t.onReport
                },
                get onPin() {
                    return t.onPin
                },
                get onUnpin() {
                    return t.onUnpin
                }
            });
            var Ce = c(Xe, 2);
            {
                var je = He => {
                    en(He, {
                        get content() {
                            return e(U)
                        },
                        maxHeight: 1e3
                    })
                }
                ;
                P(Ce, He => {
                    e(U) && He(je)
                }
                )
            }
            var ke = c(Ce, 2);
            {
                var xe = He => {
                    Ys(He, {
                        get post() {
                            return e(j)
                        },
                        onPostClick: M
                    })
                }
                ;
                P(ke, He => {
                    e(j) && He(xe)
                }
                )
            }
            var ye = c(ke, 2);
            bs(ye, {
                get attachments() {
                    return e(y)
                }
            });
            var Ne = c(ye, 2);
            kt(ao(Ne, {
                get postId() {
                    return e(l)
                },
                get likes() {
                    return t.post.likesCount
                },
                get commentsCount() {
                    return de
                },
                get reposts() {
                    return t.post.repostsCount
                },
                get views() {
                    return t.post.viewsCount
                },
                get isLiked() {
                    return t.post.isLiked
                },
                get isReposted() {
                    return t.post.isReposted
                },
                get isOwner() {
                    return e(q)
                },
                onCommentClick: fe,
                onRepostClick: J
            }), He => a(ce, He, !0), () => e(ce)),
            o(_e),
            v(E, _e)
        }
        ;
        P(ge, E => {
            e(te) ? E(ve) : E(be, !1)
        }
        )
    }
    o(O),
    qa(O, E => X?.(E));
    var Te = c(O, 2);
    {
        var Ge = E => {
            Na(E, {
                children: (_e, De) => {
                    fi(_e, {
                        get isOpen() {
                            return e(se)
                        },
                        get postId() {
                            return e(l)
                        },
                        get initialContent() {
                            return e(U)
                        },
                        onClose: () => a(se, !1),
                        onSave: F
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        P(Te, E => {
            e(se) && E(Ge)
        }
        )
    }
    var $e = c(Te, 2);
    {
        var lt = E => {
            Na(E, {
                children: (_e, De) => {
                    Qs(_e, {
                        get isOpen() {
                            return e(G)
                        },
                        get originalPost() {
                            return e(g)
                        },
                        onClose: () => a(G, !1),
                        onRepost: A
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        P($e, E => {
            e(G) && E(lt)
        }
        )
    }
    var $ = c($e, 2);
    {
        var ae = E => {
            Na(E, {
                children: (_e, De) => {
                    yc(_e, {
                        get isOpen() {
                            return e(B)
                        },
                        get postId() {
                            return e(I)
                        },
                        onClose: T
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        P($, E => {
            e(B) && e(I) && E(ae)
        }
        )
    }
    D( () => {
        ie = he(O, 1, "post-container svelte-cvb24n", null, ie, {
            deleting: e(W),
            highlighted: d()
        }),
        V(O, "data-post-id", e(l))
    }
    ),
    v(n, S),
    Je()
}
it(["click", "keydown"]);
var mo = p('<div><span class="item-deleted-text svelte-4g9e7z"> </span> <button class="item-restore-btn svelte-4g9e7z"> </button></div>')
  , wo = p('<a class="item-avatar-wrapper svelte-4g9e7z"><!></a>')
  , bo = p('<div class="item-avatar-wrapper svelte-4g9e7z"><!></div>')
  , ko = p('<a class="item-author svelte-4g9e7z"> </a>')
  , yo = p('<span class="item-author svelte-4g9e7z"> </span>')
  , xo = p('<button class="item-dropdown-item delete svelte-4g9e7z"><!> <span class="svelte-4g9e7z"></span></button>')
  , zo = p('<button class="item-dropdown-item svelte-4g9e7z"><!> <span class="svelte-4g9e7z"></span></button>')
  , Co = p('<div class="item-dropdown svelte-4g9e7z" role="menu" tabindex="-1"><!> <!></div>')
  , Po = p('<div class="item-menu svelte-4g9e7z"><button aria-label=""><!></button> <!></div>')
  , Mo = p('<a class="item-mention svelte-4g9e7z"> </a> ', 1)
  , jo = p('<span class="item-mention svelte-4g9e7z"> </span> ', 1)
  , qo = p('<div class="item-voice-messages svelte-4g9e7z"></div>')
  , So = p('<button class="item-attachment svelte-4g9e7z"><img class="svelte-4g9e7z"/></button>')
  , Io = p("<div></div>")
  , To = p("<!> <!>", 1)
  , Do = p('<span class="svelte-4g9e7z"> </span>')
  , Ro = p('<div><!> <div class="item-content svelte-4g9e7z"><div class="item-header svelte-4g9e7z"><div class="item-header-left svelte-4g9e7z"><!> <!> <!></div> <!></div> <!> <p class="item-text svelte-4g9e7z"><!><!></p> <!> <div class="item-actions svelte-4g9e7z"><button class="item-action-btn svelte-4g9e7z"><span class="svelte-4g9e7z"></span></button> <button><!> <!></button></div></div></div>')
  , Ao = p("<!> <!>", 1);
function Ss(n, t) {
    Qe(t, !0);
    const r = () => bt(za, "$currentUser", _)
      , s = () => bt(gs, "$isAuthenticated", _)
      , d = () => bt(Fs, "$isMobile", _)
      , [_,l] = aa();
    let u = ue(t, "likes", 3, 0)
      , f = ue(t, "isLiked", 3, !1)
      , b = ue(t, "replyTo", 3, null)
      , x = ue(t, "variant", 3, "comment")
      , C = ue(t, "canDelete", 3, !1)
      , h = ue(t, "attachments", 19, () => [])
      , w = ue(t, "isHighlighted", 3, !1)
      , y = k(!1)
      , j = k(0);
    function q(z) {
        a(j, z, !0),
        a(y, !0)
    }
    function R() {
        a(y, !1)
    }
    let L = k(pt(f()))
      , N = k(0)
      , H = K( () => u() + e(N))
      , ee = k(!1)
      , te = Promise.resolve()
      , W = k(!1)
      , Y = k(!1)
      , de = k(!1)
      , ce = k(!1)
      , se = K( () => r()?.id === t.author.id)
      , G = K( () => x() === "comment" ? 32 : 24)
      , B = K( () => x() === "reply")
      , I = K( () => {
        const z = t.author.username || t.author.id;
        return z ? `/${z}` : null
    }
    )
      , U = K( () => {
        if (!b())
            return null;
        const z = b().username || b().id;
        return z ? `/${z}` : null
    }
    )
      , Z = K( () => {
        if (!t.content)
            return "";
        if (!b())
            return t.content;
        const z = [`@${b().displayName},`, `@${b().displayName} `, `@${b().username},`, `@${b().username} `].filter(Boolean);
        for (const S of z)
            if (t.content.startsWith(S))
                return t.content.slice(S.length).trimStart();
        return t.content
    }
    );
    function X(z) {
        if (z.stopPropagation(),
        !wa())
            return;
        a(ee, !0);
        const S = !e(L);
        a(L, S),
        a(N, S ? e(N) + 1 : e(N) - 1, !0),
        te = te.then(async () => {
            !(S ? await pa.likeComment(t.id) : await pa.unlikeComment(t.id)).success && e(L) === S && (a(L, !S),
            a(N, S ? e(N) - 1 : e(N) + 1, !0))
        }
        )
    }
    function me(z) {
        z.stopPropagation(),
        wa() && t.onReplyClick?.()
    }
    function pe(z) {
        z.stopPropagation(),
        a(W, !e(W))
    }
    function ze() {
        a(W, !1)
    }
    async function fe(z) {
        if (z.stopPropagation(),
        !e(Y)) {
            a(Y, !0),
            a(W, !1);
            try {
                (await pa.deleteComment(t.id)).success && (a(de, !0),
                t.onDelete?.())
            } catch {} finally {
                a(Y, !1)
            }
        }
    }
    async function Q() {
        if (!e(ce)) {
            a(ce, !0);
            try {
                (await pa.restoreComment(t.id)).success && (a(de, !1),
                t.onRestore?.())
            } catch {} finally {
                a(ce, !1)
            }
        }
    }
    function F(z) {
        z.stopPropagation(),
        a(W, !1),
        t.onReport?.()
    }
    var J = Ao()
      , A = we(J);
    {
        var M = z => {
            var S = mo();
            let O;
            var ie = i(S)
              , ge = i(ie, !0);
            o(ie);
            var ve = c(ie, 2);
            ve.__click = Q;
            var be = i(ve, !0);
            o(ve),
            o(S),
            D( () => {
                O = he(S, 1, "item-deleted svelte-4g9e7z", null, O, {
                    "is-reply": e(B)
                }),
                re(ge, e(B) ? " ." : " ."),
                ve.disabled = e(ce),
                re(be, e(ce) ? "..." : "")
            }
            ),
            v(z, S)
        }
          , T = z => {
            var S = Ro();
            let O;
            var ie = i(S);
            {
                var ge = ne => {
                    var le = wo()
                      , Pe = i(le);
                    ea(Pe, {
                        get avatar() {
                            return t.author.avatar
                        },
                        get name() {
                            return t.author.displayName
                        },
                        get size() {
                            return e(G)
                        }
                    }),
                    o(le),
                    D( () => V(le, "href", e(I))),
                    v(ne, le)
                }
                  , ve = ne => {
                    var le = bo()
                      , Pe = i(le);
                    ea(Pe, {
                        get avatar() {
                            return t.author.avatar
                        },
                        get name() {
                            return t.author.displayName
                        },
                        get size() {
                            return e(G)
                        }
                    }),
                    o(le),
                    v(ne, le)
                }
                ;
                P(ie, ne => {
                    e(I) ? ne(ge) : ne(ve, !1)
                }
                )
            }
            var be = c(ie, 2)
              , Te = i(be)
              , Ge = i(Te)
              , $e = i(Ge);
            {
                var lt = ne => {
                    var le = ko()
                      , Pe = i(le, !0);
                    o(le),
                    D( () => {
                        V(le, "href", e(I)),
                        re(Pe, t.author.displayName)
                    }
                    ),
                    v(ne, le)
                }
                  , $ = ne => {
                    var le = yo()
                      , Pe = i(le, !0);
                    o(le),
                    D( () => re(Pe, t.author.displayName)),
                    v(ne, le)
                }
                ;
                P($e, ne => {
                    e(I) ? ne(lt) : ne($, !1)
                }
                )
            }
            var ae = c($e, 2);
            {
                var E = ne => {
                    {
                        let le = K( () => e(B) ? 12 : 14);
                        ks(ne, {
                            get size() {
                                return e(le)
                            }
                        })
                    }
                }
                ;
                P(ae, ne => {
                    t.author.verified && ne(E)
                }
                )
            }
            var _e = c(ae, 2);
            {
                var De = ne => {
                    Fa(ne, {
                        get pin() {
                            return t.author.pin
                        }
                    })
                }
                ;
                P(_e, ne => {
                    t.author.pin && ne(De)
                }
                )
            }
            o(Ge);
            var Le = c(Ge, 2);
            {
                var Xe = ne => {
                    var le = Po()
                      , Pe = i(le);
                    let dt;
                    Pe.__click = pe;
                    var vt = i(Pe);
                    {
                        let Wt = K( () => e(B) ? 14 : 16);
                        hs(vt, {
                            get size() {
                                return e(Wt)
                            }
                        })
                    }
                    o(Pe);
                    var Pt = c(Pe, 2);
                    {
                        var St = Wt => {
                            var gt = Co();
                            gt.__click = Lt => Lt.stopPropagation();
                            var Nt = i(gt);
                            {
                                var sa = Lt => {
                                    var Mt = xo();
                                    Mt.__click = fe;
                                    var Yt = i(Mt);
                                    {
                                        let Ca = K( () => e(B) ? 14 : 16);
                                        ws(Yt, {
                                            get size() {
                                                return e(Ca)
                                            }
                                        })
                                    }
                                    _t(2),
                                    o(Mt),
                                    v(Lt, Mt)
                                }
                                ;
                                P(Nt, Lt => {
                                    (e(se) || C()) && Lt(sa)
                                }
                                )
                            }
                            var oa = c(Nt, 2);
                            {
                                var ia = Lt => {
                                    var Mt = zo();
                                    Mt.__click = F;
                                    var Yt = i(Mt);
                                    {
                                        let Ca = K( () => e(B) ? 14 : 16);
                                        ms(Yt, {
                                            get size() {
                                                return e(Ca)
                                            }
                                        })
                                    }
                                    _t(2),
                                    o(Mt),
                                    v(Lt, Mt)
                                }
                                ;
                                P(oa, Lt => {
                                    !e(se) && !C() && Lt(ia)
                                }
                                )
                            }
                            o(gt),
                            qa(gt, (Lt, Mt) => rs?.(Lt, Mt), () => ze),
                            v(Wt, gt)
                        }
                        ;
                        P(Pt, Wt => {
                            e(W) && Wt(St)
                        }
                        )
                    }
                    o(le),
                    D( () => dt = he(Pe, 1, "item-menu-btn svelte-4g9e7z", null, dt, {
                        "is-mobile": d()
                    })),
                    v(ne, le)
                }
                ;
                P(Le, ne => {
                    s() && ne(Xe)
                }
                )
            }
            o(Te);
            var Ce = c(Te, 2);
            {
                var je = ne => {
                    Va(ne, {
                        get date() {
                            return t.time
                        },
                        class: "item-time"
                    })
                }
                ;
                P(Ce, ne => {
                    t.time && ne(je)
                }
                )
            }
            var ke = c(Ce, 2)
              , xe = i(ke);
            {
                var ye = ne => {
                    var le = Mo()
                      , Pe = we(le)
                      , dt = i(Pe);
                    o(Pe);
                    var vt = c(Pe, 1, !0);
                    vt.nodeValue = " ",
                    D( () => {
                        V(Pe, "href", e(U)),
                        re(dt, `@${b().displayName ?? ""},`)
                    }
                    ),
                    v(ne, le)
                }
                  , Ne = ne => {
                    var le = Ve()
                      , Pe = we(le);
                    {
                        var dt = vt => {
                            var Pt = jo()
                              , St = we(Pt)
                              , Wt = i(St);
                            o(St);
                            var gt = c(St, 1, !0);
                            gt.nodeValue = " ",
                            D( () => re(Wt, `@${b().displayName ?? ""},`)),
                            v(vt, Pt)
                        }
                        ;
                        P(Pe, vt => {
                            b() && vt(dt)
                        }
                        , !0)
                    }
                    v(ne, le)
                }
                ;
                P(xe, ne => {
                    b() && e(U) ? ne(ye) : ne(Ne, !1)
                }
                )
            }
            var He = c(xe);
            Dl(He, {
                get content() {
                    return e(Z)
                }
            }),
            o(ke);
            var ut = c(ke, 2);
            {
                var Be = ne => {
                    const le = K( () => h().filter(gt => gt.type === "audio"))
                      , Pe = K( () => h().filter(gt => gt.type !== "audio"));
                    var dt = To()
                      , vt = we(dt);
                    {
                        var Pt = gt => {
                            var Nt = qo();
                            ht(Nt, 21, () => e(le), Qt, (sa, oa) => {
                                Gl(sa, {
                                    get src() {
                                        return e(oa).url
                                    },
                                    get duration() {
                                        return e(oa).duration
                                    }
                                })
                            }
                            ),
                            o(Nt),
                            v(gt, Nt)
                        }
                        ;
                        P(vt, gt => {
                            e(le).length > 0 && gt(Pt)
                        }
                        )
                    }
                    var St = c(vt, 2);
                    {
                        var Wt = gt => {
                            var Nt = Io();
                            let sa;
                            ht(Nt, 21, () => e(Pe), Qt, (oa, ia, Lt) => {
                                var Mt = So();
                                Mt.__click = () => q(Lt);
                                var Yt = i(Mt);
                                o(Mt),
                                D( () => {
                                    V(Yt, "src", e(ia).thumbnailUrl || e(ia).url),
                                    V(Yt, "alt", e(ia).filename)
                                }
                                ),
                                v(oa, Mt)
                            }
                            ),
                            o(Nt),
                            D( () => sa = he(Nt, 1, "item-attachments svelte-4g9e7z", null, sa, {
                                single: e(Pe).length === 1
                            })),
                            v(gt, Nt)
                        }
                        ;
                        P(St, gt => {
                            e(Pe).length > 0 && gt(Wt)
                        }
                        )
                    }
                    v(ne, dt)
                }
                ;
                P(ut, ne => {
                    h() && h().length > 0 && ne(Be)
                }
                )
            }
            var oe = c(ut, 2)
              , qe = i(oe);
            qe.__click = me;
            var Se = c(qe, 2);
            Se.__click = X;
            let et;
            var yt = i(Se);
            ps(yt, {
                size: 14,
                get filled() {
                    return e(L)
                }
            });
            var xt = c(yt, 2);
            {
                var Ze = ne => {
                    var le = Do()
                      , Pe = i(le, !0);
                    o(le),
                    D(dt => re(Pe, dt), [ () => ha(e(H))]),
                    v(ne, le)
                }
                ;
                P(xt, ne => {
                    e(H) > 0 && ne(Ze)
                }
                )
            }
            o(Se),
            o(oe),
            o(be),
            o(S),
            D( () => {
                O = he(S, 1, "item svelte-4g9e7z", null, O, {
                    "is-reply": e(B),
                    deleting: e(Y),
                    highlighted: w()
                }),
                et = he(Se, 1, "item-action-btn like svelte-4g9e7z", null, et, {
                    liked: e(L),
                    animated: e(ee)
                })
            }
            ),
            v(z, S)
        }
        ;
        P(A, z => {
            e(de) ? z(M) : z(T, !1)
        }
        )
    }
    var g = c(A, 2);
    {
        var m = z => {
            {
                let S = K( () => h().map(O => ({
                    id: O.id,
                    type: O.type,
                    url: O.url,
                    thumbnailUrl: O.thumbnailUrl,
                    width: O.width,
                    height: O.height
                })));
                Js(z, {
                    get isOpen() {
                        return e(y)
                    },
                    get attachments() {
                        return e(S)
                    },
                    get initialIndex() {
                        return e(j)
                    },
                    onClose: R
                })
            }
        }
        ;
        P(g, z => {
            e(y) && h().length > 0 && z(m)
        }
        )
    }
    v(n, J),
    Je(),
    l()
}
it(["click"]);
var Lo = p('<a class="replying-to-name svelte-ome0nc"> </a>')
  , Uo = p('<span class="replying-to-name svelte-ome0nc"> </span>')
  , Bo = p('<div class="replying-to svelte-ome0nc"><span class="replying-to-label svelte-ome0nc"> </span> <!> <button class="replying-to-clear svelte-ome0nc" aria-label=""><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>')
  , Oo = Ee('<svg class="spinner svelte-ome0nc" width="14" height="14" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg>')
  , Eo = p('<div class="comment-voice-preview svelte-ome0nc"><div class="voice-icon svelte-ome0nc"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path></svg></div> <span class="voice-duration svelte-ome0nc"> </span> <!> <button class="voice-remove-btn svelte-ome0nc"><!></button></div>')
  , No = p('<div class="upload-overlay svelte-ome0nc"><svg class="spinner svelte-ome0nc" width="16" height="16" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg></div>')
  , Ho = p('<div class="comment-preview-item svelte-ome0nc"><img alt=""/> <!> <button class="comment-remove-media-btn svelte-ome0nc"><!></button></div>')
  , Fo = p('<div class="comment-previews svelte-ome0nc"></div>')
  , Vo = p('<div class="comment-sending svelte-ome0nc"><div class="comment-sending-icon svelte-ome0nc"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line></svg></div> <span class="comment-sending-text svelte-ome0nc">...</span> <svg class="spinner svelte-ome0nc" width="16" height="16" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg></div>')
  , Zo = p('<button class="comment-attach-btn svelte-ome0nc" title=" "><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg></button> <textarea class="comment-input-field svelte-ome0nc" rows="1"></textarea>', 1)
  , Wo = Ee('<svg class="spinner svelte-ome0nc" width="16" height="16" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg>')
  , Yo = Ee('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>')
  , Xo = p('<button class="comment-submit svelte-ome0nc" aria-label=""><!></button>')
  , Ko = p('<button class="comment-submit comment-submit--mic svelte-ome0nc" aria-label=" "><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line></svg></button>')
  , Go = p('<div class="comment-input-wrapper svelte-ome0nc"><!> <!> <form class="comment-input-form svelte-ome0nc"><input type="file" class="comment-file-input svelte-ome0nc" accept="image/*" multiple/> <!> <!></form></div>');
function Gs(n, t) {
    Qe(t, !0);
    const r = () => bt(za, "$currentUser", s)
      , [s,d] = aa()
      , _ = 1;
    let l = ue(t, "replyingTo", 3, null), u = ue(t, "isSubmitting", 3, !1), f = K( () => !t.postId && !!t.onSubmit), b = k(""), x = k(!1), C = k(null), h = k(pt([])), w, y = k(!1), j = k(!1), q = k(!1), R, L = K( () => e(h).some(g => g.isUploading)), N = K( () => e(h).filter(g => g.uploaded).map(g => g.uploaded)), H = K( () => e(h).length < _ && !e(y)), ee = K( () => e(h).some(g => g.isAudio)), te = K( () => e(b).trim().length > 0 || e(N).length > 0), W = K( () => !e(b).trim() && e(N).length === 0 || u() || e(x) || e(L)), Y = K( () => {
        if (!l())
            return null;
        const g = l().username || l().authorId;
        return g ? `/${g}` : null
    }
    );
    function de(g) {
        const m = g.target;
        a(b, m.value, !0),
        m.style.height = "auto",
        m.style.height = `${Math.min(m.scrollHeight, 150)}px`
    }
    async function ce(g) {
        const z = g.target.files;
        if (!z || z.length === 0)
            return;
        const S = _ - e(h).length
          , O = Array.from(z).slice(0, S);
        for (const ie of O) {
            const ge = crypto.randomUUID()
              , ve = new FileReader;
            ve.onload = be => {
                const Te = be.target?.result
                  , Ge = {
                    id: ge,
                    preview: Te,
                    file: ie,
                    isUploading: !0
                };
                a(h, [...e(h), Ge], !0),
                G(ge, ie)
            }
            ,
            ve.readAsDataURL(ie)
        }
        w && (w.value = "")
    }
    function se(g) {
        const m = g.clipboardData?.items;
        if (!m)
            return;
        const z = _ - e(h).length;
        if (z <= 0)
            return;
        const S = [];
        for (let O = 0; O < m.length && S.length < z; O++) {
            const ie = m[O];
            if (ie.type.startsWith("image/")) {
                const ge = ie.getAsFile();
                ge && S.push(ge)
            }
        }
        if (S.length !== 0) {
            g.preventDefault();
            for (const O of S) {
                const ie = crypto.randomUUID()
                  , ge = new FileReader;
                ge.onload = ve => {
                    const be = ve.target?.result
                      , Te = {
                        id: ie,
                        preview: be,
                        file: O,
                        isUploading: !0
                    };
                    a(h, [...e(h), Te], !0),
                    G(ie, O)
                }
                ,
                ge.readAsDataURL(O)
            }
        }
    }
    async function G(g, m) {
        const z = await ma.uploadFile(m);
        a(h, e(h).map(S => {
            if (S.id === g) {
                if (z.error)
                    return z.errorCode === "CONTENT_MODERATION_FAILED" ? (ra.show(z.error),
                    null) : {
                        ...S,
                        isUploading: !1,
                        error: z.error
                    };
                if (z.data)
                    return {
                        ...S,
                        isUploading: !1,
                        uploaded: z.data
                    }
            }
            return S
        }
        ).filter(Boolean), !0)
    }
    async function B(g) {
        const m = e(h).find(z => z.id === g);
        m?.uploaded && await ma.deleteFile(m.uploaded.id),
        a(h, e(h).filter(z => z.id !== g), !0)
    }
    function I() {
        a(j, !0),
        setTimeout( () => {
            R?.startRecording()
        }
        , 0)
    }
    function U() {
        a(y, !0)
    }
    async function Z(g, m) {
        a(y, !1),
        a(j, !1),
        a(q, !0);
        const z = new File([g],`voice_${Date.now()}.webm`,{
            type: g.type
        });
        try {
            const S = await ma.uploadFile(z);
            if (S.error || !S.data) {
                S.errorCode === "CONTENT_MODERATION_FAILED" && ra.show(S.error || "    "),
                a(q, !1);
                return
            }
            if (e(f))
                t.onSubmit?.("", l(), [S.data.id]);
            else if (t.postId) {
                const O = await pa.createComment(t.postId, {
                    attachmentIds: [S.data.id]
                });
                if (O.error) {
                    ra.show(O.error),
                    a(q, !1);
                    return
                }
                if (O.data) {
                    const ie = {
                        id: O.data.id,
                        content: O.data.content || "",
                        author: O.data.author.displayName,
                        authorId: O.data.author.id,
                        username: O.data.author.username || "",
                        avatar: O.data.author.avatar || "",
                        verified: O.data.author.verified,
                        pin: O.data.author.pin || null,
                        time: O.data.createdAt || new Date().toISOString(),
                        likes: 0,
                        replies: [],
                        repliesCount: 0,
                        isLiked: !1,
                        attachments: O.data.attachments || []
                    };
                    t.onCommentAdded?.(ie)
                }
            }
        } catch {} finally {
            a(q, !1)
        }
    }
    function X() {
        a(y, !1),
        a(j, !1)
    }
    function me(g) {
        const m = Math.floor(g / 60)
          , z = Math.floor(g % 60);
        return `${m}:${z.toString().padStart(2, "0")}`
    }
    function pe(g) {
        g.key === "Enter" && !g.shiftKey && !("ontouchstart"in window) && (g.preventDefault(),
        ze())
    }
    async function ze(g) {
        if (g?.stopPropagation(),
        e(W) || !r())
            return;
        const m = e(b).trim()
          , z = e(N).length > 0 ? e(N).map(S => S.id) : void 0;
        if (e(f))
            t.onSubmit?.(m, l(), z),
            a(b, ""),
            a(h, [], !0),
            e(C) && (e(C).style.height = "auto");
        else if (t.postId) {
            a(x, !0),
            a(b, "");
            try {
                const S = await pa.createComment(t.postId, {
                    content: m,
                    attachmentIds: z
                });
                if (S.error) {
                    ra.show(S.error),
                    a(b, m, !0),
                    a(x, !1);
                    return
                }
                if (S.data) {
                    const O = {
                        id: S.data.id,
                        content: S.data.content || "",
                        author: S.data.author.displayName,
                        authorId: S.data.author.id,
                        username: S.data.author.username || "",
                        avatar: S.data.author.avatar || "",
                        verified: S.data.author.verified,
                        pin: S.data.author.pin || null,
                        time: S.data.createdAt || new Date().toISOString(),
                        likes: 0,
                        replies: [],
                        repliesCount: 0,
                        isLiked: !1,
                        attachments: S.data.attachments || []
                    };
                    a(h, [], !0),
                    t.onCommentAdded?.(O)
                }
            } catch {
                a(b, m, !0)
            } finally {
                a(x, !1)
            }
        }
    }
    function fe() {
        setTimeout( () => {
            e(C)?.focus()
        }
        , 0)
    }
    function Q() {
        a(b, ""),
        a(h, [], !0),
        e(C) && (e(C).style.height = "auto")
    }
    var F = {
        focus: fe,
        clear: Q
    }
      , J = Ve()
      , A = we(J);
    {
        var M = g => {
            var m = Go()
              , z = i(m);
            {
                var S = ae => {
                    var E = Bo()
                      , _e = c(i(E), 2);
                    {
                        var De = Ce => {
                            var je = Lo()
                              , ke = i(je, !0);
                            o(je),
                            D( () => {
                                V(je, "href", e(Y)),
                                re(ke, l().author)
                            }
                            ),
                            v(Ce, je)
                        }
                          , Le = Ce => {
                            var je = Uo()
                              , ke = i(je, !0);
                            o(je),
                            D( () => re(ke, l().author)),
                            v(Ce, je)
                        }
                        ;
                        P(_e, Ce => {
                            e(Y) ? Ce(De) : Ce(Le, !1)
                        }
                        )
                    }
                    var Xe = c(_e, 2);
                    Xe.__click = () => t.onClearReplyingTo?.(),
                    o(E),
                    v(ae, E)
                }
                ;
                P(z, ae => {
                    l() && ae(S)
                }
                )
            }
            var O = c(z, 2);
            {
                var ie = ae => {
                    var E = Fo();
                    ht(E, 21, () => e(h), _e => _e.id, (_e, De) => {
                        var Le = Ve()
                          , Xe = we(Le);
                        {
                            var Ce = ke => {
                                var xe = Eo()
                                  , ye = c(i(xe), 2)
                                  , Ne = i(ye, !0);
                                o(ye);
                                var He = c(ye, 2);
                                {
                                    var ut = qe => {
                                        var Se = Oo();
                                        v(qe, Se)
                                    }
                                    ;
                                    P(He, qe => {
                                        e(De).isUploading && qe(ut)
                                    }
                                    )
                                }
                                var Be = c(He, 2);
                                Be.__click = () => B(e(De).id);
                                var oe = i(Be);
                                ya(oe, {
                                    size: 10
                                }),
                                o(Be),
                                o(xe),
                                D(qe => {
                                    re(Ne, qe),
                                    Be.disabled = e(De).isUploading
                                }
                                , [ () => me(e(De).duration || 0)]),
                                v(ke, xe)
                            }
                              , je = ke => {
                                var xe = Ho()
                                  , ye = i(xe);
                                let Ne;
                                var He = c(ye, 2);
                                {
                                    var ut = qe => {
                                        var Se = No();
                                        v(qe, Se)
                                    }
                                    ;
                                    P(He, qe => {
                                        e(De).isUploading && qe(ut)
                                    }
                                    )
                                }
                                var Be = c(He, 2);
                                Be.__click = () => B(e(De).id);
                                var oe = i(Be);
                                ya(oe, {
                                    size: 10
                                }),
                                o(Be),
                                o(xe),
                                D( () => {
                                    V(ye, "src", e(De).preview),
                                    Ne = he(ye, 1, "svelte-ome0nc", null, Ne, {
                                        uploading: e(De).isUploading
                                    }),
                                    Be.disabled = e(De).isUploading
                                }
                                ),
                                v(ke, xe)
                            }
                            ;
                            P(Xe, ke => {
                                e(De).isAudio ? ke(Ce) : ke(je, !1)
                            }
                            )
                        }
                        v(_e, Le)
                    }
                    ),
                    o(E),
                    v(ae, E)
                }
                ;
                P(O, ae => {
                    e(h).length > 0 && ae(ie)
                }
                )
            }
            var ge = c(O, 2)
              , ve = i(ge);
            ve.__change = ce,
            kt(ve, ae => w = ae, () => w);
            var be = c(ve, 2);
            {
                var Te = ae => {
                    var E = Vo();
                    v(ae, E)
                }
                  , Ge = ae => {
                    var E = Ve()
                      , _e = we(E);
                    {
                        var De = Le => {
                            var Xe = Zo()
                              , Ce = we(Xe);
                            Ce.__click = () => w?.click();
                            var je = c(Ce, 2);
                            ja(je),
                            je.__input = de,
                            je.__keydown = pe,
                            kt(je, ke => a(C, ke), () => e(C)),
                            D( () => {
                                Ce.disabled = !e(H) || u() || e(x) || e(ee),
                                La(je, e(b)),
                                V(je, "placeholder", e(f) ? " ..." : " ..."),
                                je.disabled = u() || e(x)
                            }
                            ),
                            Zt("paste", je, se),
                            v(Le, Xe)
                        }
                        ;
                        P(_e, Le => {
                            !e(y) && !e(j) && Le(De)
                        }
                        , !0)
                    }
                    v(ae, E)
                }
                ;
                P(be, ae => {
                    e(q) ? ae(Te) : ae(Ge, !1)
                }
                )
            }
            var $e = c(be, 2);
            {
                var lt = ae => {
                    kt(Fl(ae, {
                        onRecordingStart: U,
                        onRecordingComplete: Z,
                        onCancel: X
                    }), E => R = E, () => R)
                }
                  , $ = ae => {
                    var E = Ve()
                      , _e = we(E);
                    {
                        var De = Le => {
                            var Xe = Ve()
                              , Ce = we(Xe);
                            {
                                var je = xe => {
                                    var ye = Xo();
                                    ye.__click = ze;
                                    var Ne = i(ye);
                                    {
                                        var He = Be => {
                                            var oe = Wo();
                                            v(Be, oe)
                                        }
                                          , ut = Be => {
                                            var oe = Yo();
                                            v(Be, oe)
                                        }
                                        ;
                                        P(Ne, Be => {
                                            u() || e(x) ? Be(He) : Be(ut, !1)
                                        }
                                        )
                                    }
                                    o(ye),
                                    D( () => ye.disabled = e(W)),
                                    v(xe, ye)
                                }
                                  , ke = xe => {
                                    var ye = Ko();
                                    ye.__click = I,
                                    D( () => ye.disabled = u() || e(x)),
                                    v(xe, ye)
                                }
                                ;
                                P(Ce, xe => {
                                    e(te) ? xe(je) : xe(ke, !1)
                                }
                                )
                            }
                            v(Le, Xe)
                        }
                        ;
                        P(_e, Le => {
                            e(q) || Le(De)
                        }
                        , !0)
                    }
                    v(ae, E)
                }
                ;
                P($e, ae => {
                    e(y) || e(j) ? ae(lt) : ae($, !1)
                }
                )
            }
            o(ge),
            o(m),
            Zt("submit", ge, ae => {
                ae.preventDefault(),
                ae.stopPropagation()
            }
            ),
            v(g, m)
        }
        ;
        P(A, g => {
            r() && g(M)
        }
        )
    }
    v(n, J);
    var T = Je(F);
    return d(),
    T
}
it(["click", "change", "input", "keydown"]);
var Qo = p('<hr class="reply-divider svelte-1m8hxxk"/>')
  , Jo = p('<hr class="reply-divider svelte-1m8hxxk"/>')
  , $o = p("<div><!></div> <!>", 1)
  , ei = p('<button class="show-more-replies svelte-1m8hxxk"> </button>')
  , ti = p('<div class="replies-container svelte-1m8hxxk"><!> <!> <!> <!></div>')
  , ai = p('<div class="comment svelte-1m8hxxk"><!> <!></div>');
function si(n, t) {
    Qe(t, !0);
    let r = ue(t, "canDelete", 3, !1)
      , s = ue(t, "isHighlighted", 3, !1)
      , d = k(!1)
      , _ = k(!1)
      , l = k(pt(t.comment.replies ?? []))
      , u = k(pt(t.comment.repliesCount ?? t.comment.replies?.length ?? 0))
      , f = k(!1)
      , b = k(!1)
      , x = k(pt(new Set))
      , C = k(null)
      , h = k(null)
      , w = k(null)
      , y = k(null)
      , j = K( () => {
        if (e(f))
            return e(l);
        const G = e(l).slice(0, 1)
          , B = e(l).filter( (I, U) => U >= 1 && e(x).has(I.id));
        return [...G, ...B]
    }
    );
    async function q(G) {
        a(w, G || null, !0),
        a(d, !0),
        await vs(),
        e(C)?.focus()
    }
    function R() {
        a(w, null)
    }
    async function L() {
        if (wa() && !e(b)) {
            if (e(l).length >= e(u)) {
                a(f, !0);
                return
            }
            a(b, !0);
            try {
                const G = await pa.getReplies(t.comment.id, 1, 50, "oldest");
                if (!G.error && G.data) {
                    const B = G.data.replies || G.data.comments || [];
                    a(l, B.map(I => ({
                        id: I.id,
                        content: I.content,
                        author: I.author.displayName,
                        authorId: I.author.id,
                        username: I.author.username || null,
                        avatar: I.author.avatar || null,
                        verified: I.author.verified,
                        pin: I.author.pin || null,
                        time: I.createdAt,
                        likes: I.likesCount,
                        isLiked: I.isLiked,
                        replyTo: I.replyTo || null,
                        attachments: I.attachments || []
                    })), !0),
                    a(f, !0)
                }
            } catch {} finally {
                a(b, !1)
            }
        }
    }
    function N() {
        q({
            author: t.comment.author,
            authorId: t.comment.authorId,
            username: t.comment.username
        })
    }
    function H(G) {
        q({
            author: G.author,
            authorId: G.authorId,
            username: G.username
        })
    }
    function ee() {
        a(u, Math.max(0, e(u) - 1), !0)
    }
    function te() {
        Ra(u)
    }
    async function W(G, B, I) {
        if (!e(_)) {
            a(_, !0);
            try {
                const U = await pa.createReply(t.comment.id, {
                    content: G,
                    replyToUserId: B?.authorId,
                    attachmentIds: I
                });
                if (U.error) {
                    ra.show(U.error),
                    a(_, !1);
                    return
                }
                if (U.data) {
                    const Z = {
                        id: U.data.id,
                        content: U.data.content || "",
                        author: U.data.author.displayName,
                        authorId: U.data.author.id,
                        username: U.data.author.username || null,
                        avatar: U.data.author.avatar || "",
                        verified: U.data.author.verified,
                        pin: U.data.author.pin || null,
                        time: U.data.createdAt || new Date().toISOString(),
                        likes: 0,
                        isLiked: !1,
                        replyTo: B ? {
                            id: B.authorId || "",
                            username: B.username,
                            displayName: B.author
                        } : null,
                        attachments: U.data.attachments || []
                    };
                    a(l, [...e(l), Z], !0),
                    Ra(u),
                    a(x, new Set([...e(x), Z.id]), !0),
                    a(d, !1),
                    a(w, null),
                    e(C)?.clear(),
                    a(h, Z.id, !0),
                    await vs();
                    const X = e(y)?.querySelector(`[data-reply-id="${Z.id}"]`);
                    X && X.scrollIntoView({
                        behavior: "smooth",
                        block: "center"
                    }),
                    setTimeout( () => {
                        a(h, null)
                    }
                    , 2500)
                }
            } catch {} finally {
                a(_, !1)
            }
        }
    }
    var Y = ai()
      , de = i(Y);
    {
        let G = K( () => ({
            id: t.comment.authorId || "",
            displayName: t.comment.author,
            username: t.comment.username,
            avatar: t.comment.avatar,
            verified: t.comment.verified,
            pin: t.comment.pin || null
        }));
        Ss(de, {
            get id() {
                return t.comment.id
            },
            get content() {
                return t.comment.content
            },
            get author() {
                return e(G)
            },
            get time() {
                return t.comment.time
            },
            get likes() {
                return t.comment.likes
            },
            get isLiked() {
                return t.comment.isLiked
            },
            variant: "comment",
            get canDelete() {
                return r()
            },
            get attachments() {
                return t.comment.attachments
            },
            get isHighlighted() {
                return s()
            },
            onReplyClick: N,
            get onDelete() {
                return t.onDelete
            },
            onReport: () => t.onReport?.(t.comment.id)
        })
    }
    var ce = c(de, 2);
    {
        var se = G => {
            var B = ti()
              , I = i(B);
            {
                var U = fe => {
                    var Q = Qo();
                    v(fe, Q)
                }
                ;
                P(I, fe => {
                    e(l).length > 0 && fe(U)
                }
                )
            }
            var Z = c(I, 2);
            ht(Z, 19, () => e(j), fe => fe.id, (fe, Q, F) => {
                var J = $o()
                  , A = we(J)
                  , M = i(A);
                {
                    let m = K( () => ({
                        id: e(Q).authorId || "",
                        displayName: e(Q).author,
                        username: e(Q).username,
                        avatar: e(Q).avatar,
                        verified: e(Q).verified,
                        pin: e(Q).pin || null
                    }))
                      , z = K( () => e(h) === e(Q).id);
                    Ss(M, {
                        get id() {
                            return e(Q).id
                        },
                        get content() {
                            return e(Q).content
                        },
                        get author() {
                            return e(m)
                        },
                        get time() {
                            return e(Q).time
                        },
                        get likes() {
                            return e(Q).likes
                        },
                        get isLiked() {
                            return e(Q).isLiked
                        },
                        get replyTo() {
                            return e(Q).replyTo
                        },
                        variant: "reply",
                        get canDelete() {
                            return r()
                        },
                        get attachments() {
                            return e(Q).attachments
                        },
                        get isHighlighted() {
                            return e(z)
                        },
                        onReplyClick: () => H(e(Q)),
                        onDelete: ee,
                        onRestore: te,
                        onReport: () => t.onReport?.(e(Q).id)
                    })
                }
                o(A);
                var T = c(A, 2);
                {
                    var g = m => {
                        var z = Jo();
                        v(m, z)
                    }
                    ;
                    P(T, m => {
                        e(F) < e(j).length - 1 && m(g)
                    }
                    )
                }
                D( () => V(A, "data-reply-id", e(Q).id)),
                v(fe, J)
            }
            );
            var X = c(Z, 2);
            {
                var me = fe => {
                    const Q = K( () => e(u) - e(j).length);
                    var F = ei();
                    F.__click = L;
                    var J = i(F, !0);
                    o(F),
                    D( () => {
                        F.disabled = e(b),
                        re(J, e(b) ? "..." : `  ${e(Q)} ${e(Q) === 1 ? "" : e(Q) < 5 ? "" : ""}`)
                    }
                    ),
                    v(fe, F)
                }
                ;
                P(X, fe => {
                    !e(f) && e(u) > e(j).length && fe(me)
                }
                )
            }
            var pe = c(X, 2);
            {
                var ze = fe => {
                    kt(Gs(fe, {
                        get replyingTo() {
                            return e(w)
                        },
                        get isSubmitting() {
                            return e(_)
                        },
                        onSubmit: W,
                        onClearReplyingTo: R
                    }), Q => a(C, Q, !0), () => e(C))
                }
                ;
                P(pe, fe => {
                    e(d) && fe(ze)
                }
                )
            }
            o(B),
            kt(B, fe => a(y, fe), () => e(y)),
            v(G, B)
        }
        ;
        P(ce, G => {
            (e(l).length > 0 || e(d)) && G(se)
        }
        )
    }
    o(Y),
    v(n, Y),
    Je()
}
it(["click"]);
var ni = p('<span class="report-modal__spinner svelte-1ozcdhh"></span> ...', 1)
  , ri = p('<button class="report-modal__cancel svelte-1ozcdhh"></button> <button class="report-modal__submit svelte-1ozcdhh"><!></button>', 1)
  , oi = p('<div class="report-modal__success svelte-1ozcdhh"><svg class="report-modal__success-icon svelte-1ozcdhh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M9 12l2 2 4-4"></path></svg> <p class="report-modal__success-text svelte-1ozcdhh"> </p> <p class="report-modal__success-subtext svelte-1ozcdhh">,    </p></div>')
  , ii = p('<span class="report-modal__reason-dot svelte-1ozcdhh"></span>')
  , li = p('<button><span class="report-modal__reason-radio svelte-1ozcdhh"><!></span> <span> </span></button>')
  , ci = p('<div class="report-modal__content svelte-1ozcdhh"><p class="report-modal__subtitle svelte-1ozcdhh">  </p> <div class="report-modal__reasons svelte-1ozcdhh"></div> <div class="report-modal__description svelte-1ozcdhh"><label for="report-description" class="report-modal__label svelte-1ozcdhh"> </label> <textarea id="report-description" placeholder=" ,      ..." class="report-modal__textarea svelte-1ozcdhh" rows="3"></textarea></div></div>');
function Nc(n, t) {
    Qe(t, !0);
    const r = C => {
        var h = ri()
          , w = we(h);
        w.__click = f;
        var y = c(w, 2);
        y.__click = b;
        var j = i(y);
        {
            var q = L => {
                var N = ni();
                _t(),
                v(L, N)
            }
              , R = L => {
                var N = Aa("");
                v(L, N)
            }
            ;
            P(j, L => {
                e(_) ? L(q) : L(R, !1)
            }
            )
        }
        o(y),
        D( () => {
            w.disabled = e(_),
            y.disabled = !e(s) || e(_)
        }
        ),
        v(C, h)
    }
    ;
    let s = k(null)
      , d = k("")
      , _ = k(!1)
      , l = k(!1);
    const u = [{
        id: "spam",
        label: ""
    }, {
        id: "violence",
        label: "   "
    }, {
        id: "hate",
        label: "  "
    }, {
        id: "adult",
        label: "  "
    }, {
        id: "fraud",
        label: "  "
    }, {
        id: "other",
        label: ""
    }];
    function f() {
        a(s, null),
        a(d, ""),
        a(l, !1),
        t.onClose()
    }
    async function b(C) {
        if (C.preventDefault(),
        !(!e(s) || e(_))) {
            a(_, !0);
            try {
                await t.onSubmit(e(s), e(d)),
                a(l, !0),
                setTimeout( () => {
                    f()
                }
                , 1500)
            } catch {
                a(_, !1)
            }
        }
    }
    function x(C) {
        const h = C.target;
        a(d, h.value, !0),
        h.style.height = "auto",
        h.style.height = `${Math.min(h.scrollHeight, 150)}px`
    }
    {
        let C = K( () => e(l) ? void 0 : r);
        os(n, {
            get isOpen() {
                return t.isOpen
            },
            onClose: f,
            title: "",
            maxWidth: "440px",
            priority: !0,
            get footer() {
                return e(C)
            },
            children: (h, w) => {
                var y = Ve()
                  , j = we(y);
                {
                    var q = L => {
                        var N = oi();
                        v(L, N)
                    }
                      , R = L => {
                        var N = ci()
                          , H = c(i(N), 2);
                        ht(H, 21, () => u, Qt, (W, Y) => {
                            var de = li();
                            de.__click = () => a(s, e(Y).id, !0);
                            let ce;
                            var se = i(de)
                              , G = i(se);
                            {
                                var B = Z => {
                                    var X = ii();
                                    v(Z, X)
                                }
                                ;
                                P(G, Z => {
                                    e(s) === e(Y).id && Z(B)
                                }
                                )
                            }
                            o(se);
                            var I = c(se, 2)
                              , U = i(I, !0);
                            o(I),
                            o(de),
                            D( () => {
                                ce = he(de, 1, "report-modal__reason svelte-1ozcdhh", null, ce, {
                                    selected: e(s) === e(Y).id
                                }),
                                de.disabled = e(_),
                                re(U, e(Y).label)
                            }
                            ),
                            v(W, de)
                        }
                        ),
                        o(H);
                        var ee = c(H, 2)
                          , te = c(i(ee), 2);
                        ja(te),
                        te.__input = x,
                        o(ee),
                        o(N),
                        D( () => {
                            La(te, e(d)),
                            te.disabled = e(_)
                        }
                        ),
                        v(L, N)
                    }
                    ;
                    P(j, L => {
                        e(l) ? L(q) : L(R, !1)
                    }
                    )
                }
                v(h, y)
            }
            ,
            $$slots: {
                default: !0
            }
        })
    }
    Je()
}
it(["click", "input"]);
var di = p('<button class="edit-modal__cancel svelte-jsnbd9"></button> <button class="edit-modal__submit svelte-jsnbd9"> </button>', 1)
  , vi = p('<div class="edit-modal__error svelte-jsnbd9"> </div>')
  , ui = p('<div class="edit-modal__content svelte-jsnbd9"><!> <textarea placeholder=" ?" class="edit-modal__textarea svelte-jsnbd9" rows="4"></textarea></div>');
function fi(n, t) {
    Qe(t, !0);
    let r = k(pt(t.initialContent))
      , s = k(!1)
      , d = k("");
    Et( () => {
        t.isOpen && (a(r, t.initialContent, !0),
        a(d, ""))
    }
    );
    function _() {
        e(s) || (a(r, ""),
        a(d, ""),
        t.onClose())
    }
    async function l(b) {
        if (b.preventDefault(),
        !e(r).trim() || e(s))
            return;
        a(s, !0),
        a(d, "");
        const x = await Ot.updatePost(t.postId, e(r).trim());
        if (x.error) {
            a(d, x.error, !0),
            a(s, !1);
            return
        }
        t.onSave(e(r).trim()),
        a(s, !1),
        _()
    }
    function u(b) {
        const x = b.target;
        a(r, x.value, !0),
        x.style.height = "auto",
        x.style.height = `${Math.min(x.scrollHeight, 300)}px`
    }
    let f = K( () => e(r).trim().length > 0 && e(r).trim() !== t.initialContent && !e(s));
    os(n, {
        get isOpen() {
            return t.isOpen
        },
        onClose: _,
        title: " ",
        maxWidth: "540px",
        get closeDisabled() {
            return e(s)
        },
        footer: x => {
            var C = di()
              , h = we(C);
            h.__click = _;
            var w = c(h, 2);
            w.__click = l;
            var y = i(w, !0);
            o(w),
            D( () => {
                h.disabled = e(s),
                w.disabled = !e(f),
                re(y, e(s) ? "..." : "")
            }
            ),
            v(x, C)
        }
        ,
        children: (x, C) => {
            var h = ui()
              , w = i(h);
            {
                var y = q => {
                    var R = vi()
                      , L = i(R, !0);
                    o(R),
                    D( () => re(L, e(d))),
                    v(q, R)
                }
                ;
                P(w, q => {
                    e(d) && q(y)
                }
                )
            }
            var j = c(w, 2);
            ja(j),
            j.__input = u,
            o(h),
            D( () => {
                La(j, e(r)),
                j.disabled = e(s)
            }
            ),
            v(x, h)
        }
        ,
        $$slots: {
            footer: !0,
            default: !0
        }
    }),
    Je()
}
it(["click", "input"]);
var _i = p('<div class="repost-modal__header svelte-s0g8z9"><h2 class="repost-modal__title svelte-s0g8z9"><!> </h2></div>')
  , gi = p('<button class="repost-modal__cancel svelte-s0g8z9"></button> <button class="repost-modal__submit svelte-s0g8z9"> </button>', 1)
  , pi = p('<div class="repost-modal__error svelte-s0g8z9"> </div>')
  , hi = p('<div class="repost-modal__content svelte-s0g8z9"><!> <textarea placeholder="  ()" class="repost-modal__textarea svelte-s0g8z9" rows="2"></textarea> <div class="repost-modal__original svelte-s0g8z9"><div class="repost-modal__original-header svelte-s0g8z9"><!> <div class="repost-modal__original-info svelte-s0g8z9"><span class="repost-modal__original-name svelte-s0g8z9"> <!> <!></span> <span class="repost-modal__original-meta svelte-s0g8z9"><!><!></span></div></div> <p class="repost-modal__original-content svelte-s0g8z9"> </p></div></div>');
function Qs(n, t) {
    Qe(t, !0);
    let r = k("")
      , s = k(!1)
      , d = k("");
    Et( () => {
        t.isOpen && (a(r, ""),
        a(d, ""))
    }
    );
    function _() {
        e(s) || (a(r, ""),
        a(d, ""),
        t.onClose())
    }
    async function l(f) {
        if (f.preventDefault(),
        e(s))
            return;
        a(s, !0),
        a(d, "");
        const b = await Ot.repostPost(t.originalPost.id, e(r).trim());
        if (b.error) {
            a(d, b.error, !0),
            a(s, !1);
            return
        }
        b.data && t.onRepost(b.data),
        a(s, !1),
        _()
    }
    function u(f) {
        const b = f.target;
        a(r, b.value, !0),
        b.style.height = "auto",
        b.style.height = `${Math.min(b.scrollHeight, 200)}px`
    }
    os(n, {
        get isOpen() {
            return t.isOpen
        },
        onClose: _,
        maxWidth: "540px",
        get closeDisabled() {
            return e(s)
        },
        header: x => {
            var C = _i()
              , h = i(C)
              , w = i(h);
            ns(w, {
                size: 20
            }),
            _t(),
            o(h),
            o(C),
            v(x, C)
        }
        ,
        footer: x => {
            var C = gi()
              , h = we(C);
            h.__click = _;
            var w = c(h, 2);
            w.__click = l;
            var y = i(w, !0);
            o(w),
            D( () => {
                h.disabled = e(s),
                w.disabled = e(s),
                re(y, e(s) ? "..." : "")
            }
            ),
            v(x, C)
        }
        ,
        children: (x, C) => {
            var h = hi()
              , w = i(h);
            {
                var y = Z => {
                    var X = pi()
                      , me = i(X, !0);
                    o(X),
                    D( () => re(me, e(d))),
                    v(Z, X)
                }
                ;
                P(w, Z => {
                    e(d) && Z(y)
                }
                )
            }
            var j = c(w, 2);
            ja(j),
            j.__input = u;
            var q = c(j, 2)
              , R = i(q)
              , L = i(R);
            ea(L, {
                get avatar() {
                    return t.originalPost.author.avatar
                },
                get name() {
                    return t.originalPost.author.displayName
                },
                size: 32
            });
            var N = c(L, 2)
              , H = i(N)
              , ee = i(H)
              , te = c(ee);
            {
                var W = Z => {
                    ks(Z, {})
                }
                ;
                P(te, Z => {
                    t.originalPost.author.verified && Z(W)
                }
                )
            }
            var Y = c(te, 2);
            {
                var de = Z => {
                    Fa(Z, {
                        get pin() {
                            return t.originalPost.author.pin
                        }
                    })
                }
                ;
                P(Y, Z => {
                    t.originalPost.author.pin && Z(de)
                }
                )
            }
            o(H);
            var ce = c(H, 2)
              , se = i(ce);
            {
                var G = Z => {
                    var X = Aa();
                    D( () => re(X, `@${t.originalPost.author.username ?? ""} `)),
                    v(Z, X)
                }
                ;
                P(se, Z => {
                    t.originalPost.author.username && Z(G)
                }
                )
            }
            var B = c(se);
            Va(B, {
                get date() {
                    return t.originalPost.createdAt
                }
            }),
            o(ce),
            o(N),
            o(R);
            var I = c(R, 2)
              , U = i(I, !0);
            o(I),
            o(q),
            o(h),
            D( () => {
                La(j, e(r)),
                j.disabled = e(s),
                re(ee, `${t.originalPost.author.displayName ?? ""} `),
                re(U, t.originalPost.content)
            }
            ),
            v(x, h)
        }
        ,
        $$slots: {
            header: !0,
            footer: !0,
            default: !0
        }
    }),
    Je()
}
it(["click", "input"]);
var mi = p('<button class="settings-modal__back svelte-1jqzo7p" aria-label=""><!></button>')
  , wi = p('<div class="settings-modal__header svelte-1jqzo7p"><!> <h2 class="settings-modal__title svelte-1jqzo7p"> </h2> <button class="settings-modal__close svelte-1jqzo7p" aria-label=""><!></button></div>')
  , bi = p('<div class="settings-modal__success svelte-1jqzo7p"> </div>')
  , ki = p('<div class="settings-modal__error svelte-1jqzo7p"> </div>')
  , yi = p('<div class="settings-modal__section svelte-1jqzo7p"><div class="settings-modal__options svelte-1jqzo7p"><button class="settings-modal__option svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div> <div class="settings-modal__option-desc svelte-1jqzo7p">, , , </div></div></div> <svg class="settings-modal__option-arrow svelte-1jqzo7p" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <button class="settings-modal__option svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path d="M10.004 1C14.92 1 18.976 4.61 19 8.955c0 2.747-2.255 5-5.002 5h-1.797a1.477 1.477 0 0 0-1.502 1.501c0 .426.134.753.395 1.013.231.26.393.618.393 1.011 0 .848-.65 1.52-1.483 1.52C5.052 19 1 14.95 1 10s4.052-9 9.004-9ZM5.25 9a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Zm9-2a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Zm-7-2a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Zm4-1a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z"></path></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div> <div class="settings-modal__option-desc svelte-1jqzo7p">, </div></div></div> <svg class="settings-modal__option-arrow svelte-1jqzo7p" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <button class="settings-modal__option svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div> <div class="settings-modal__option-desc svelte-1jqzo7p"> </div></div></div> <svg class="settings-modal__option-arrow svelte-1jqzo7p" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <button class="settings-modal__option svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div> <div class="settings-modal__option-desc svelte-1jqzo7p">  </div></div></div> <svg class="settings-modal__option-arrow svelte-1jqzo7p" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <button class="settings-modal__option svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><!></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div> <div class="settings-modal__option-desc svelte-1jqzo7p">, , </div></div></div> <svg class="settings-modal__option-arrow svelte-1jqzo7p" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <button class="settings-modal__option settings-modal__option--danger svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div></div></div></button></div></div>')
  , xi = p('<span class="settings-modal__avatar-emoji svelte-1jqzo7p"> </span>')
  , zi = p('<div class="settings-modal__loading svelte-1jqzo7p"><!></div>')
  , Ci = p('<div class="settings-modal__empty settings-modal__empty--compact svelte-1jqzo7p"><p class="settings-modal__empty-text svelte-1jqzo7p">    </p> <p class="settings-modal__empty-hint svelte-1jqzo7p">      </p></div>')
  , Pi = p('<span class="settings-modal__pin-active svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"></polyline></svg></span>')
  , Mi = p('<button><img class="settings-modal__pin-icon svelte-1jqzo7p" width="32" height="32"/> <div class="settings-modal__pin-info svelte-1jqzo7p"><span class="settings-modal__pin-name svelte-1jqzo7p"> </span> <span class="settings-modal__pin-desc svelte-1jqzo7p"> </span></div> <!></button>')
  , ji = p('<div class="settings-modal__pins-list svelte-1jqzo7p"></div>')
  , qi = p('<div class="settings-modal__form svelte-1jqzo7p"><div class="settings-modal__field svelte-1jqzo7p"><span class="settings-modal__label svelte-1jqzo7p"> </span> <div class="settings-modal__avatar-section svelte-1jqzo7p"><div class="settings-modal__avatar-preview settings-modal__avatar-preview--locked svelte-1jqzo7p"><!></div> <div class="settings-modal__avatar-info svelte-1jqzo7p"><span class="settings-modal__avatar-locked-text svelte-1jqzo7p"> </span> <span class="settings-modal__hint svelte-1jqzo7p">         </span></div></div></div> <div class="settings-modal__field svelte-1jqzo7p"><label for="display-name" class="settings-modal__label svelte-1jqzo7p"> *</label> <input id="display-name" type="text" class="settings-modal__input svelte-1jqzo7p" placeholder=" " maxlength="50"/> <span class="settings-modal__hint svelte-1jqzo7p">     ( 50 )</span></div> <div class="settings-modal__field svelte-1jqzo7p"><label for="username" class="settings-modal__label svelte-1jqzo7p"></label> <div class="settings-modal__input-wrapper svelte-1jqzo7p"><span class="settings-modal__input-prefix svelte-1jqzo7p">@</span> <input id="username" type="text" class="settings-modal__input settings-modal__input--with-prefix svelte-1jqzo7p" placeholder="username"/></div> <span class="settings-modal__hint svelte-1jqzo7p"> ,   _ (3-50 )</span></div> <div class="settings-modal__field svelte-1jqzo7p"><label for="bio" class="settings-modal__label svelte-1jqzo7p"> </label> <textarea id="bio" class="settings-modal__textarea svelte-1jqzo7p" placeholder="  ..." rows="3" maxlength="160"></textarea> <span class="settings-modal__hint settings-modal__hint--counter svelte-1jqzo7p"> </span></div></div> <div class="settings-modal__section-divider svelte-1jqzo7p"></div> <div class="settings-modal__form svelte-1jqzo7p"><span class="settings-modal__label svelte-1jqzo7p"></span> <!></div> <div class="settings-modal__actions svelte-1jqzo7p"><button class="settings-modal__save svelte-1jqzo7p"> </button></div>', 1)
  , Si = p('<div class="settings-modal__form svelte-1jqzo7p"><div class="settings-modal__field svelte-1jqzo7p"><label for="current-password" class="settings-modal__label svelte-1jqzo7p"> </label> <input id="current-password" type="password" class="settings-modal__input svelte-1jqzo7p" placeholder="  "/></div> <div class="settings-modal__field svelte-1jqzo7p"><label for="new-password" class="settings-modal__label svelte-1jqzo7p"> </label> <input id="new-password" type="password" class="settings-modal__input svelte-1jqzo7p" placeholder=" 8 "/></div> <div class="settings-modal__field svelte-1jqzo7p"><label for="confirm-password" class="settings-modal__label svelte-1jqzo7p"> </label> <input id="confirm-password" type="password" class="settings-modal__input svelte-1jqzo7p" placeholder="  "/></div></div> <div class="settings-modal__actions svelte-1jqzo7p"><button class="settings-modal__save svelte-1jqzo7p"> </button></div>', 1)
  , Ii = p('<div class="settings-modal__form svelte-1jqzo7p"><div class="settings-modal__loading svelte-1jqzo7p">...</div></div>')
  , Ti = p('<div class="settings-modal__options svelte-1jqzo7p"><div class="settings-modal__option settings-modal__option--toggle svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p">  </div> <div class="settings-modal__option-desc svelte-1jqzo7p">     </div></div></div> <select class="settings-modal__inline-select svelte-1jqzo7p"><option></option><option></option><option></option><option></option></select></div> <div class="settings-modal__option settings-modal__option--toggle svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"> </div> <div class="settings-modal__option-desc svelte-1jqzo7p">     </div></div></div> <select class="settings-modal__inline-select svelte-1jqzo7p"><option></option><option></option><option></option><option></option></select></div> <button class="settings-modal__option svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div> <div class="settings-modal__option-desc svelte-1jqzo7p">  </div></div></div> <svg class="settings-modal__option-arrow svelte-1jqzo7p" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button></div> <div class="settings-modal__actions svelte-1jqzo7p"><button class="settings-modal__save svelte-1jqzo7p"> </button></div>', 1)
  , Di = p('<div class="settings-modal__options svelte-1jqzo7p"><div class="settings-modal__option settings-modal__option--toggle svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div></div></div> <select id="theme-select" class="settings-modal__inline-select svelte-1jqzo7p"><option></option><option></option><option></option></select></div> <div class="settings-modal__option settings-modal__option--toggle svelte-1jqzo7p"><div class="settings-modal__option-content svelte-1jqzo7p"><div class="settings-modal__option-icon svelte-1jqzo7p"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="5" r="2"></circle><circle cx="6" cy="12" r="2"></circle><circle cx="18" cy="12" r="2"></circle><circle cx="12" cy="19" r="2"></circle><circle cx="8" cy="8" r="1"></circle><circle cx="16" cy="8" r="1"></circle></svg></div> <div class="settings-modal__option-text svelte-1jqzo7p"><div class="settings-modal__option-name svelte-1jqzo7p"></div></div></div> <button aria-label=""><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div></div>')
  , Ri = p('<div class="settings-modal__loading svelte-1jqzo7p"><!></div>')
  , Ai = p('<div class="settings-modal__notif-divider svelte-1jqzo7p"><span class="settings-modal__notif-divider-text svelte-1jqzo7p"></span></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--bell svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p"></span> <span class="settings-modal__notif-desc svelte-1jqzo7p">    </span></div> <button aria-label=""><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--sound svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p">  </span> <span class="settings-modal__notif-desc svelte-1jqzo7p">  </span></div> <button aria-label=" "><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div> <div class="settings-modal__notif-divider svelte-1jqzo7p"><span class="settings-modal__notif-divider-text svelte-1jqzo7p"></span></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--follows svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p"></span> <span class="settings-modal__notif-desc svelte-1jqzo7p">      </span></div> <button aria-label=""><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div> <div class="settings-modal__notif-divider svelte-1jqzo7p"><span class="settings-modal__notif-divider-text svelte-1jqzo7p"></span></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--likes svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p">  </span> <span class="settings-modal__notif-desc svelte-1jqzo7p">       </span></div> <button aria-label="  "><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--comments svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p"></span> <span class="settings-modal__notif-desc svelte-1jqzo7p">      </span></div> <button aria-label=""><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--mentions svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p"></span> <span class="settings-modal__notif-desc svelte-1jqzo7p">       </span></div> <button aria-label=""><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div> <div class="settings-modal__notif-item svelte-1jqzo7p"><div class="settings-modal__notif-icon settings-modal__notif-icon--wallposts svelte-1jqzo7p"><!></div> <div class="settings-modal__notif-info svelte-1jqzo7p"><span class="settings-modal__notif-name svelte-1jqzo7p">  </span> <span class="settings-modal__notif-desc svelte-1jqzo7p">      </span></div> <button aria-label="  "><span class="settings-modal__toggle-thumb svelte-1jqzo7p"></span></button></div>', 1)
  , Li = p('<div class="settings-modal__notif-section svelte-1jqzo7p"><!></div> <div class="settings-modal__actions svelte-1jqzo7p"><button class="settings-modal__save svelte-1jqzo7p"> </button></div>', 1)
  , Ui = p('<div class="settings-modal__loading svelte-1jqzo7p"><!></div>')
  , Bi = p('<div class="settings-modal__empty svelte-1jqzo7p"><p class="settings-modal__empty-text svelte-1jqzo7p"> </p> <p class="settings-modal__empty-hint svelte-1jqzo7p">     </p></div>')
  , Oi = p('<span class="settings-modal__blocked-avatar-emoji svelte-1jqzo7p"> </span>')
  , Ei = p('<div class="settings-modal__blocked-item svelte-1jqzo7p"><div class="settings-modal__blocked-user svelte-1jqzo7p"><div class="settings-modal__blocked-avatar svelte-1jqzo7p"><!></div> <div class="settings-modal__blocked-info svelte-1jqzo7p"><span class="settings-modal__blocked-name svelte-1jqzo7p"> </span> <span class="settings-modal__blocked-username svelte-1jqzo7p"> </span></div></div> <button class="settings-modal__unblock-btn svelte-1jqzo7p"> </button></div>')
  , Ni = p('<div class="settings-modal__blocked-load-more svelte-1jqzo7p"><button class="settings-modal__load-more-btn svelte-1jqzo7p"> </button></div>')
  , Hi = p('<div class="settings-modal__blocked-list svelte-1jqzo7p"></div> <!>', 1)
  , Fi = p('<div class="settings-modal__blocked-section svelte-1jqzo7p"><!></div>')
  , Vi = p('<div class="settings-modal__warning-overlay svelte-1jqzo7p"><div class="settings-modal__warning-dialog svelte-1jqzo7p" role="dialog"><p class="settings-modal__warning-text svelte-1jqzo7p">    . ?</p> <div class="settings-modal__warning-actions svelte-1jqzo7p"><button class="settings-modal__warning-btn settings-modal__warning-btn--discard svelte-1jqzo7p"> </button> <button class="settings-modal__warning-btn settings-modal__warning-btn--save svelte-1jqzo7p"></button></div></div></div>')
  , Zi = p('<div class="settings-modal__content svelte-1jqzo7p"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>', 1);
function Wi(n, t) {
    Qe(t, !0);
    const r = () => bt(za, "$currentUser", d)
      , s = () => bt(qs, "$snowStore", d)
      , [d,_] = aa();
    let l = k("main")
      , u = k(!1)
      , f = k("")
      , b = k("")
      , x = k("")
      , C = k("")
      , h = k("")
      , w = k("")
      , y = k("")
      , j = k("")
      , q = k("")
      , R = k("everyone")
      , L = k("everyone")
      , N = k("everyone")
      , H = k("everyone")
      , ee = k(!1)
      , te = k(!1)
      , W = k(pt([]))
      , Y = k(!1)
      , de = k(!1)
      , ce = k(1)
      , se = k(null)
      , G = k(pt([]))
      , B = k(!1)
      , I = k(!1)
      , U = k(pt({
        enabled: !0,
        sound: !0,
        follows: !0,
        wallPosts: !0,
        likes: !0,
        comments: !0,
        mentions: !0
    }))
      , Z = k(!1)
      , X = k(pt({
        enabled: !0,
        sound: !0,
        follows: !0,
        wallPosts: !0,
        likes: !0,
        comments: !0,
        mentions: !0
    }))
      , me = k(!1)
      , pe = k("system")
      , ze = k("system")
      , fe = k(!1)
      , Q = k(!1)
      , F = k("close")
      , J = k(!1);
    Et( () => {
        const oe = t.isOpen;
        if (oe && !e(J)) {
            const qe = r();
            if (qe) {
                a(l, "main"),
                a(b, qe.displayName || "", !0),
                a(x, qe.username || "", !0),
                a(C, qe.bio || "", !0),
                a(h, qe.avatar || "", !0),
                a(f, ""),
                a(q, ""),
                a(w, ""),
                a(y, ""),
                a(j, "");
                const Se = typeof localStorage < "u" ? localStorage.getItem("nowkie_theme") : null;
                a(pe, Se === "light" || Se === "dark" || Se === "system" ? Se : "system", !0),
                a(ze, e(pe), !0),
                a(Q, !1)
            }
        }
        a(J, oe, !0)
    }
    );
    async function A() {
        a(ee, !0);
        const oe = await _a.getPrivacySettings();
        a(ee, !1),
        oe.data && (a(R, oe.data.wallAccess || "everyone", !0),
        a(L, oe.data.likesVisibility || "everyone", !0),
        a(N, e(R), !0),
        a(H, e(L), !0))
    }
    async function M() {
        a(B, !0),
        a(f, "");
        const oe = await _a.getMyPins();
        if (a(B, !1),
        oe.error) {
            a(f, oe.error, !0);
            return
        }
        a(G, oe.data || [], !0)
    }
    async function T() {
        a(Z, !0);
        const oe = await ka.getSettings();
        a(Z, !1),
        oe.data && (a(U, {
            ...oe.data
        }, !0),
        a(X, {
            ...oe.data
        }, !0))
    }
    function g() {
        a(l, "notifications"),
        T()
    }
    function m(oe) {
        a(U, {
            ...e(U),
            [oe]: !e(U)[oe]
        }, !0)
    }
    function z() {
        return Object.keys(e(X)).some(oe => e(U)[oe] !== e(X)[oe])
    }
    async function S() {
        a(me, !0),
        a(f, "");
        const oe = {};
        for (const Se of Object.keys(e(X)))
            e(U)[Se] !== e(X)[Se] && (oe[Se] = e(U)[Se]);
        const qe = await ka.updateSettings(oe);
        if (a(me, !1),
        !qe.success) {
            a(f, qe.error || " ", !0);
            return
        }
        a(X, {
            ...e(U)
        }, !0),
        a(q, "  ")
    }
    async function O(oe) {
        a(I, !0),
        a(f, "");
        const qe = e(G).find(Se => Se.slug === oe);
        if (qe) {
            if (qe.isActive) {
                const Se = await _a.removeActivePin();
                Se.success ? a(G, e(G).map(et => ({
                    ...et,
                    isActive: !1
                })), !0) : a(f, Se.error || "", !0)
            } else {
                const Se = await _a.setActivePin(oe);
                Se.success ? a(G, e(G).map(et => ({
                    ...et,
                    isActive: et.slug === oe
                })), !0) : a(f, Se.error || "", !0)
            }
            a(I, !1)
        }
    }
    function ie() {
        return r() ? e(b) !== (r().displayName || "") || e(x) !== (r().username || "") || e(C) !== (r().bio || "") : !1
    }
    function ge() {
        switch (e(l)) {
        case "personal":
            return ie();
        case "privacy":
            return xe();
        case "notifications":
            return z();
        default:
            return !1
        }
    }
    function ve() {
        switch (e(l)) {
        case "personal":
            r() && (a(b, r().displayName || "", !0),
            a(x, r().username || "", !0),
            a(C, r().bio || "", !0));
            break;
        case "privacy":
            a(R, e(N), !0),
            a(L, e(H), !0);
            break;
        case "notifications":
            a(U, {
                ...e(X)
            }, !0);
            break
        }
    }
    async function be() {
        switch (e(l)) {
        case "personal":
            await _e();
            break;
        case "privacy":
            await ye();
            break;
        case "notifications":
            await S();
            break
        }
    }
    function Te() {
        if (ge()) {
            a(F, "close"),
            a(Q, !0);
            return
        }
        Ge()
    }
    function Ge() {
        a(Q, !1),
        a(l, "main"),
        a(f, ""),
        a(q, ""),
        t.onClose()
    }
    async function $e() {
        await be(),
        e(f) ? a(Q, !1) : Ge()
    }
    function lt() {
        ve(),
        Ge()
    }
    function $() {
        if (e(l) === "blocked") {
            a(l, "privacy"),
            a(f, ""),
            a(q, "");
            return
        }
        if (ge()) {
            a(F, "back"),
            a(Q, !0);
            return
        }
        a(l, "main"),
        a(f, ""),
        a(q, "")
    }
    function ae() {
        ve(),
        a(Q, !1),
        e(l) === "blocked" ? a(l, "privacy") : a(l, "main"),
        a(f, ""),
        a(q, "")
    }
    async function E() {
        await be(),
        e(f) ? a(Q, !1) : (a(Q, !1),
        a(l, "main"),
        a(f, ""),
        a(q, ""))
    }
    async function _e() {
        if (!e(b).trim()) {
            a(f, " ");
            return
        }
        if (e(b).trim().length > 50) {
            a(f, "    50 ");
            return
        }
        if (e(x) && !/^[a-zA-Z0-9_]+$/.test(e(x))) {
            a(f, "    ,   _");
            return
        }
        if (e(x) && (e(x).length < 3 || e(x).length > 50)) {
            a(f, "    3  50 ");
            return
        }
        a(u, !0),
        a(f, "");
        const oe = await _a.updateProfile({
            displayName: e(b).trim(),
            username: e(x).trim() || void 0,
            bio: e(C).trim()
        });
        if (a(u, !1),
        oe.error) {
            a(f, oe.error, !0);
            return
        }
        a(l, "main")
    }
    async function De() {
        if (!e(w) || !e(y) || !e(j)) {
            a(f, "  ");
            return
        }
        if (e(y) !== e(j)) {
            a(f, "  ");
            return
        }
        if (e(y).length < 8) {
            a(f, "    8 ");
            return
        }
        if (!/[a-zA-Z]/.test(e(y))) {
            a(f, "      ");
            return
        }
        if (!/\d/.test(e(y))) {
            a(f, "      ");
            return
        }
        a(u, !0),
        a(f, "");
        const oe = await _a.changePassword({
            oldPassword: e(w),
            newPassword: e(y)
        });
        if (a(u, !1),
        !oe.success) {
            oe.errorCode === "INVALID_OLD_PASSWORD" ? a(f, "  ") : oe.errorCode === "SAME_PASSWORD" ? a(f, "     ") : oe.errorCode === "INVALID_PASSWORD" ? a(f, "   ") : a(f, oe.error || "  ", !0);
            return
        }
        a(w, ""),
        a(y, ""),
        a(j, ""),
        a(q, "  "),
        a(l, "main")
    }
    function Le() {
        switch (e(l)) {
        case "personal":
            return "";
        case "security":
            return "";
        case "privacy":
            return "";
        case "appearance":
            return "";
        case "notifications":
            return "";
        case "blocked":
            return "";
        default:
            return ""
        }
    }
    function Xe() {
        a(l, "personal"),
        M()
    }
    function Ce() {
        a(l, "privacy"),
        A()
    }
    function je(oe) {
        a(R, oe, !0)
    }
    function ke(oe) {
        a(L, oe, !0)
    }
    function xe() {
        return e(R) !== e(N) || e(L) !== e(H)
    }
    async function ye() {
        a(te, !0),
        a(f, "");
        const oe = {};
        e(R) !== e(N) && (oe.wallAccess = e(R)),
        e(L) !== e(H) && (oe.likesVisibility = e(L));
        const qe = await _a.updatePrivacySettings(oe);
        if (a(te, !1),
        qe.error) {
            a(f, qe.error, !0);
            return
        }
        a(N, e(R), !0),
        a(H, e(L), !0),
        a(q, "  ")
    }
    async function Ne(oe=1) {
        a(Y, !0);
        const qe = await _a.getBlockedUsers(oe, 20);
        if (a(Y, !1),
        qe.data) {
            if (oe === 1)
                a(W, qe.data.users, !0);
            else {
                const Se = new Set(e(W).map(yt => yt.id))
                  , et = qe.data.users.filter(yt => !Se.has(yt.id));
                a(W, [...e(W), ...et], !0)
            }
            a(de, qe.data.pagination.hasMore, !0),
            a(ce, oe, !0)
        }
    }
    function He() {
        a(l, "blocked"),
        a(ce, 1),
        Ne(1)
    }
    async function ut(oe, qe) {
        a(se, oe, !0);
        const Se = await _a.unblockUser(qe);
        a(se, null),
        Se.success ? a(W, e(W).filter(et => et.id !== oe), !0) : a(f, Se.error || " ", !0)
    }
    async function Be() {
        await Rs.logout(),
        as.logout(),
        Te(),
        Ma("/login")
    }
    os(n, {
        get isOpen() {
            return t.isOpen
        },
        onClose: Te,
        maxWidth: "440px",
        showCloseButton: !1,
        noPadding: !0,
        header: qe => {
            var Se = wi()
              , et = i(Se);
            {
                var yt = Pe => {
                    var dt = mi();
                    dt.__click = $;
                    var vt = i(dt);
                    Bn(vt, {
                        size: 20
                    }),
                    o(dt),
                    v(Pe, dt)
                }
                ;
                P(et, Pe => {
                    e(l) !== "main" && Pe(yt)
                }
                )
            }
            var xt = c(et, 2)
              , Ze = i(xt, !0);
            o(xt);
            var ne = c(xt, 2);
            ne.__click = Te;
            var le = i(ne);
            ya(le, {
                size: 20
            }),
            o(ne),
            o(Se),
            D(Pe => re(Ze, Pe), [Le]),
            v(qe, Se)
        }
        ,
        children: (qe, Se) => {
            var et = Zi()
              , yt = we(et)
              , xt = i(yt);
            {
                var Ze = Ue => {
                    var Oe = bi()
                      , Ke = i(Oe, !0);
                    o(Oe),
                    D( () => re(Ke, e(q))),
                    v(Ue, Oe)
                }
                ;
                P(xt, Ue => {
                    e(q) && Ue(Ze)
                }
                )
            }
            var ne = c(xt, 2);
            {
                var le = Ue => {
                    var Oe = ki()
                      , Ke = i(Oe, !0);
                    o(Oe),
                    D( () => re(Ke, e(f))),
                    v(Ue, Oe)
                }
                ;
                P(ne, Ue => {
                    e(f) && Ue(le)
                }
                )
            }
            var Pe = c(ne, 2);
            {
                var dt = Ue => {
                    var Oe = yi()
                      , Ke = i(Oe)
                      , tt = i(Ke);
                    tt.__click = Xe;
                    var mt = c(tt, 2);
                    mt.__click = () => {
                        a(l, "appearance"),
                        a(ze, e(pe), !0),
                        a(fe, s(), !0)
                    }
                    ;
                    var We = c(mt, 2);
                    We.__click = () => a(l, "security");
                    var rt = c(We, 2);
                    rt.__click = Ce;
                    var ot = c(rt, 2);
                    ot.__click = g;
                    var zt = i(ot)
                      , Fe = i(zt)
                      , Ye = i(Fe);
                    Cs(Ye, {
                        size: 20
                    }),
                    o(Fe),
                    _t(2),
                    o(zt),
                    _t(2),
                    o(ot);
                    var ct = c(ot, 2);
                    ct.__click = Be,
                    o(Ke),
                    o(Oe),
                    v(Ue, Oe)
                }
                ;
                P(Pe, Ue => {
                    e(l) === "main" && Ue(dt)
                }
                )
            }
            var vt = c(Pe, 2);
            {
                var Pt = Ue => {
                    var Oe = qi()
                      , Ke = we(Oe)
                      , tt = i(Ke)
                      , mt = c(i(tt), 2)
                      , We = i(mt)
                      , rt = i(We);
                    {
                        var ot = st => {
                            var ft = xi()
                              , Kt = i(ft, !0);
                            o(ft),
                            D( () => re(Kt, e(h))),
                            v(st, ft)
                        }
                          , zt = st => {
                            us(st, {
                                size: 64
                            })
                        }
                        ;
                        P(rt, st => {
                            e(h) ? st(ot) : st(zt, !1)
                        }
                        )
                    }
                    o(We),
                    _t(2),
                    o(mt),
                    o(tt);
                    var Fe = c(tt, 2)
                      , Ye = c(i(Fe), 2);
                    Ta(Ye),
                    _t(2),
                    o(Fe);
                    var ct = c(Fe, 2)
                      , wt = c(i(ct), 2)
                      , na = c(i(wt), 2);
                    Ta(na),
                    o(wt),
                    _t(2),
                    o(ct);
                    var Ht = c(ct, 2)
                      , jt = c(i(Ht), 2);
                    ja(jt);
                    var at = c(jt, 2)
                      , qt = i(at);
                    o(at),
                    o(Ht),
                    o(Ke);
                    var Ct = c(Ke, 4)
                      , Ut = c(i(Ct), 2);
                    {
                        var Jt = st => {
                            var ft = zi()
                              , Kt = i(ft);
                            Da(Kt, {}),
                            o(ft),
                            v(st, ft)
                        }
                          , Xt = st => {
                            var ft = Ve()
                              , Kt = we(ft);
                            {
                                var la = Dt => {
                                    var Me = Ci();
                                    v(Dt, Me)
                                }
                                  , ca = Dt => {
                                    var Me = ji();
                                    ht(Me, 21, () => e(G), Re => Re.slug, (Re, nt) => {
                                        var It = Mi();
                                        let da;
                                        It.__click = () => O(e(nt).slug);
                                        var va = i(It)
                                          , ua = c(va, 2)
                                          , Ft = i(ua)
                                          , Rt = i(Ft, !0);
                                        o(Ft);
                                        var fa = c(Ft, 2)
                                          , Za = i(fa, !0);
                                        o(fa),
                                        o(ua);
                                        var Ua = c(ua, 2);
                                        {
                                            var ls = ba => {
                                                var Wa = Pi();
                                                v(ba, Wa)
                                            }
                                            ;
                                            P(Ua, ba => {
                                                e(nt).isActive && ba(ls)
                                            }
                                            )
                                        }
                                        o(It),
                                        D( () => {
                                            da = he(It, 1, "settings-modal__pin-item svelte-1jqzo7p", null, da, {
                                                active: e(nt).isActive
                                            }),
                                            It.disabled = e(I),
                                            V(va, "src", `/assets/pins/${e(nt).slug ?? ""}.png`),
                                            V(va, "alt", e(nt).name),
                                            re(Rt, e(nt).name),
                                            re(Za, e(nt).description)
                                        }
                                        ),
                                        v(Re, It)
                                    }
                                    ),
                                    o(Me),
                                    v(Dt, Me)
                                }
                                ;
                                P(Kt, Dt => {
                                    e(G).length === 0 ? Dt(la) : Dt(ca, !1)
                                }
                                , !0)
                            }
                            v(st, ft)
                        }
                        ;
                        P(Ut, st => {
                            e(B) ? st(Jt) : st(Xt, !1)
                        }
                        )
                    }
                    o(Ct);
                    var $t = c(Ct, 2)
                      , Vt = i($t);
                    Vt.__click = _e;
                    var Tt = i(Vt, !0);
                    o(Vt),
                    o($t),
                    D(st => {
                        re(qt, `${e(C).length ?? ""}/160`),
                        Vt.disabled = st,
                        re(Tt, e(u) ? "..." : "")
                    }
                    , [ () => e(u) || !ie()]),
                    Pa(Ye, () => e(b), st => a(b, st)),
                    Pa(na, () => e(x), st => a(x, st)),
                    Pa(jt, () => e(C), st => a(C, st)),
                    v(Ue, Oe)
                }
                ;
                P(vt, Ue => {
                    e(l) === "personal" && Ue(Pt)
                }
                )
            }
            var St = c(vt, 2);
            {
                var Wt = Ue => {
                    var Oe = Si()
                      , Ke = we(Oe)
                      , tt = i(Ke)
                      , mt = c(i(tt), 2);
                    Ta(mt),
                    o(tt);
                    var We = c(tt, 2)
                      , rt = c(i(We), 2);
                    Ta(rt),
                    o(We);
                    var ot = c(We, 2)
                      , zt = c(i(ot), 2);
                    Ta(zt),
                    o(ot),
                    o(Ke);
                    var Fe = c(Ke, 2)
                      , Ye = i(Fe);
                    Ye.__click = De;
                    var ct = i(Ye, !0);
                    o(Ye),
                    o(Fe),
                    D( () => {
                        Ye.disabled = !e(w) || !e(y) || !e(j) || e(u),
                        re(ct, e(u) ? "..." : " ")
                    }
                    ),
                    Pa(mt, () => e(w), wt => a(w, wt)),
                    Pa(rt, () => e(y), wt => a(y, wt)),
                    Pa(zt, () => e(j), wt => a(j, wt)),
                    v(Ue, Oe)
                }
                ;
                P(St, Ue => {
                    e(l) === "security" && Ue(Wt)
                }
                )
            }
            var gt = c(St, 2);
            {
                var Nt = Ue => {
                    var Oe = Ve()
                      , Ke = we(Oe);
                    {
                        var tt = We => {
                            var rt = Ii();
                            v(We, rt)
                        }
                          , mt = We => {
                            var rt = Ti()
                              , ot = we(rt)
                              , zt = i(ot)
                              , Fe = c(i(zt), 2);
                            Fe.__change = ft => je(ft.currentTarget.value);
                            var Ye = i(Fe);
                            Ye.value = Ye.__value = "everyone";
                            var ct = c(Ye);
                            ct.value = ct.__value = "followers";
                            var wt = c(ct);
                            wt.value = wt.__value = "mutual";
                            var na = c(wt);
                            na.value = na.__value = "nobody",
                            o(Fe);
                            var Ht;
                            $a(Fe),
                            o(zt);
                            var jt = c(zt, 2)
                              , at = c(i(jt), 2);
                            at.__change = ft => ke(ft.currentTarget.value);
                            var qt = i(at);
                            qt.value = qt.__value = "everyone";
                            var Ct = c(qt);
                            Ct.value = Ct.__value = "followers";
                            var Ut = c(Ct);
                            Ut.value = Ut.__value = "mutual";
                            var Jt = c(Ut);
                            Jt.value = Jt.__value = "nobody",
                            o(at);
                            var Xt;
                            $a(at),
                            o(jt);
                            var $t = c(jt, 2);
                            $t.__click = He,
                            o(ot);
                            var Vt = c(ot, 2)
                              , Tt = i(Vt);
                            Tt.__click = ye;
                            var st = i(Tt, !0);
                            o(Tt),
                            o(Vt),
                            D(ft => {
                                Ht !== (Ht = e(R)) && (Fe.value = (Fe.__value = e(R)) ?? "",
                                Oa(Fe, e(R))),
                                Xt !== (Xt = e(L)) && (at.value = (at.__value = e(L)) ?? "",
                                Oa(at, e(L))),
                                Tt.disabled = ft,
                                re(st, e(te) ? "..." : "")
                            }
                            , [ () => !xe() || e(te)]),
                            v(We, rt)
                        }
                        ;
                        P(Ke, We => {
                            e(ee) ? We(tt) : We(mt, !1)
                        }
                        )
                    }
                    v(Ue, Oe)
                }
                ;
                P(gt, Ue => {
                    e(l) === "privacy" && Ue(Nt)
                }
                )
            }
            var sa = c(gt, 2);
            {
                var oa = Ue => {
                    var Oe = Di()
                      , Ke = i(Oe)
                      , tt = c(i(Ke), 2);
                    tt.__change = ct => {
                        a(pe, ct.currentTarget.value, !0),
                        vr.setPreference(e(pe))
                    }
                    ;
                    var mt = i(tt);
                    mt.value = mt.__value = "light";
                    var We = c(mt);
                    We.value = We.__value = "dark";
                    var rt = c(We);
                    rt.value = rt.__value = "system",
                    o(tt);
                    var ot;
                    $a(tt),
                    o(Ke);
                    var zt = c(Ke, 2)
                      , Fe = c(i(zt), 2);
                    let Ye;
                    Fe.__click = () => qs.toggle(),
                    o(zt),
                    o(Oe),
                    D( () => {
                        ot !== (ot = e(pe)) && (tt.value = (tt.__value = e(pe)) ?? "",
                        Oa(tt, e(pe))),
                        Ye = he(Fe, 1, "settings-modal__toggle svelte-1jqzo7p", null, Ye, {
                            active: s()
                        }),
                        V(Fe, "aria-pressed", s())
                    }
                    ),
                    v(Ue, Oe)
                }
                ;
                P(sa, Ue => {
                    e(l) === "appearance" && Ue(oa)
                }
                )
            }
            var ia = c(sa, 2);
            {
                var Lt = Ue => {
                    var Oe = Li()
                      , Ke = we(Oe)
                      , tt = i(Ke);
                    {
                        var mt = Fe => {
                            var Ye = Ri()
                              , ct = i(Ye);
                            Da(ct, {}),
                            o(Ye),
                            v(Fe, Ye)
                        }
                          , We = Fe => {
                            var Ye = Ai()
                              , ct = c(we(Ye), 2)
                              , wt = i(ct)
                              , na = i(wt);
                            Cs(na, {
                                size: 20
                            }),
                            o(wt);
                            var Ht = c(wt, 4);
                            let jt;
                            Ht.__click = () => m("enabled"),
                            o(ct);
                            var at = c(ct, 2)
                              , qt = i(at)
                              , Ct = i(qt);
                            Hn(Ct, {
                                size: 20
                            }),
                            o(qt);
                            var Ut = c(qt, 4);
                            let Jt;
                            Ut.__click = () => m("sound"),
                            o(at);
                            var Xt = c(at, 4)
                              , $t = i(Xt)
                              , Vt = i($t);
                            Gn(Vt, {
                                size: 20
                            }),
                            o($t);
                            var Tt = c($t, 4);
                            let st;
                            Tt.__click = () => m("follows"),
                            o(Xt);
                            var ft = c(Xt, 4)
                              , Kt = i(ft)
                              , la = i(Kt);
                            Vn(la, {
                                size: 20
                            }),
                            o(Kt);
                            var ca = c(Kt, 4);
                            let Dt;
                            ca.__click = () => m("likes"),
                            o(ft);
                            var Me = c(ft, 2)
                              , Re = i(Me)
                              , nt = i(Re);
                            Xn(nt, {
                                size: 20
                            }),
                            o(Re);
                            var It = c(Re, 4);
                            let da;
                            It.__click = () => m("comments"),
                            o(Me);
                            var va = c(Me, 2)
                              , ua = i(va)
                              , Ft = i(ua);
                            Wn(Ft, {
                                size: 20
                            }),
                            o(ua);
                            var Rt = c(ua, 4);
                            let fa;
                            Rt.__click = () => m("mentions"),
                            o(va);
                            var Za = c(va, 2)
                              , Ua = i(Za)
                              , ls = i(Ua);
                            Jn(ls, {
                                size: 20
                            }),
                            o(Ua);
                            var ba = c(Ua, 4);
                            let Wa;
                            ba.__click = () => m("wallPosts"),
                            o(Za),
                            D( () => {
                                jt = he(Ht, 1, "settings-modal__toggle svelte-1jqzo7p", null, jt, {
                                    active: e(U).enabled
                                }),
                                V(Ht, "aria-pressed", e(U).enabled),
                                Jt = he(Ut, 1, "settings-modal__toggle svelte-1jqzo7p", null, Jt, {
                                    active: e(U).sound
                                }),
                                Ut.disabled = !e(U).enabled,
                                V(Ut, "aria-pressed", e(U).sound),
                                st = he(Tt, 1, "settings-modal__toggle svelte-1jqzo7p", null, st, {
                                    active: e(U).follows
                                }),
                                Tt.disabled = !e(U).enabled,
                                V(Tt, "aria-pressed", e(U).follows),
                                Dt = he(ca, 1, "settings-modal__toggle svelte-1jqzo7p", null, Dt, {
                                    active: e(U).likes
                                }),
                                ca.disabled = !e(U).enabled,
                                V(ca, "aria-pressed", e(U).likes),
                                da = he(It, 1, "settings-modal__toggle svelte-1jqzo7p", null, da, {
                                    active: e(U).comments
                                }),
                                It.disabled = !e(U).enabled,
                                V(It, "aria-pressed", e(U).comments),
                                fa = he(Rt, 1, "settings-modal__toggle svelte-1jqzo7p", null, fa, {
                                    active: e(U).mentions
                                }),
                                Rt.disabled = !e(U).enabled,
                                V(Rt, "aria-pressed", e(U).mentions),
                                Wa = he(ba, 1, "settings-modal__toggle svelte-1jqzo7p", null, Wa, {
                                    active: e(U).wallPosts
                                }),
                                ba.disabled = !e(U).enabled,
                                V(ba, "aria-pressed", e(U).wallPosts)
                            }
                            ),
                            v(Fe, Ye)
                        }
                        ;
                        P(tt, Fe => {
                            e(Z) ? Fe(mt) : Fe(We, !1)
                        }
                        )
                    }
                    o(Ke);
                    var rt = c(Ke, 2)
                      , ot = i(rt);
                    ot.__click = S;
                    var zt = i(ot, !0);
                    o(ot),
                    o(rt),
                    D(Fe => {
                        ot.disabled = Fe,
                        re(zt, e(me) ? "..." : "")
                    }
                    , [ () => !z() || e(me)]),
                    v(Ue, Oe)
                }
                ;
                P(ia, Ue => {
                    e(l) === "notifications" && Ue(Lt)
                }
                )
            }
            var Mt = c(ia, 2);
            {
                var Yt = Ue => {
                    var Oe = Fi()
                      , Ke = i(Oe);
                    {
                        var tt = We => {
                            var rt = Ui()
                              , ot = i(rt);
                            Da(ot, {}),
                            o(rt),
                            v(We, rt)
                        }
                          , mt = We => {
                            var rt = Ve()
                              , ot = we(rt);
                            {
                                var zt = Ye => {
                                    var ct = Bi();
                                    v(Ye, ct)
                                }
                                  , Fe = Ye => {
                                    var ct = Hi()
                                      , wt = we(ct);
                                    ht(wt, 21, () => e(W), jt => jt.id, (jt, at) => {
                                        var qt = Ei()
                                          , Ct = i(qt)
                                          , Ut = i(Ct)
                                          , Jt = i(Ut);
                                        {
                                            var Xt = Dt => {
                                                var Me = Oi()
                                                  , Re = i(Me, !0);
                                                o(Me),
                                                D( () => re(Re, e(at).avatar)),
                                                v(Dt, Me)
                                            }
                                              , $t = Dt => {
                                                us(Dt, {
                                                    size: 40
                                                })
                                            }
                                            ;
                                            P(Jt, Dt => {
                                                e(at).avatar ? Dt(Xt) : Dt($t, !1)
                                            }
                                            )
                                        }
                                        o(Ut);
                                        var Vt = c(Ut, 2)
                                          , Tt = i(Vt)
                                          , st = i(Tt, !0);
                                        o(Tt);
                                        var ft = c(Tt, 2)
                                          , Kt = i(ft);
                                        o(ft),
                                        o(Vt),
                                        o(Ct);
                                        var la = c(Ct, 2);
                                        la.__click = () => ut(e(at).id, e(at).username);
                                        var ca = i(la, !0);
                                        o(la),
                                        o(qt),
                                        D( () => {
                                            re(st, e(at).displayName),
                                            re(Kt, `@${e(at).username ?? ""}`),
                                            la.disabled = e(se) === e(at).id,
                                            re(ca, e(se) === e(at).id ? "..." : "")
                                        }
                                        ),
                                        v(jt, qt)
                                    }
                                    ),
                                    o(wt);
                                    var na = c(wt, 2);
                                    {
                                        var Ht = jt => {
                                            var at = Ni()
                                              , qt = i(at);
                                            qt.__click = () => Ne(e(ce) + 1);
                                            var Ct = i(qt, !0);
                                            o(qt),
                                            o(at),
                                            D( () => {
                                                qt.disabled = e(Y),
                                                re(Ct, e(Y) ? "..." : " ")
                                            }
                                            ),
                                            v(jt, at)
                                        }
                                        ;
                                        P(na, jt => {
                                            e(de) && jt(Ht)
                                        }
                                        )
                                    }
                                    v(Ye, ct)
                                }
                                ;
                                P(ot, Ye => {
                                    e(W).length === 0 ? Ye(zt) : Ye(Fe, !1)
                                }
                                , !0)
                            }
                            v(We, rt)
                        }
                        ;
                        P(Ke, We => {
                            e(Y) && e(W).length === 0 ? We(tt) : We(mt, !1)
                        }
                        )
                    }
                    o(Oe),
                    v(Ue, Oe)
                }
                ;
                P(Mt, Ue => {
                    e(l) === "blocked" && Ue(Yt)
                }
                )
            }
            o(yt);
            var Ca = c(yt, 2);
            {
                var is = Ue => {
                    var Oe = Vi();
                    Oe.__click = () => a(Q, !1);
                    var Ke = i(Oe);
                    Ke.__click = rt => rt.stopPropagation();
                    var tt = c(i(Ke), 2)
                      , mt = i(tt);
                    mt.__click = () => e(F) === "close" ? lt() : ae();
                    var We = c(mt, 2);
                    We.__click = () => e(F) === "close" ? $e() : E(),
                    o(tt),
                    o(Ke),
                    o(Oe),
                    v(Ue, Oe)
                }
                ;
                P(Ca, Ue => {
                    e(Q) && Ue(is)
                }
                )
            }
            v(qe, et)
        }
        ,
        $$slots: {
            header: !0,
            default: !0
        }
    }),
    Je(),
    _()
}
it(["click", "change"]);
var Yi = p('<div class="loader svelte-lrcio1"><svg class="loader__spinner svelte-lrcio1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle class="loader__track svelte-lrcio1" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle><path class="loader__arc svelte-lrcio1" d="M12 2a10 10 0 0 1 10 10" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg></div>');
function Da(n, t) {
    let r = ue(t, "size", 3, 24);
    var s = Yi()
      , d = i(s);
    o(s),
    D( () => {
        V(d, "width", r()),
        V(d, "height", r())
    }
    ),
    v(n, s)
}
var Xi = p('<div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg></div>');
function us(n, t) {
    let r = ue(t, "size", 3, 40)
      , s = ue(t, "class", 3, "")
      , d = K( () => Math.round(r() * .6));
    var _ = Xi()
      , l = i(_);
    o(_),
    D( () => {
        he(_, 1, `no-avatar no-avatar--${r() ?? ""} ${s() ?? ""}`, "svelte-2ybtc7"),
        V(l, "width", e(d)),
        V(l, "height", e(d))
    }
    ),
    v(n, _)
}
var Ki = p("<img/>")
  , Gi = p("<div> </div>");
function ea(n, t) {
    let r = ue(t, "name", 3, "")
      , s = ue(t, "size", 3, 40)
      , d = ue(t, "class", 3, "");
    function _(x) {
        return x.startsWith("http://") || x.startsWith("https://")
    }
    var l = Ve()
      , u = we(l);
    {
        var f = x => {
            var C = Ki();
            D( () => {
                V(C, "src", t.avatar),
                V(C, "alt", r()),
                he(C, 1, `avatar avatar--img ${d() ?? ""}`, "svelte-6nt8hx"),
                At(C, `width: ${s() ?? ""}px; height: ${s() ?? ""}px;`)
            }
            ),
            v(x, C)
        }
          , b = x => {
            var C = Ve()
              , h = we(C);
            {
                var w = j => {
                    var q = Gi()
                      , R = i(q, !0);
                    o(q),
                    D( () => {
                        he(q, 1, `avatar avatar--emoji ${d() ?? ""}`, "svelte-6nt8hx"),
                        At(q, `width: ${s() ?? ""}px; height: ${s() ?? ""}px; font-size: ${s() * .6}px;`),
                        re(R, t.avatar)
                    }
                    ),
                    v(j, q)
                }
                  , y = j => {
                    us(j, {
                        get name() {
                            return r()
                        },
                        get size() {
                            return s()
                        }
                    })
                }
                ;
                P(h, j => {
                    t.avatar ? j(w) : j(y, !1)
                }
                , !0)
            }
            v(x, C)
        }
        ;
        P(u, x => {
            t.avatar && _(t.avatar) ? x(f) : x(b, !1)
        }
        )
    }
    v(n, l)
}
var Qi = p('<div class="verified-hint">  <div class="verified-hint__arrow"></div></div>')
  , Ji = p('<span class="verified-badge-wrapper svelte-1ulqoed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" fill="none" aria-label=" " role="img"><path fill="#0080FF" d="M15.13 1.848c1.46-2.514 5.057-2.45 6.429.115l1.253 2.343a3.677 3.677 0 0 0 3.762 1.926l2.597-.373c2.842-.408 5.036 2.493 3.92 5.182L32.07 13.5a3.804 3.804 0 0 0 .865 4.192l1.906 1.833c2.086 2.006 1.224 5.56-1.54 6.348l-2.525.721c-1.484.424-2.554 1.74-2.683 3.302l-.22 2.658c-.242 2.91-3.51 4.44-5.84 2.734l-2.13-1.558a3.644 3.644 0 0 0-4.21-.075l-2.181 1.482c-2.387 1.622-5.601-.023-5.743-2.94l-.129-2.664c-.076-1.566-1.1-2.919-2.568-3.395l-2.499-.81c-2.735-.887-3.474-4.469-1.32-6.4l1.967-1.763a3.801 3.801 0 0 0 1.008-4.16l-.935-2.492C2.27 7.785 4.563 4.963 7.39 5.472l2.582.465a3.673 3.673 0 0 0 3.826-1.791l1.333-2.298Z"></path><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="m24 15-8 8-4-4"></path></svg></span> <!>', 1);
function ks(n, t) {
    let r = ue(t, "size", 3, 14)
      , s = ue(t, "class", 3, "")
      , d = k(null)
      , _ = k(!1)
      , l = k(0)
      , u = k(0);
    function f() {
        if (!e(d))
            return;
        const j = e(d).getBoundingClientRect();
        a(l, j.left + j.width / 2),
        a(u, j.top, !0),
        a(_, !0)
    }
    function b() {
        a(_, !1)
    }
    var x = Ji()
      , C = we(x)
      , h = i(C);
    o(C),
    kt(C, j => a(d, j), () => e(d));
    var w = c(C, 2);
    {
        var y = j => {
            Na(j, {
                children: (q, R) => {
                    var L = Qi();
                    D( () => At(L, `left: ${e(l) ?? ""}px; top: ${e(u) ?? ""}px;`)),
                    v(q, L)
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        P(w, j => {
            e(_) && j(y)
        }
        )
    }
    D( () => {
        he(h, 0, `verified-badge ${s() ?? ""}`, "svelte-1ulqoed"),
        V(h, "width", r()),
        V(h, "height", r())
    }
    ),
    Zt("mouseenter", C, f),
    Zt("mouseleave", C, b),
    v(n, x)
}
var $i = p('<h2 class="modal__title svelte-ymr1h5"> </h2>')
  , el = p("<div></div>")
  , tl = p('<button class="modal__close svelte-ymr1h5" aria-label=""><!></button>')
  , al = p('<div class="modal__header svelte-ymr1h5"><!> <!></div>')
  , sl = p('<div class="modal__footer svelte-ymr1h5"><!></div>')
  , nl = p('<div><div role="presentation"></div> <div role="dialog" aria-modal="true"><!> <div><!></div> <!></div></div>');
function os(n, t) {
    Qe(t, !0);
    let r = ue(t, "title", 3, "")
      , s = ue(t, "maxWidth", 3, "480px")
      , d = ue(t, "showCloseButton", 3, !0)
      , _ = ue(t, "closeOnBackdrop", 3, !0)
      , l = ue(t, "closeDisabled", 3, !1)
      , u = ue(t, "noPadding", 3, !1)
      , f = ue(t, "priority", 3, !1)
      , b = k(!1)
      , x = k(!1);
    Et( () => {
        if (t.isOpen)
            a(b, !0),
            a(x, !1);
        else if (e(b)) {
            a(x, !0);
            const R = setTimeout( () => {
                a(b, !1),
                a(x, !1)
            }
            , 300);
            return () => clearTimeout(R)
        }
    }
    );
    function C() {
        l() || t.onClose()
    }
    function h() {
        _() && C()
    }
    function w(R) {
        R.key === "Escape" && !l() && C()
    }
    var y = Ve();
    Zt("keydown", _s, w);
    var j = we(y);
    {
        var q = R => {
            var L = nl();
            let N;
            var H = i(L);
            let ee;
            H.__click = h;
            var te = c(H, 2);
            let W;
            var Y = i(te);
            {
                var de = Z => {
                    var X = Ve()
                      , me = we(X);
                    Ja(me, () => t.header),
                    v(Z, X)
                }
                  , ce = Z => {
                    var X = Ve()
                      , me = we(X);
                    {
                        var pe = ze => {
                            var fe = al()
                              , Q = i(fe);
                            {
                                var F = T => {
                                    var g = $i()
                                      , m = i(g, !0);
                                    o(g),
                                    D( () => re(m, r())),
                                    v(T, g)
                                }
                                  , J = T => {
                                    var g = el();
                                    v(T, g)
                                }
                                ;
                                P(Q, T => {
                                    r() ? T(F) : T(J, !1)
                                }
                                )
                            }
                            var A = c(Q, 2);
                            {
                                var M = T => {
                                    var g = tl();
                                    g.__click = C;
                                    var m = i(g);
                                    ya(m, {
                                        size: 20
                                    }),
                                    o(g),
                                    D( () => g.disabled = l()),
                                    v(T, g)
                                }
                                ;
                                P(A, T => {
                                    d() && T(M)
                                }
                                )
                            }
                            o(fe),
                            v(ze, fe)
                        }
                        ;
                        P(me, ze => {
                            (r() || d()) && ze(pe)
                        }
                        , !0)
                    }
                    v(Z, X)
                }
                ;
                P(Y, Z => {
                    t.header ? Z(de) : Z(ce, !1)
                }
                )
            }
            var se = c(Y, 2);
            let G;
            var B = i(se);
            Ja(B, () => t.children),
            o(se);
            var I = c(se, 2);
            {
                var U = Z => {
                    var X = sl()
                      , me = i(X);
                    Ja(me, () => t.footer),
                    o(X),
                    v(Z, X)
                }
                ;
                P(I, Z => {
                    t.footer && Z(U)
                }
                )
            }
            o(te),
            o(L),
            D( () => {
                N = he(L, 1, "modal svelte-ymr1h5", null, N, {
                    priority: f()
                }),
                ee = he(H, 1, "modal__backdrop svelte-ymr1h5", null, ee, {
                    visible: t.isOpen && !e(x)
                }),
                W = he(te, 1, "modal__card svelte-ymr1h5", null, W, {
                    visible: t.isOpen && !e(x)
                }),
                At(te, `max-width: ${s() ?? ""}`),
                G = he(se, 1, "modal__body svelte-ymr1h5", null, G, {
                    "no-padding": u()
                })
            }
            ),
            v(R, L)
        }
        ;
        P(j, R => {
            (t.isOpen || e(x)) && R(q)
        }
        )
    }
    v(n, y),
    Je()
}
it(["click"]);
var rl = p('<img loading="lazy" decoding="async"/>');
function ol(n, t) {
    Qe(t, !0);
    let r = ue(t, "alt", 3, "")
      , s = ue(t, "class", 3, "")
      , d = ue(t, "placeholder", 3, "")
      , _ = null
      , l = k(!1)
      , u = k(!1)
      , f = k(!1)
      , b = t.src;
    Et( () => {
        t.src !== b && (b = t.src,
        a(l, !1),
        a(f, !1))
    }
    ),
    Ha( () => {
        if (!_)
            return;
        const y = new IntersectionObserver(j => {
            j.forEach(q => {
                q.isIntersecting && (a(u, !0),
                y.disconnect())
            }
            )
        }
        ,{
            rootMargin: "100px"
        });
        return y.observe(_),
        () => y.disconnect()
    }
    );
    function x() {
        a(l, !0)
    }
    function C() {
        a(f, !0)
    }
    var h = rl();
    let w;
    kt(h, y => _ = y, () => _),
    D( () => {
        V(h, "src", e(u) && !e(f) ? t.src : d() || void 0),
        V(h, "alt", r()),
        V(h, "width", t.width),
        V(h, "height", t.height),
        w = he(h, 1, `lazy-image ${s() ?? ""}`, "svelte-ad0ir9", w, {
            loaded: e(l),
            error: e(f)
        }),
        At(h, t.width && t.height ? `aspect-ratio: ${t.width} / ${t.height};` : "")
    }
    ),
    Zt("load", h, x),
    Zt("error", h, C),
    fn(h),
    v(n, h),
    Je()
}
var il = p('<button class="toast-clear-all svelte-1o52jmt"> </button>')
  , ll = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>')
  , cl = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M21 6h-2V4c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h2v3c0 .55.45 1 1 1h.5c.25 0 .5-.1.7-.29L10.92 18H17c1.1 0 2-.9 2-2v-2h2c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"></path></svg>')
  , dl = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>')
  , vl = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"></path></svg>')
  , ul = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path></svg>')
  , fl = p('<p class="toast__preview svelte-1o52jmt"> </p>')
  , _l = p('<div role="button" tabindex="0"><div><!></div> <div class="toast__avatar svelte-1o52jmt"><!></div> <div class="toast__content svelte-1o52jmt"><p class="toast__text svelte-1o52jmt"> </p> <!></div> <button class="toast__close svelte-1o52jmt" aria-label=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>')
  , gl = p('<div class="toast-container svelte-1o52jmt"><!> <!></div>');
function Hc(n, t) {
    Qe(t, !1);
    const r = () => bt(gn, "$toastNotifications", s)
      , [s,d] = aa()
      , _ = ["like", "comment", "reply", "repost", "mention", "wall_post"];
    function l(w) {
        if (ka.removeToast(w.id),
        ka.markAsRead(w.id),
        _.includes(w.type) && w.targetId)
            _r.open(w.targetId);
        else {
            const y = ka.getNotificationLink(w);
            Ma(y)
        }
    }
    function u(w, y) {
        w.stopPropagation(),
        ka.removeToast(y.id)
    }
    function f() {
        r().forEach(w => ka.removeToast(w.id))
    }
    Ls();
    var b = gl()
      , x = i(b);
    {
        var C = w => {
            var y = il();
            y.__click = f;
            var j = i(y);
            o(y),
            D( () => re(j, `  (${r().length ?? ""})`)),
            v(w, y)
        }
        ;
        P(x, w => {
            r().length > 1 && w(C)
        }
        )
    }
    var h = c(x, 2);
    ht(h, 3, r, w => w.id, (w, y, j) => {
        var q = _l();
        let R;
        q.__click = () => l(e(y)),
        q.__keydown = I => I.key === "Enter" && l(e(y));
        var L = i(q)
          , N = i(L);
        {
            var H = I => {
                var U = ll();
                v(I, U)
            }
              , ee = I => {
                var U = Ve()
                  , Z = we(U);
                {
                    var X = pe => {
                        var ze = cl();
                        v(pe, ze)
                    }
                      , me = pe => {
                        var ze = Ve()
                          , fe = we(ze);
                        {
                            var Q = J => {
                                var A = dl();
                                v(J, A)
                            }
                              , F = J => {
                                var A = Ve()
                                  , M = we(A);
                                {
                                    var T = m => {
                                        var z = vl();
                                        v(m, z)
                                    }
                                      , g = m => {
                                        var z = ul();
                                        v(m, z)
                                    }
                                    ;
                                    P(M, m => {
                                        e(y).type === "repost" ? m(T) : m(g, !1)
                                    }
                                    , !0)
                                }
                                v(J, A)
                            }
                            ;
                            P(fe, J => {
                                e(y).type === "follow" ? J(Q) : J(F, !1)
                            }
                            , !0)
                        }
                        v(pe, ze)
                    }
                    ;
                    P(Z, pe => {
                        e(y).type === "comment" || e(y).type === "reply" ? pe(X) : pe(me, !1)
                    }
                    , !0)
                }
                v(I, U)
            }
            ;
            P(N, I => {
                e(y).type === "like" ? I(H) : I(ee, !1)
            }
            )
        }
        o(L);
        var te = c(L, 2)
          , W = i(te);
        ea(W, {
            get avatar() {
                return e(y).actor.avatar
            },
            get name() {
                return e(y).actor.displayName
            },
            size: 32
        }),
        o(te);
        var Y = c(te, 2)
          , de = i(Y)
          , ce = i(de, !0);
        o(de);
        var se = c(de, 2);
        {
            var G = I => {
                var U = fl()
                  , Z = i(U, !0);
                o(U),
                D( () => re(Z, e(y).preview)),
                v(I, U)
            }
            ;
            P(se, I => {
                e(y).preview && I(G)
            }
            )
        }
        o(Y);
        var B = c(Y, 2);
        B.__click = I => u(I, e(y)),
        o(q),
        D(I => {
            R = he(q, 1, "toast svelte-1o52jmt", null, R, {
                "toast--stacked": e(j) > 0
            }),
            At(q, `--stack-index: ${e(j) ?? ""}`),
            he(L, 1, `toast__icon toast__icon--${e(y).type ?? ""}`, "svelte-1o52jmt"),
            re(ce, I)
        }
        , [ () => ka.getNotificationText(e(y))]),
        v(w, q)
    }
    ),
    o(b),
    v(n, b),
    Je(),
    d()
}
it(["click", "keydown"]);
var pl = p('<div class="error-toast svelte-15l2axh" role="alert"><div class="error-toast__icon svelte-15l2axh"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></div> <p class="error-toast__message svelte-15l2axh"> </p> <button class="error-toast__close svelte-15l2axh" aria-label=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>')
  , hl = p('<div class="error-toast-container svelte-15l2axh"></div>');
function Fc(n, t) {
    Qe(t, !1);
    const r = () => bt(ra, "$errorToast", s)
      , [s,d] = aa();
    function _(b) {
        ra.dismiss(b)
    }
    Ls();
    var l = Ve()
      , u = we(l);
    {
        var f = b => {
            var x = hl();
            ht(x, 5, r, C => C.id, (C, h) => {
                var w = pl()
                  , y = c(i(w), 2)
                  , j = i(y, !0);
                o(y);
                var q = c(y, 2);
                q.__click = () => _(e(h).id),
                o(w),
                D( () => re(j, e(h).message)),
                v(C, w)
            }
            ),
            o(x),
            v(b, x)
        }
        ;
        P(u, b => {
            r().length > 0 && b(f)
        }
        )
    }
    v(n, l),
    Je(),
    d()
}
it(["click"]);
var ml = p('<div class="image-viewer__counter svelte-nusr1p"> </div>')
  , wl = p('<button class="image-viewer__nav image-viewer__nav--prev svelte-nusr1p" aria-label=" "><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg></button>')
  , bl = p('<div><img class="image-viewer__image svelte-nusr1p" draggable="false"/></div>')
  , kl = p('<button class="image-viewer__nav image-viewer__nav--next svelte-nusr1p" aria-label=" "><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg></button>')
  , yl = p("<button></button>")
  , xl = p('<div class="image-viewer__dots svelte-nusr1p"></div>')
  , zl = p('<div class="image-viewer svelte-nusr1p"><div class="image-viewer__backdrop svelte-nusr1p" role="presentation"></div> <button class="image-viewer__close svelte-nusr1p" aria-label=""><!></button> <!> <div class="image-viewer__content svelte-nusr1p" role="presentation"><!> <div class="image-viewer__slider svelte-nusr1p" role="presentation"></div> <!></div> <!></div>');
function Js(n, t) {
    Qe(t, !0);
    let r = ue(t, "initialIndex", 3, 0)
      , s = k(pt(r()))
      , d = k(!1)
      , _ = k(!0)
      , l = k(!1)
      , u = k(0)
      , f = 0
      , b = 0
      , x = 0
      , C = null
      , h = 0
      , w = 0
      , y = 0
      , j = !1
      , q = 0;
    function R(I) {
        return document.body.appendChild(I),
        {
            destroy() {
                I.remove()
            }
        }
    }
    Et( () => (t.isOpen && (a(_, !0),
    a(s, r()),
    a(l, !1),
    a(u, 0),
    requestAnimationFrame( () => {
        requestAnimationFrame( () => {
            a(_, !1)
        }
        )
    }
    ),
    document.body.style.position !== "fixed" && (q = window.scrollY,
    document.body.style.position = "fixed",
    document.body.style.top = `-${q}px`,
    document.body.style.left = "0",
    document.body.style.right = "0",
    document.body.style.overflow = "hidden",
    j = !0)),
    () => {
        j && (document.body.style.position = "",
        document.body.style.top = "",
        document.body.style.left = "",
        document.body.style.right = "",
        document.body.style.overflow = "",
        window.scrollTo(0, q),
        j = !1)
    }
    ));
    function L() {
        t.onClose()
    }
    function N(I) {
        I === e(s) || e(d) || I < 0 || I >= t.attachments.length || (a(d, !0),
        a(s, I, !0),
        setTimeout( () => {
            a(d, !1)
        }
        , 300))
    }
    function H(I) {
        t.isOpen && (I.key === "Escape" ? L() : I.key === "ArrowRight" ? N(e(s) + 1) : I.key === "ArrowLeft" && N(e(s) - 1))
    }
    function ee(I, U) {
        I.stopPropagation(),
        N(U === "next" ? e(s) + 1 : e(s) - 1)
    }
    function te(I) {
        I.target.tagName === "IMG" && L()
    }
    function W(I) {
        e(d) || t.attachments.length <= 1 || (a(l, !0),
        f = I.touches[0].clientX,
        b = I.touches[0].clientY,
        a(u, 0),
        x = C?.offsetWidth || window.innerWidth,
        h = f,
        w = Date.now(),
        y = 0)
    }
    function Y(I) {
        if (!e(l) || e(d))
            return;
        const U = I.touches[0].clientX
          , Z = I.touches[0].clientY
          , X = U - f
          , me = Math.abs(Z - b);
        if (Math.abs(X) > me) {
            I.preventDefault();
            const pe = Date.now()
              , ze = pe - w;
            ze > 0 && (y = (U - h) / ze),
            h = U,
            w = pe;
            const fe = e(s) === 0 && X > 0
              , Q = e(s) === t.attachments.length - 1 && X < 0;
            fe || Q ? a(u, X * .2) : a(u, X)
        }
    }
    function de() {
        if (!e(l))
            return;
        a(l, !1);
        const I = x * .2
          , U = .5
          , Z = (e(u) < -I || y < -U) && e(s) < t.attachments.length - 1
          , X = (e(u) > I || y > U) && e(s) > 0;
        Z ? Ra(s) : X && Ra(s, -1),
        a(d, !0),
        a(u, 0),
        setTimeout( () => {
            a(d, !1)
        }
        , 250)
    }
    function ce(I) {
        const U = (I - e(s)) * 100
          , Z = x > 0 ? e(u) / x * 100 : 0;
        return `translateX(${U + Z}%)`
    }
    var se = Ve();
    Zt("keydown", _s, H);
    var G = we(se);
    {
        var B = I => {
            var U = zl()
              , Z = i(U);
            Z.__click = L;
            var X = c(Z, 2);
            X.__click = L;
            var me = i(X);
            ya(me, {
                size: 24
            }),
            o(X);
            var pe = c(X, 2);
            {
                var ze = m => {
                    var z = ml()
                      , S = i(z);
                    o(z),
                    D( () => re(S, `${e(s) + 1} / ${t.attachments.length ?? ""}`)),
                    v(m, z)
                }
                ;
                P(pe, m => {
                    t.attachments.length > 1 && m(ze)
                }
                )
            }
            var fe = c(pe, 2);
            fe.__click = L;
            var Q = i(fe);
            {
                var F = m => {
                    var z = wl();
                    z.__click = S => ee(S, "prev"),
                    D( () => z.disabled = e(s) === 0),
                    v(m, z)
                }
                ;
                P(Q, m => {
                    t.attachments.length > 1 && m(F)
                }
                )
            }
            var J = c(Q, 2);
            J.__click = te,
            J.__touchstart = W,
            J.__touchmove = Y,
            J.__touchend = de,
            ht(J, 23, () => t.attachments, (m, z) => m.id || z, (m, z, S) => {
                var O = bl();
                let ie;
                var ge = i(O);
                o(O),
                D(ve => {
                    ie = he(O, 1, "image-viewer__slide svelte-nusr1p", null, ie, {
                        dragging: e(l),
                        "no-transition": e(_)
                    }),
                    At(O, `transform: ${ve ?? ""}`),
                    V(ge, "src", e(z).url),
                    V(ge, "alt", e(z).alt || "")
                }
                , [ () => ce(e(S))]),
                v(m, O)
            }
            ),
            o(J),
            kt(J, m => C = m, () => C);
            var A = c(J, 2);
            {
                var M = m => {
                    var z = kl();
                    z.__click = S => ee(S, "next"),
                    D( () => z.disabled = e(s) === t.attachments.length - 1),
                    v(m, z)
                }
                ;
                P(A, m => {
                    t.attachments.length > 1 && m(M)
                }
                )
            }
            o(fe);
            var T = c(fe, 2);
            {
                var g = m => {
                    var z = xl();
                    ht(z, 21, () => t.attachments, Qt, (S, O, ie) => {
                        var ge = yl();
                        let ve;
                        ge.__click = be => {
                            be.stopPropagation(),
                            N(ie)
                        }
                        ,
                        V(ge, "aria-label", `   ${ie + 1}`),
                        D( () => ve = he(ge, 1, "image-viewer__dot svelte-nusr1p", null, ve, {
                            active: ie === e(s)
                        })),
                        v(S, ge)
                    }
                    ),
                    o(z),
                    v(m, z)
                }
                ;
                P(T, m => {
                    t.attachments.length > 1 && m(g)
                }
                )
            }
            o(U),
            qa(U, m => R?.(m)),
            v(I, U)
        }
        ;
        P(G, I => {
            t.isOpen && I(B)
        }
        )
    }
    v(n, se),
    Je()
}
it(["click", "touchstart", "touchmove", "touchend"]);
var Cl = p('<div class="hashtag-autocomplete__loading svelte-u041s5">...</div>')
  , Pl = p('<button><span class="hashtag-autocomplete__name svelte-u041s5"> </span> <span class="hashtag-autocomplete__count svelte-u041s5"> </span></button>')
  , Ml = p('<div class="hashtag-autocomplete svelte-u041s5"><!></div>');
function $s(n, t) {
    Qe(t, !0);
    let r = k(pt([])), s = k(!1), d = k(0), _, l;
    Et( () => {
        clearTimeout(l),
        t.query ? l = setTimeout( () => u(t.query), 150) : f()
    }
    );
    async function u(j) {
        a(s, !0);
        const q = await Ps.search(j, 8);
        q.data && (a(r, q.data.hashtags, !0),
        a(d, 0)),
        a(s, !1)
    }
    async function f() {
        a(s, !0);
        const j = await Ps.getTrending(8);
        j.data && (a(r, j.data.hashtags, !0),
        a(d, 0)),
        a(s, !1)
    }
    function b(j) {
        if (e(r).length !== 0)
            switch (j.key) {
            case "ArrowDown":
                j.preventDefault(),
                a(d, (e(d) + 1) % e(r).length);
                break;
            case "ArrowUp":
                j.preventDefault(),
                a(d, (e(d) - 1 + e(r).length) % e(r).length);
                break;
            case "Enter":
            case "Tab":
                j.preventDefault(),
                e(r)[e(d)] && t.onSelect(e(r)[e(d)]);
                break;
            case "Escape":
                j.preventDefault(),
                t.onClose();
                break
            }
    }
    function x(j) {
        t.onSelect(j)
    }
    function C(j) {
        _ && !_.contains(j.target) && t.onClose()
    }
    Et( () => (document.addEventListener("click", C),
    document.addEventListener("keydown", b),
    () => {
        document.removeEventListener("click", C),
        document.removeEventListener("keydown", b)
    }
    ));
    var h = Ve()
      , w = we(h);
    {
        var y = j => {
            var q = Ml()
              , R = i(q);
            {
                var L = H => {
                    var ee = Cl();
                    v(H, ee)
                }
                  , N = H => {
                    var ee = Ve()
                      , te = we(ee);
                    ht(te, 17, () => e(r), Qt, (W, Y, de) => {
                        var ce = Pl();
                        let se;
                        ce.__click = () => x(e(Y));
                        var G = i(ce)
                          , B = i(G);
                        o(G);
                        var I = c(G, 2)
                          , U = i(I);
                        o(I),
                        o(ce),
                        D( () => {
                            se = he(ce, 1, "hashtag-autocomplete__item svelte-u041s5", null, se, {
                                selected: de === e(d)
                            }),
                            re(B, `#${e(Y).name ?? ""}`),
                            re(U, `${e(Y).postsCount ?? ""} `)
                        }
                        ),
                        v(W, ce)
                    }
                    ),
                    v(H, ee)
                }
                ;
                P(R, H => {
                    e(s) && e(r).length === 0 ? H(L) : H(N, !1)
                }
                )
            }
            o(q),
            kt(q, H => _ = H, () => _),
            D( () => At(q, `top: ${t.position.top ?? ""}px; left: ${t.position.left ?? ""}px`)),
            v(j, q)
        }
        ;
        P(w, j => {
            (e(r).length > 0 || e(s)) && j(y)
        }
        )
    }
    v(n, h),
    Je()
}
it(["click"]);
var jl = p('<a class="hashtag-link svelte-jp7hc5"> </a>')
  , ql = p('<button class="post-content-expand svelte-jp7hc5"> </button>')
  , Sl = p('<div><p class="post-content svelte-jp7hc5"></p> <!></div>');
function en(n, t) {
    Qe(t, !0);
    const r = 1e3;
    let s = K( () => b(t.content))
      , d = k(null)
      , _ = k(!0)
      , l = k(!1)
      , u = k(!1)
      , f = K( () => t.maxHeight ?? r);
    Et( () => {
        if (e(d) && !e(u) && t.maxHeight !== void 0) {
            const q = e(d).scrollHeight;
            a(l, q > e(f)),
            a(u, !0)
        }
    }
    );
    function b(q) {
        const R = /#([a-zA-Z--0-9_]+)/g
          , L = [];
        let N = 0, H;
        for (; (H = R.exec(q)) !== null; )
            H.index > N && L.push({
                type: "text",
                value: q.slice(N, H.index)
            }),
            L.push({
                type: "hashtag",
                value: H[1]
            }),
            N = R.lastIndex;
        return N < q.length && L.push({
            type: "text",
            value: q.slice(N)
        }),
        L
    }
    function x(q) {
        q.stopPropagation(),
        a(_, !1)
    }
    var C = Sl();
    let h;
    var w = i(C);
    ht(w, 21, () => e(s), Qt, (q, R) => {
        var L = Ve()
          , N = we(L);
        {
            var H = te => {
                var W = jl()
                  , Y = i(W);
                o(W),
                D( () => {
                    V(W, "href", `/hashtag/${e(R).value ?? ""}`),
                    re(Y, `#${e(R).value ?? ""}`)
                }
                ),
                v(te, W)
            }
              , ee = te => {
                var W = Aa();
                D( () => re(W, e(R).value)),
                v(te, W)
            }
            ;
            P(N, te => {
                e(R).type === "hashtag" ? te(H) : te(ee, !1)
            }
            )
        }
        v(q, L)
    }
    ),
    o(w),
    kt(w, q => a(d, q), () => e(d));
    var y = c(w, 2);
    {
        var j = q => {
            var R = ql();
            R.__click = x,
            v(q, R)
        }
        ;
        P(y, q => {
            e(l) && e(_) && q(j)
        }
        )
    }
    o(C),
    D( () => {
        h = he(C, 1, "post-content-wrapper svelte-jp7hc5", null, h, {
            collapsed: e(u) && e(l) && e(_)
        }),
        At(C, `--max-height: ${e(f) ?? ""}px`)
    }
    ),
    v(n, C),
    Je()
}
it(["click"]);
var Il = p('<a class="hashtag-link svelte-1tzky91"> </a>')
  , Tl = p("<span></span>");
function Dl(n, t) {
    let r = ue(t, "class", 3, "")
      , s = K( () => d(t.content));
    function d(l) {
        const u = /#([a-zA-Z--0-9_]+)/g
          , f = [];
        let b = 0, x;
        for (; (x = u.exec(l)) !== null; )
            x.index > b && f.push({
                type: "text",
                value: l.slice(b, x.index)
            }),
            f.push({
                type: "hashtag",
                value: x[1]
            }),
            b = u.lastIndex;
        return b < l.length && f.push({
            type: "text",
            value: l.slice(b)
        }),
        f
    }
    var _ = Tl();
    ht(_, 21, () => e(s), Qt, (l, u) => {
        var f = Ve()
          , b = we(f);
        {
            var x = h => {
                var w = Il();
                w.__click = j => j.stopPropagation();
                var y = i(w);
                o(w),
                D( () => {
                    V(w, "href", `/hashtag/${e(u).value ?? ""}`),
                    re(y, `#${e(u).value ?? ""}`)
                }
                ),
                v(h, w)
            }
              , C = h => {
                var w = Aa();
                D( () => re(w, e(u).value)),
                v(h, w)
            }
            ;
            P(b, h => {
                e(u).type === "hashtag" ? h(x) : h(C, !1)
            }
            )
        }
        v(l, f)
    }
    ),
    o(_),
    D( () => he(_, 1, As(r()), "svelte-1tzky91")),
    v(n, _)
}
it(["click"]);
var Rl = p('<button class="voice-btn voice-btn--mic svelte-6l4ubt" title=" "><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line></svg></button>')
  , Al = p('<div class="voice-bar svelte-6l4ubt"></div>')
  , Ll = p('<div class="voice-bar svelte-6l4ubt" style="height: 4px; opacity: 0.3"></div>')
  , Ul = p('<div class="voice-recording svelte-6l4ubt"><button class="voice-btn voice-btn--stop svelte-6l4ubt" title=""><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="2"></rect></svg></button> <div class="voice-waveform voice-waveform--recording svelte-6l4ubt"><!> <!></div> <span class="voice-time svelte-6l4ubt"> </span> <button class="voice-btn voice-btn--cancel svelte-6l4ubt" title=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>')
  , Bl = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>')
  , Ol = Ee('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>')
  , El = p("<div></div>")
  , Nl = p('<div class="voice-preview svelte-6l4ubt"><button class="voice-btn voice-btn--play svelte-6l4ubt"><!></button> <div class="voice-waveform voice-waveform--preview svelte-6l4ubt"></div> <span class="voice-time svelte-6l4ubt"> </span> <button class="voice-btn voice-btn--delete svelte-6l4ubt" title=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button> <button class="voice-btn voice-btn--send svelte-6l4ubt" title=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></button></div>')
  , Hl = p('<div class="voice-recorder svelte-6l4ubt"><!></div>');
function Fl(n, t) {
    Qe(t, !0);
    let r = ue(t, "maxDuration", 3, 300)
      , s = k(!1)
      , d = k(!1)
      , _ = k(!1)
      , l = k(!1)
      , u = k(0)
      , f = k(0)
      , b = k(pt([]))
      , x = null
      , C = []
      , h = null
      , w = null
      , y = null
      , j = null
      , q = null
      , R = null
      , L = null
      , N = null;
    Ha( () => {
        y = new Audio,
        y.addEventListener("ended", () => {
            a(l, !1),
            a(f, 0)
        }
        ),
        y.addEventListener("timeupdate", () => {
            a(f, y?.currentTime || 0, !0)
        }
        )
    }
    ),
    fs( () => {
        H()
    }
    );
    function H() {
        W(),
        w && URL.revokeObjectURL(w),
        R && cancelAnimationFrame(R),
        L && clearInterval(L),
        N && N.getTracks().forEach(X => X.stop()),
        q && q.close()
    }
    async function ee() {
        try {
            N = await navigator.mediaDevices.getUserMedia({
                audio: !0
            }),
            q = new AudioContext,
            j = q.createAnalyser(),
            j.fftSize = 256,
            q.createMediaStreamSource(N).connect(j);
            const me = MediaRecorder.isTypeSupported("audio/webm;codecs=opus") ? "audio/webm;codecs=opus" : MediaRecorder.isTypeSupported("audio/webm") ? "audio/webm" : MediaRecorder.isTypeSupported("audio/mp4") ? "audio/mp4" : "audio/ogg";
            x = new MediaRecorder(N,{
                mimeType: me
            }),
            C = [],
            a(b, [], !0),
            x.ondataavailable = pe => {
                pe.data.size > 0 && C.push(pe.data)
            }
            ,
            x.onstop = () => {
                const pe = me.split(";")[0];
                h = new Blob(C,{
                    type: pe
                }),
                w = URL.createObjectURL(h),
                y && (y.src = w),
                a(_, !0)
            }
            ,
            x.start(100),
            a(s, !0),
            a(u, 0),
            t.onRecordingStart?.(),
            L = setInterval( () => {
                a(u, e(u) + .1),
                e(u) >= r() && W()
            }
            , 100),
            te()
        } catch {}
    }
    function te() {
        if (!j || !e(s))
            return;
        const X = new Uint8Array(j.frequencyBinCount)
          , me = () => {
            if (!e(s) || !j)
                return;
            R = requestAnimationFrame(me),
            j.getByteFrequencyData(X);
            const pe = X.reduce( (fe, Q) => fe + Q, 0) / X.length
              , ze = Math.min(pe / 128, 1);
            a(b, [...e(b).slice(-49), ze], !0)
        }
        ;
        me()
    }
    function W() {
        x && x.state !== "inactive" && x.stop(),
        N && N.getTracks().forEach(X => X.stop()),
        R && cancelAnimationFrame(R),
        L && clearInterval(L),
        a(s, !1),
        a(d, !1)
    }
    function Y() {
        !y || !w || (e(l) ? (y.pause(),
        a(l, !1)) : (y.play(),
        a(l, !0)))
    }
    function de() {
        y && (y.pause(),
        y.currentTime = 0),
        a(l, !1),
        w && URL.revokeObjectURL(w),
        h = null,
        w = null,
        a(_, !1),
        a(u, 0),
        a(f, 0),
        a(b, [], !0),
        t.onCancel?.()
    }
    function ce() {
        h && (t.onRecordingComplete(h, e(u)),
        de())
    }
    function se(X) {
        const me = Math.floor(X / 60)
          , pe = Math.floor(X % 60);
        return `${me}:${pe.toString().padStart(2, "0")}`
    }
    var G = {
        startRecording: ee
    }
      , B = Hl()
      , I = i(B);
    {
        var U = X => {
            var me = Rl();
            me.__click = ee,
            v(X, me)
        }
          , Z = X => {
            var me = Ve()
              , pe = we(me);
            {
                var ze = Q => {
                    var F = Ul()
                      , J = i(F);
                    J.__click = W;
                    var A = c(J, 2)
                      , M = i(A);
                    ht(M, 17, () => e(b), Qt, (O, ie) => {
                        var ge = Al();
                        D(ve => At(ge, `height: ${ve ?? ""}px; opacity: ${.4 + e(ie) * .6}`), [ () => Math.max(4, e(ie) * 24)]),
                        v(O, ge)
                    }
                    );
                    var T = c(M, 2);
                    {
                        var g = O => {
                            var ie = Ve()
                              , ge = we(ie);
                            ht(ge, 17, () => Array(50 - e(b).length), Qt, (ve, be) => {
                                var Te = Ll();
                                v(ve, Te)
                            }
                            ),
                            v(O, ie)
                        }
                        ;
                        P(T, O => {
                            e(b).length < 50 && O(g)
                        }
                        )
                    }
                    o(A);
                    var m = c(A, 2)
                      , z = i(m, !0);
                    o(m);
                    var S = c(m, 2);
                    S.__click = de,
                    o(F),
                    D(O => re(z, O), [ () => se(e(u))]),
                    v(Q, F)
                }
                  , fe = Q => {
                    var F = Ve()
                      , J = we(F);
                    {
                        var A = M => {
                            var T = Nl()
                              , g = i(T);
                            g.__click = Y;
                            var m = i(g);
                            {
                                var z = Te => {
                                    var Ge = Bl();
                                    v(Te, Ge)
                                }
                                  , S = Te => {
                                    var Ge = Ol();
                                    v(Te, Ge)
                                }
                                ;
                                P(m, Te => {
                                    e(l) ? Te(z) : Te(S, !1)
                                }
                                )
                            }
                            o(g);
                            var O = c(g, 2);
                            ht(O, 21, () => e(b), Qt, (Te, Ge, $e) => {
                                const lt = K( () => e(f) / e(u))
                                  , $ = K( () => $e / e(b).length);
                                var ae = El();
                                let E;
                                D(_e => {
                                    E = he(ae, 1, "voice-bar svelte-6l4ubt", null, E, {
                                        "voice-bar--played": e($) < e(lt)
                                    }),
                                    At(ae, `height: ${_e ?? ""}px`)
                                }
                                , [ () => Math.max(4, e(Ge) * 24)]),
                                v(Te, ae)
                            }
                            ),
                            o(O);
                            var ie = c(O, 2)
                              , ge = i(ie, !0);
                            o(ie);
                            var ve = c(ie, 2);
                            ve.__click = de;
                            var be = c(ve, 2);
                            be.__click = ce,
                            o(T),
                            D(Te => {
                                V(g, "title", e(l) ? "" : ""),
                                re(ge, Te)
                            }
                            , [ () => se(e(l) ? e(f) : e(u))]),
                            v(M, T)
                        }
                        ;
                        P(J, M => {
                            e(_) && M(A)
                        }
                        , !0)
                    }
                    v(Q, F)
                }
                ;
                P(pe, Q => {
                    e(s) ? Q(ze) : Q(fe, !1)
                }
                , !0)
            }
            v(X, me)
        }
        ;
        P(I, X => {
            !e(s) && !e(_) ? X(U) : X(Z, !1)
        }
        )
    }
    return o(B),
    v(n, B),
    Je(G)
}
it(["click"]);
let Ia = null
  , Ga = null;
const Qa = {
    play(n, t) {
        Ia && Ia !== n && Ga && Ga(),
        Ia = n,
        Ga = t
    },
    stop(n) {
        Ia === n && (Ia = null,
        Ga = null)
    },
    isPlaying(n) {
        return Ia === n
    }
};
var Vl = Ee('<svg class="spinner svelte-154nnrp" width="18" height="18" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg>')
  , Zl = Ee('<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="svelte-154nnrp"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>')
  , Wl = Ee('<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="svelte-154nnrp"><polygon points="6 3 20 12 6 21 6 3"></polygon></svg>')
  , Yl = p("<div></div>")
  , Xl = p('<span class="voice-message__duration svelte-154nnrp"> </span>')
  , Kl = p('<div><button class="voice-message__play svelte-154nnrp"><!></button> <div class="voice-message__content svelte-154nnrp"><div></div> <div class="voice-message__info svelte-154nnrp"><span class="voice-message__time svelte-154nnrp"> </span> <!></div></div></div>');
function Gl(n, t) {
    Qe(t, !0);
    const r = 45;
    let s = ue(t, "duration", 3, 0);
    const d = `voice_${t.src}_${Math.random().toString(36).slice(2)}`;
    let _ = k(!1)
      , l = k(!0)
      , u = k(0)
      , f = k(pt(s()))
      , b = pt(q())
      , x = k(!1)
      , C = k(null)
      , h = null
      , w = null
      , y = null;
    function j() {
        h && e(_) && (h.pause(),
        y && cancelAnimationFrame(y),
        a(_, !1))
    }
    Ha(async () => {
        h = new Audio(t.src),
        h.addEventListener("loadedmetadata", () => {
            a(f, h?.duration || s(), !0),
            a(l, !1)
        }
        ),
        h.addEventListener("ended", () => {
            a(_, !1),
            a(u, 0),
            y && cancelAnimationFrame(y),
            Qa.stop(d)
        }
        ),
        h.addEventListener("error", () => {
            a(l, !1)
        }
        )
    }
    ),
    fs( () => {
        h && (h.pause(),
        h = null),
        y && cancelAnimationFrame(y),
        Qa.stop(d)
    }
    );
    function q() {
        const g = [];
        let m = R(t.src);
        for (let z = 0; z < r; z++) {
            m = (m * 9301 + 49297) % 233280;
            const S = .2 + m / 233280 * .8;
            g.push(S)
        }
        return g
    }
    function R(g) {
        let m = 0;
        for (let z = 0; z < g.length; z++) {
            const S = g.charCodeAt(z);
            m = (m << 5) - m + S,
            m = m & m
        }
        return Math.abs(m)
    }
    function L() {
        !h || !e(_) || (a(u, h.currentTime, !0),
        y = requestAnimationFrame(L))
    }
    function N() {
        !h || e(l) || (e(_) ? (h.pause(),
        y && cancelAnimationFrame(y),
        a(_, !1),
        Qa.stop(d)) : (Qa.play(d, j),
        h.play(),
        a(_, !0),
        L()))
    }
    function H(g) {
        if (!w || !e(f))
            return 0;
        const m = w.getBoundingClientRect()
          , z = "touches"in g ? g.touches[0].clientX : g.clientX;
        return Math.max(0, Math.min(z - m.left, m.width)) / m.width
    }
    function ee(g) {
        if (!h || !e(f) || e(x))
            return;
        const m = H(g);
        h.currentTime = m * e(f),
        a(u, h.currentTime, !0)
    }
    function te(g) {
        if (!h || !e(f))
            return;
        a(x, !0);
        const m = H(g);
        h.currentTime = m * e(f),
        a(u, h.currentTime, !0),
        document.addEventListener("mousemove", W),
        document.addEventListener("mouseup", Y)
    }
    function W(g) {
        if (!e(x) || !h || !e(f))
            return;
        const m = H(g);
        h.currentTime = m * e(f),
        a(u, h.currentTime, !0)
    }
    function Y() {
        a(x, !1),
        document.removeEventListener("mousemove", W),
        document.removeEventListener("mouseup", Y)
    }
    function de(g) {
        a(C, H(g), !0)
    }
    function ce(g) {
        e(x) || a(C, H(g), !0)
    }
    function se() {
        a(C, null)
    }
    function G(g) {
        if (!isFinite(g) || isNaN(g))
            return "0:00";
        const m = Math.floor(g / 60)
          , z = Math.floor(g % 60);
        return `${m}:${z.toString().padStart(2, "0")}`
    }
    let B = K( () => e(f) > 0 ? e(u) / e(f) : 0);
    var I = Kl();
    let U;
    var Z = i(I);
    Z.__click = N;
    var X = i(Z);
    {
        var me = g => {
            var m = Vl();
            v(g, m)
        }
          , pe = g => {
            var m = Ve()
              , z = we(m);
            {
                var S = ie => {
                    var ge = Zl();
                    v(ie, ge)
                }
                  , O = ie => {
                    var ge = Wl();
                    v(ie, ge)
                }
                ;
                P(z, ie => {
                    e(_) ? ie(S) : ie(O, !1)
                }
                , !0)
            }
            v(g, m)
        }
        ;
        P(X, g => {
            e(l) ? g(me) : g(pe, !1)
        }
        )
    }
    o(Z);
    var ze = c(Z, 2)
      , fe = i(ze);
    let Q;
    fe.__click = ee,
    fe.__mousedown = te,
    fe.__mousemove = ce,
    ht(fe, 21, () => b, Qt, (g, m, z) => {
        const S = K( () => (z + .5) / b.length)
          , O = K( () => e(S) <= e(B))
          , ie = K( () => e(C) !== null && e(S) <= e(C) && !e(O));
        var ge = Yl();
        let ve;
        D(be => {
            ve = he(ge, 1, "voice-message__bar svelte-154nnrp", null, ve, {
                "voice-message__bar--played": e(O),
                "voice-message__bar--hover": e(ie)
            }),
            At(ge, `height: ${be ?? ""}px`)
        }
        , [ () => Math.max(4, e(m) * 24)]),
        v(g, ge)
    }
    ),
    o(fe),
    kt(fe, g => w = g, () => w);
    var F = c(fe, 2)
      , J = i(F)
      , A = i(J, !0);
    o(J);
    var M = c(J, 2);
    {
        var T = g => {
            var m = Xl()
              , z = i(m);
            o(m),
            D(S => re(z, `/ ${S ?? ""}`), [ () => G(e(f))]),
            v(g, m)
        }
        ;
        P(M, g => {
            (e(_) || e(u) > 0) && g(T)
        }
        )
    }
    o(F),
    o(ze),
    o(I),
    D(g => {
        U = he(I, 1, "voice-message svelte-154nnrp", null, U, {
            "voice-message--playing": e(_)
        }),
        Z.disabled = e(l),
        Q = he(fe, 1, "voice-message__waveform svelte-154nnrp", null, Q, {
            "voice-message__waveform--dragging": e(x)
        }),
        re(A, g)
    }
    , [ () => G(e(_) || e(u) > 0 ? e(u) : e(f))]),
    Zt("mouseenter", fe, de),
    Zt("mouseleave", fe, se),
    v(n, I),
    Je()
}
it(["click", "mousedown", "mousemove"]);
var Ql = p('<button><span class="size-preview svelte-12bmgzp"></span></button>')
  , Jl = p("<button></button>")
  , $l = Ee('<svg class="spinner svelte-12bmgzp" width="18" height="18" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg> ...', 1)
  , ec = p('<div class="drawing-overlay svelte-12bmgzp" role="presentation"><div class="drawing-modal svelte-12bmgzp" role="dialog" aria-modal="true"><div class="drawing-header svelte-12bmgzp"><h2 class="drawing-title svelte-12bmgzp"></h2> <button class="drawing-close svelte-12bmgzp" aria-label=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12bmgzp"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="drawing-toolbar svelte-12bmgzp"><div class="toolbar-section svelte-12bmgzp"><span class="toolbar-label svelte-12bmgzp"></span> <div class="toolbar-tools svelte-12bmgzp"><button title=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12bmgzp"><path d="M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"></path><path d="M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"></path><path d="M14.5 17.5 4.5 15"></path></svg></button> <button title=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12bmgzp"><path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"></path><path d="M22 21H7"></path><path d="m5 11 9 9"></path></svg></button> <button title=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12bmgzp"><line x1="5" y1="19" x2="19" y2="5"></line></svg></button> <button title=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12bmgzp"><rect x="3" y="3" width="18" height="18" rx="2"></rect></svg></button> <button title=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-12bmgzp"><circle cx="12" cy="12" r="10"></circle></svg></button></div></div> <div class="toolbar-section svelte-12bmgzp"><span class="toolbar-label svelte-12bmgzp"> </span> <div class="toolbar-sizes svelte-12bmgzp"></div></div> <div class="toolbar-section toolbar-section--actions svelte-12bmgzp"><button class="action-btn svelte-12bmgzp" title=" (Ctrl+Z)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"></path><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path></svg></button> <button class="action-btn svelte-12bmgzp" title=" (Ctrl+Y)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"></path><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"></path></svg></button> <button class="action-btn action-btn--danger svelte-12bmgzp" title=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path></svg></button></div></div> <div class="drawing-colors svelte-12bmgzp"><!> <label class="color-picker-label svelte-12bmgzp"><input type="color" class="color-picker-input svelte-12bmgzp"/> <span class="color-picker-preview svelte-12bmgzp" style="background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red);"></span></label></div> <div class="drawing-canvas-container svelte-12bmgzp"><canvas class="drawing-canvas svelte-12bmgzp"></canvas></div> <div class="drawing-footer svelte-12bmgzp"><button class="drawing-btn drawing-btn--cancel svelte-12bmgzp"></button> <button class="drawing-btn drawing-btn--save svelte-12bmgzp"><!></button></div></div></div>');
function tn(n, t) {
    Qe(t, !0);
    let r = ue(t, "isSaving", 3, !1)
      , s = k(null)
      , d = null
      , _ = k(!1)
      , l = k("brush")
      , u = k(5)
      , f = k("#ffffff")
      , b = 0
      , x = 0
      , C = 0
      , h = 0
      , w = null;
    const y = ["#ffffff", "#000000", "#ff0000", "#ff6600", "#ffff00", "#00ff00", "#00ffff", "#0066ff", "#9900ff", "#ff00ff", "#ff9999", "#ffcc99", "#ffff99", "#99ff99", "#99ffff", "#9999ff", "#cc99ff", "#ff99ff", "#666666", "#999999"]
      , j = [2, 5, 10, 15, 25, 40];
    let q = k(pt([]))
      , R = k(-1);
    const L = 50;
    let N = K( () => e(R) > 0)
      , H = K( () => e(R) < e(q).length - 1);
    function ee(A) {
        if (!d || !e(s))
            return;
        const M = e(s).parentElement;
        if (M) {
            const T = Math.min(M.clientWidth - 32, 800);
            t.aspectRatio ? (e(s).width = T,
            e(s).height = Math.round(T / t.aspectRatio)) : (e(s).width = T,
            e(s).height = Math.min(window.innerHeight - 300, 500))
        }
        if (w = document.createElement("canvas"),
        w.width = e(s).width,
        w.height = e(s).height,
        d.fillStyle = "#1a1a1a",
        d.fillRect(0, 0, e(s).width, e(s).height),
        A) {
            const T = new Image;
            T.crossOrigin = "anonymous",
            T.onload = () => {
                if (!d || !e(s))
                    return;
                d.fillStyle = "#1a1a1a",
                d.fillRect(0, 0, e(s).width, e(s).height);
                const g = Math.min(e(s).width / T.width, e(s).height / T.height)
                  , m = T.width * g
                  , z = T.height * g
                  , S = (e(s).width - m) / 2
                  , O = (e(s).height - z) / 2;
                d.drawImage(T, S, O, m, z),
                te()
            }
            ,
            T.onerror = () => te(),
            T.src = A
        } else
            te()
    }
    function te() {
        if (!d || !e(s))
            return;
        e(R) < e(q).length - 1 && a(q, e(q).slice(0, e(R) + 1), !0);
        const A = d.getImageData(0, 0, e(s).width, e(s).height);
        a(q, [...e(q), A], !0),
        e(q).length > L && a(q, e(q).slice(e(q).length - L), !0),
        a(R, e(q).length - 1)
    }
    function W() {
        !e(N) || !d || !e(s) || (Ra(R, -1),
        d.putImageData(e(q)[e(R)], 0, 0))
    }
    function Y() {
        !e(H) || !d || !e(s) || (Ra(R),
        d.putImageData(e(q)[e(R)], 0, 0))
    }
    function de(A) {
        const M = e(s).getBoundingClientRect();
        let T, g;
        return A instanceof TouchEvent ? (T = A.touches[0]?.clientX ?? A.changedTouches[0]?.clientX ?? 0,
        g = A.touches[0]?.clientY ?? A.changedTouches[0]?.clientY ?? 0) : (T = A.clientX,
        g = A.clientY),
        {
            x: T - M.left,
            y: g - M.top
        }
    }
    function ce(A) {
        if (!d)
            return;
        A.preventDefault(),
        a(_, !0);
        const {x: M, y: T} = de(A);
        if (b = M,
        x = T,
        e(l) === "line" || e(l) === "rectangle" || e(l) === "circle") {
            if (C = M,
            h = T,
            w) {
                const g = w.getContext("2d");
                g && g.drawImage(e(s), 0, 0)
            }
        } else
            d.beginPath(),
            d.arc(M, T, e(u) / 2, 0, Math.PI * 2),
            d.fillStyle = e(l) === "eraser" ? "#1a1a1a" : e(f),
            d.fill();
        document.addEventListener("mousemove", se),
        document.addEventListener("mouseup", G)
    }
    function se(A) {
        B(A)
    }
    function G(A) {
        I(A),
        document.removeEventListener("mousemove", se),
        document.removeEventListener("mouseup", G)
    }
    function B(A) {
        if (!e(_) || !d || !e(s))
            return;
        A.preventDefault();
        const {x: M, y: T} = de(A);
        e(l) === "brush" || e(l) === "eraser" ? (d.beginPath(),
        d.moveTo(b, x),
        d.lineTo(M, T),
        d.strokeStyle = e(l) === "eraser" ? "#1a1a1a" : e(f),
        d.lineWidth = e(u),
        d.lineCap = "round",
        d.lineJoin = "round",
        d.stroke(),
        b = M,
        x = T) : (e(l) === "line" || e(l) === "rectangle" || e(l) === "circle") && w && (d.clearRect(0, 0, e(s).width, e(s).height),
        d.drawImage(w, 0, 0),
        U(C, h, M, T))
    }
    function I(A) {
        if (!(!e(_) || !d)) {
            if (A.preventDefault(),
            e(l) === "line" || e(l) === "rectangle" || e(l) === "circle") {
                const {x: M, y: T} = de(A);
                w && (d.clearRect(0, 0, e(s).width, e(s).height),
                d.drawImage(w, 0, 0),
                U(C, h, M, T))
            }
            a(_, !1),
            te()
        }
    }
    function U(A, M, T, g, m) {
        if (d) {
            if (d.strokeStyle = e(f),
            d.lineWidth = e(u),
            d.lineCap = "round",
            d.lineJoin = "round",
            e(l) === "line")
                d.beginPath(),
                d.moveTo(A, M),
                d.lineTo(T, g),
                d.stroke();
            else if (e(l) === "rectangle")
                d.beginPath(),
                d.strokeRect(A, M, T - A, g - M);
            else if (e(l) === "circle") {
                const z = (A + T) / 2
                  , S = (M + g) / 2
                  , O = Math.abs(T - A) / 2
                  , ie = Math.abs(g - M) / 2;
                d.beginPath(),
                d.ellipse(z, S, O, ie, 0, 0, Math.PI * 2),
                d.stroke()
            }
        }
    }
    function Z() {
        !d || !e(s) || (d.fillStyle = "#1a1a1a",
        d.fillRect(0, 0, e(s).width, e(s).height),
        te())
    }
    function X() {
        e(s) && e(s).toBlob(A => {
            if (A) {
                const M = e(s).toDataURL("image/png");
                t.onSave(A, M)
            }
        }
        , "image/png")
    }
    let me = !1;
    function pe(A) {
        me = A.target === A.currentTarget
    }
    function ze(A) {
        me && A.target === A.currentTarget && t.onClose(),
        me = !1
    }
    function fe(A) {
        t.isOpen && (A.key === "Escape" ? t.onClose() : (A.ctrlKey || A.metaKey) && A.key === "z" ? (A.preventDefault(),
        A.shiftKey ? Y() : W()) : (A.ctrlKey || A.metaKey) && A.key === "y" && (A.preventDefault(),
        Y()))
    }
    Et( () => {
        const A = t.initialImage;
        return t.isOpen ? (a(l, "brush"),
        a(u, 5),
        a(f, "#ffffff"),
        a(_, !1),
        a(q, [], !0),
        a(R, -1),
        document.addEventListener("keydown", fe),
        setTimeout( () => {
            e(s) && (d = e(s).getContext("2d", {
                willReadFrequently: !0
            }),
            ee(A))
        }
        , 50)) : (d = null,
        w = null,
        a(q, [], !0),
        a(R, -1)),
        () => {
            document.removeEventListener("keydown", fe),
            document.removeEventListener("mousemove", se),
            document.removeEventListener("mouseup", G)
        }
    }
    );
    var Q = Ve()
      , F = we(Q);
    {
        var J = A => {
            var M = ec();
            M.__mousedown = pe,
            M.__click = ze;
            var T = i(M)
              , g = i(T)
              , m = c(i(g), 2);
            m.__click = function(...Ze) {
                t.onClose?.apply(this, Ze)
            }
            ,
            o(g);
            var z = c(g, 2)
              , S = i(z)
              , O = c(i(S), 2)
              , ie = i(O);
            let ge;
            ie.__click = () => a(l, "brush");
            var ve = c(ie, 2);
            let be;
            ve.__click = () => a(l, "eraser");
            var Te = c(ve, 2);
            let Ge;
            Te.__click = () => a(l, "line");
            var $e = c(Te, 2);
            let lt;
            $e.__click = () => a(l, "rectangle");
            var $ = c($e, 2);
            let ae;
            $.__click = () => a(l, "circle"),
            o(O),
            o(S);
            var E = c(S, 2)
              , _e = i(E)
              , De = i(_e);
            o(_e);
            var Le = c(_e, 2);
            ht(Le, 21, () => j, Qt, (Ze, ne) => {
                var le = Ql();
                let Pe;
                le.__click = () => a(u, e(ne), !0);
                var dt = i(le);
                o(le),
                D( (vt, Pt) => {
                    Pe = he(le, 1, "size-btn svelte-12bmgzp", null, Pe, {
                        active: e(u) === e(ne)
                    }),
                    V(le, "aria-label", `  ${e(ne) ?? ""}px`),
                    At(dt, `width: ${vt ?? ""}px; height: ${Pt ?? ""}px;`)
                }
                , [ () => Math.min(e(ne), 20), () => Math.min(e(ne), 20)]),
                v(Ze, le)
            }
            ),
            o(Le),
            o(E);
            var Xe = c(E, 2)
              , Ce = i(Xe);
            Ce.__click = W;
            var je = c(Ce, 2);
            je.__click = Y;
            var ke = c(je, 2);
            ke.__click = Z,
            o(Xe),
            o(z);
            var xe = c(z, 2)
              , ye = i(xe);
            ht(ye, 17, () => y, Qt, (Ze, ne) => {
                var le = Jl();
                let Pe;
                le.__click = () => a(f, e(ne), !0),
                D( () => {
                    Pe = he(le, 1, "color-btn svelte-12bmgzp", null, Pe, {
                        active: e(f) === e(ne)
                    }),
                    At(le, `background-color: ${e(ne) ?? ""};`),
                    V(le, "aria-label", ` ${e(ne) ?? ""}`)
                }
                ),
                v(Ze, le)
            }
            );
            var Ne = c(ye, 2)
              , He = i(Ne);
            Ta(He),
            _t(2),
            o(Ne),
            o(xe);
            var ut = c(xe, 2)
              , Be = i(ut);
            Be.__mousedown = ce,
            Be.__touchstart = ce,
            Be.__touchmove = B,
            Be.__touchend = I,
            kt(Be, Ze => a(s, Ze), () => e(s)),
            o(ut);
            var oe = c(ut, 2)
              , qe = i(oe);
            qe.__click = function(...Ze) {
                t.onClose?.apply(this, Ze)
            }
            ;
            var Se = c(qe, 2);
            Se.__click = X;
            var et = i(Se);
            {
                var yt = Ze => {
                    var ne = $l();
                    _t(),
                    v(Ze, ne)
                }
                  , xt = Ze => {
                    var ne = Aa("");
                    v(Ze, ne)
                }
                ;
                P(et, Ze => {
                    r() ? Ze(yt) : Ze(xt, !1)
                }
                )
            }
            o(Se),
            o(oe),
            o(T),
            o(M),
            D( () => {
                ge = he(ie, 1, "tool-btn svelte-12bmgzp", null, ge, {
                    active: e(l) === "brush"
                }),
                be = he(ve, 1, "tool-btn svelte-12bmgzp", null, be, {
                    active: e(l) === "eraser"
                }),
                Ge = he(Te, 1, "tool-btn svelte-12bmgzp", null, Ge, {
                    active: e(l) === "line"
                }),
                lt = he($e, 1, "tool-btn svelte-12bmgzp", null, lt, {
                    active: e(l) === "rectangle"
                }),
                ae = he($, 1, "tool-btn svelte-12bmgzp", null, ae, {
                    active: e(l) === "circle"
                }),
                re(De, `: ${e(u) ?? ""}px`),
                Ce.disabled = !e(N),
                je.disabled = !e(H),
                qe.disabled = r(),
                Se.disabled = r()
            }
            ),
            Pa(He, () => e(f), Ze => a(f, Ze)),
            v(A, M)
        }
        ;
        P(F, A => {
            t.isOpen && A(J)
        }
        )
    }
    v(n, Q),
    Je()
}
it(["mousedown", "click", "touchstart", "touchmove", "touchend"]);
var tc = p('<hr class="comment-divider svelte-61nzs9"/>')
  , ac = p("<div><!></div> <!>", 1)
  , sc = p('<div class="comments-loading svelte-61nzs9"><!></div>')
  , nc = p('<div class="comments-sort svelte-61nzs9"><select class="comments-sort-select svelte-61nzs9"><option></option><option> </option><option> </option></select></div> <div class="post-comments svelte-61nzs9"><!> <!></div>', 1)
  , rc = p('<div class="post-comments-wrapper svelte-61nzs9"><!></div>');
function oc(n, t) {
    Qe(t, !0);
    let r = ue(t, "canDeleteComments", 3, !1)
      , s = k(pt([...t.comments]))
      , d = k("popular")
      , _ = k("popular")
      , l = k(!1)
      , u = k(null)
      , f = k(t.commentsCount > 3)
      , b = k(null)
      , x = k(null)
      , C = k(null)
      , h = null;
    Et( () => (e(C) && (h?.disconnect(),
    h = new IntersectionObserver(H => {
        H[0]?.isIntersecting && e(f) && !e(l) && y()
    }
    ,{
        rootMargin: "200px"
    }),
    h.observe(e(C))),
    () => {
        h?.disconnect()
    }
    )),
    Et( () => {
        t.comments.length > 0 && e(s).length === 0 && (a(s, [...t.comments], !0),
        a(f, t.commentsCount > t.comments.length))
    }
    ),
    Et( () => {
        const H = e(d);
        H !== e(_) && e(s).length > 0 && !e(l) && w(H, 10, !0)
    }
    );
    async function w(H, ee, te=!1) {
        if (!e(l)) {
            a(l, !0);
            try {
                const W = te ? void 0 : e(u) ?? void 0
                  , Y = await pa.getPostComments(t.postId, ee, H, W);
                if (!Y.error && Y.data) {
                    const de = Y.data.comments.map(ar);
                    if (te)
                        a(s, de, !0);
                    else {
                        const ce = new Set(e(s).map(G => G.id))
                          , se = de.filter(G => !ce.has(G.id));
                        a(s, [...e(s), ...se], !0)
                    }
                    a(u, Y.data.nextCursor, !0),
                    a(f, Y.data.hasMore, !0),
                    a(_, H, !0)
                }
            } catch {} finally {
                a(l, !1)
            }
        }
    }
    async function y() {
        wa() && (e(l) || !e(f) || await w(e(d), 20))
    }
    async function j(H) {
        a(s, [...e(s), H], !0),
        a(b, H.id, !0),
        await vs();
        const ee = e(x)?.querySelector(`[data-comment-id="${H.id}"]`);
        ee && ee.scrollIntoView({
            behavior: "smooth",
            block: "center"
        }),
        setTimeout( () => {
            a(b, null)
        }
        , 2500)
    }
    var q = {
        addComment: j
    }
      , R = rc()
      , L = i(R);
    {
        var N = H => {
            var ee = nc()
              , te = we(ee)
              , W = i(te)
              , Y = i(W);
            Y.value = Y.__value = "popular";
            var de = c(Y);
            de.value = de.__value = "newest";
            var ce = c(de);
            ce.value = ce.__value = "oldest",
            o(W),
            o(te);
            var se = c(te, 2)
              , G = i(se);
            ht(G, 19, () => e(s), U => U.id, (U, Z, X) => {
                var me = ac()
                  , pe = we(me)
                  , ze = i(pe);
                {
                    let F = K( () => e(b) === e(Z).id);
                    si(ze, {
                        get comment() {
                            return e(Z)
                        },
                        get canDelete() {
                            return r()
                        },
                        get isHighlighted() {
                            return e(F)
                        },
                        get onReport() {
                            return t.onReportComment
                        }
                    })
                }
                o(pe);
                var fe = c(pe, 2);
                {
                    var Q = F => {
                        var J = tc();
                        v(F, J)
                    }
                    ;
                    P(fe, F => {
                        e(X) < e(s).length - 1 && F(Q)
                    }
                    )
                }
                D( () => V(pe, "data-comment-id", e(Z).id)),
                v(U, me)
            }
            );
            var B = c(G, 2);
            {
                var I = U => {
                    var Z = sc()
                      , X = i(Z);
                    Da(X, {}),
                    o(Z),
                    kt(Z, me => a(C, me), () => e(C)),
                    v(U, Z)
                }
                ;
                P(B, U => {
                    e(f) && U(I)
                }
                )
            }
            o(se),
            D( () => W.disabled = e(l)),
            mn(W, () => e(d), U => a(d, U)),
            v(H, ee)
        }
        ;
        P(L, H => {
            e(s).length > 0 && H(N)
        }
        )
    }
    return o(R),
    kt(R, H => a(x, H), () => e(x)),
    v(n, R),
    Je(q)
}
var ic = p('<div class="post-modal__loading svelte-1wzwwt5"><!></div>')
  , lc = p('<div class="post-modal__error svelte-1wzwwt5"><p class="svelte-1wzwwt5"> </p> <button class="post-modal__retry svelte-1wzwwt5"> </button></div>')
  , cc = p('<span class="post-modal__verified svelte-1wzwwt5"><!></span>')
  , dc = p('<button class="post-modal__dropdown-item danger svelte-1wzwwt5"><!> <span class="svelte-1wzwwt5"></span></button>')
  , vc = p('<button class="post-modal__dropdown-item danger svelte-1wzwwt5"><!> <span class="svelte-1wzwwt5"></span></button>')
  , uc = p('<div class="post-modal__dropdown svelte-1wzwwt5" role="menu" tabindex="-1"><button class="post-modal__dropdown-item svelte-1wzwwt5"><!> <span class="svelte-1wzwwt5"></span></button> <!></div>')
  , fc = p('<div class="post-modal__text svelte-1wzwwt5"><!></div>')
  , _c = p('<div class="post-modal__original svelte-1wzwwt5"><!></div>')
  , gc = p('<div class="post-modal__gallery svelte-1wzwwt5"><!></div>')
  , pc = p('<div class="post-modal__comments-loading svelte-1wzwwt5"><!></div>')
  , hc = p('<div class="post-modal__comments svelte-1wzwwt5"><!></div>')
  , mc = p('<div class="post-modal__input-wrapper svelte-1wzwwt5"><!></div>')
  , wc = p('<div class="post-modal__scroll svelte-1wzwwt5"><div class="post-modal__header svelte-1wzwwt5"><div class="post-modal__header-left svelte-1wzwwt5"><div><!></div> <div class="post-modal__meta svelte-1wzwwt5"><div class="post-modal__author-row svelte-1wzwwt5"><span> </span> <!> <!></div> <!></div></div> <div class="post-modal__menu svelte-1wzwwt5"><button class="post-modal__menu-btn svelte-1wzwwt5" aria-label=" "><!></button> <!></div></div> <!> <!> <!> <div class="post-modal__actions svelte-1wzwwt5"><div class="post-modal__actions-left svelte-1wzwwt5"><button><!> <span class="svelte-1wzwwt5"> </span></button> <button class="post-modal__action svelte-1wzwwt5"><!> <span class="svelte-1wzwwt5"> </span></button> <button><!> <span class="svelte-1wzwwt5"> </span></button></div> <div class="post-modal__views svelte-1wzwwt5"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1wzwwt5"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" class="svelte-1wzwwt5"></path><circle cx="12" cy="12" r="3" class="svelte-1wzwwt5"></circle></svg> <span class="svelte-1wzwwt5"> </span></div></div> <!></div> <!>', 1)
  , bc = p('<div class="post-modal-backdrop svelte-1wzwwt5"><div><button class="post-modal-close svelte-1wzwwt5" aria-label=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" class="svelte-1wzwwt5"><path d="M18 6L6 18M6 6l12 12" class="svelte-1wzwwt5"></path></svg></button> <div class="post-modal svelte-1wzwwt5"><div class="post-modal__swipe-indicator svelte-1wzwwt5"></div> <!></div></div></div>')
  , kc = p("<!> <!>", 1);
function yc(n, t) {
    Qe(t, !0);
    const r = () => bt(e(w), "$postStateStore", d)
      , s = () => bt(ss, "$page", d)
      , [d,_] = aa();
    let l = ue(t, "initialPost", 3, null)
      , u = k(null)
      , f = k(!1)
      , b = k("")
      , x = k(null)
      , C = k(null)
      , h = k(!1)
      , w = K( () => Bt.getPostStore(t.postId))
      , y = K( () => r()?.isLiked ?? e(u)?.isLiked ?? !1)
      , j = K( () => r()?.likesCount ?? e(u)?.likesCount ?? 0)
      , q = K( () => r()?.isReposted ?? e(u)?.isReposted ?? !1)
      , R = K( () => r()?.repostsCount ?? e(u)?.repostsCount ?? 0)
      , L = K( () => r()?.commentsCount ?? e(u)?.commentsCount ?? 0)
      , N = k(!1)
      , H = Promise.resolve()
      , ee = k(!1)
      , te = k(!1)
      , W = k(null)
      , Y = k(0)
      , de = k(0)
      , ce = k(!1)
      , se = k(0);
    const G = 20;
    let B = k(0);
    Et( () => {
        t.isOpen && t.postId && (l() ? (a(u, l()),
        a(N, !1),
        Bt.set(t.postId, {
            isLiked: l().isLiked,
            likesCount: l().likesCount,
            isReposted: l().isReposted,
            repostsCount: l().repostsCount,
            commentsCount: l().commentsCount
        }),
        Ot.recordView(t.postId),
        a(te, !0),
        U()) : I())
    }
    ),
    Et( () => {
        if (!t.isOpen)
            return;
        const $ = window.scrollY;
        return a(B, $, !0),
        document.body.style.overflow = "hidden",
        document.body.style.position = "fixed",
        document.body.style.width = "100%",
        document.body.style.top = `-${$}px`,
        () => {
            document.body.style.overflow = "",
            document.body.style.position = "",
            document.body.style.width = "",
            document.body.style.top = "",
            window.scrollTo(0, $),
            a(se, 0),
            a(ce, !1)
        }
    }
    );
    async function I() {
        a(f, !0),
        a(b, "");
        const $ = await Ot.getPost(t.postId);
        if ($.error) {
            a(b, $.error, !0),
            a(f, !1);
            return
        }
        $.data && (a(u, $.data, !0),
        a(N, !1),
        Bt.set(t.postId, {
            isLiked: $.data.isLiked,
            likesCount: $.data.likesCount,
            isReposted: $.data.isReposted,
            repostsCount: $.data.repostsCount,
            commentsCount: $.data.commentsCount
        }),
        Ot.recordView(t.postId)),
        a(f, !1)
    }
    async function U() {
        const $ = await Ot.getPost(t.postId);
        $.data?.comments && e(u) && a(u, {
            ...e(u),
            comments: $.data.comments
        }, !0),
        a(te, !1)
    }
    function Z() {
        a(u, null),
        a(b, ""),
        a(h, !1),
        t.onClose()
    }
    function X($) {
        $.stopPropagation(),
        $.target === $.currentTarget && Z()
    }
    function me($) {
        $.key === "Escape" && Z()
    }
    function pe($) {
        a(Y, $.touches[0].clientY, !0),
        a(de, $.touches[0].clientY, !0),
        e(W) && e(W).scrollTop <= 0 && a(ce, !0)
    }
    function ze($) {
        a(de, $.touches[0].clientY, !0);
        const ae = e(de) - e(Y);
        if (e(W) && e(W).scrollTop > 0) {
            a(ce, !1),
            a(se, 0);
            return
        }
        e(W) && e(W).scrollTop <= 0 && ae > 0 && $.preventDefault(),
        e(ce) && (ae > 0 ? a(se, ae * .6) : a(se, 0))
    }
    function fe() {
        if (!e(ce)) {
            a(se, 0);
            return
        }
        a(ce, !1),
        e(se) > G ? Z() : a(se, 0)
    }
    Et( () => {
        if (e(W))
            return e(W).addEventListener("touchstart", pe, {
                passive: !0
            }),
            e(W).addEventListener("touchmove", ze, {
                passive: !1
            }),
            e(W).addEventListener("touchend", fe, {
                passive: !0
            }),
            () => {
                e(W).removeEventListener("touchstart", pe),
                e(W).removeEventListener("touchmove", ze),
                e(W).removeEventListener("touchend", fe)
            }
    }
    );
    function Q() {
        if (!wa() || !e(u))
            return;
        a(N, !0);
        const $ = !e(y);
        Bt.toggleLike(t.postId, $),
        H = H.then(async () => {
            ($ ? await Ot.likePost(t.postId) : await Ot.unlikePost(t.postId)).success || Bt.toggleLike(t.postId, !$)
        }
        )
    }
    function F() {
        e(C)?.focus()
    }
    function J($) {
        e(x)?.addComment($),
        Bt.incrementComments(t.postId)
    }
    function A($) {
        $.stopPropagation(),
        $.preventDefault();
        const ae = e(u)?.author.username;
        if (ae) {
            const E = s().url.pathname
              , _e = `/${ae}`;
            if (E === _e || E.startsWith(`/${ae}/`)) {
                Z(),
                window.scrollTo({
                    top: 0,
                    behavior: "smooth"
                });
                return
            }
            Ma(_e)
        }
    }
    function M() {
        !wa() || !e(u) || e(u).isOwner || (e(q) ? T() : a(ee, !0))
    }
    async function T() {
        if (!e(u))
            return;
        Bt.toggleRepost(t.postId, !1),
        (await Ot.unrepostPost(t.postId)).success || Bt.toggleRepost(t.postId, !0)
    }
    function g($) {
        Bt.toggleRepost(t.postId, !0),
        a(ee, !1)
    }
    function m($) {
        $.stopPropagation(),
        a(h, !e(h))
    }
    function z() {
        a(h, !1)
    }
    function S($) {
        if ($.stopPropagation(),
        e(u)) {
            const ae = `${window.location.origin}/@${e(u).author.username}/post/${e(u).id}`;
            navigator.clipboard.writeText(ae),
            alert(" !")
        }
        a(h, !1)
    }
    function O($) {
        $.stopPropagation(),
        t.onReport?.(),
        a(h, !1)
    }
    async function ie($) {
        if ($.stopPropagation(),
        !e(u))
            return;
        (await Ot.deletePost(e(u).id)).success && (Xs.removePost(e(u).id),
        Ks.removePost(e(u).id),
        Z()),
        a(h, !1)
    }
    function ge() {
        return e(u) ? {
            id: e(u).id,
            content: e(u).content,
            author: {
                id: e(u).author.id,
                username: e(u).author.username || null,
                displayName: e(u).author.displayName,
                avatar: e(u).author.avatar || null,
                verified: e(u).author.verified,
                pin: e(u).author.pin || null
            },
            createdAt: e(u).createdAt
        } : null
    }
    function ve($) {
        return $ ? $.map(ae => ({
            id: ae.id,
            author: ae.author.displayName,
            authorId: ae.author.id,
            username: ae.author.username,
            avatar: ae.author.avatar || "",
            verified: ae.author.verified,
            pin: ae.author.pin || null,
            content: ae.content,
            time: ae.createdAt,
            createdAt: ae.createdAt,
            likes: ae.likesCount,
            repliesCount: ae.repliesCount,
            isLiked: ae.isLiked,
            attachments: ae.attachments?.map(E => ({
                id: E.id,
                type: E.type,
                url: E.url,
                thumbnailUrl: E.thumbnailUrl || void 0,
                width: E.width || void 0,
                height: E.height || void 0,
                duration: E.duration || void 0
            })),
            replies: ae.replies?.map(E => ({
                id: E.id,
                author: E.author.displayName,
                authorId: E.author.id,
                username: E.author.username,
                avatar: E.author.avatar || "",
                verified: E.author.verified,
                pin: E.author.pin || null,
                content: E.content,
                time: E.createdAt,
                createdAt: E.createdAt,
                likes: E.likesCount,
                isLiked: E.isLiked,
                replyTo: E.replyTo || null,
                attachments: E.attachments?.map(_e => ({
                    id: _e.id,
                    type: _e.type,
                    url: _e.url,
                    thumbnailUrl: _e.thumbnailUrl || void 0,
                    width: _e.width || void 0,
                    height: _e.height || void 0,
                    duration: _e.duration || void 0
                }))
            })) || []
        })) : []
    }
    var be = kc();
    Zt("keydown", _s, me);
    var Te = we(be);
    {
        var Ge = $ => {
            var ae = bc();
            ae.__click = X;
            var E = i(ae);
            let _e;
            E.__click = xe => xe.stopPropagation();
            let De;
            var Le = i(E);
            Le.__click = Z;
            var Xe = c(Le, 2)
              , Ce = c(i(Xe), 2);
            {
                var je = xe => {
                    var ye = ic()
                      , Ne = i(ye);
                    Da(Ne, {}),
                    o(ye),
                    v(xe, ye)
                }
                  , ke = xe => {
                    var ye = Ve()
                      , Ne = we(ye);
                    {
                        var He = Be => {
                            var oe = lc()
                              , qe = i(oe)
                              , Se = i(qe, !0);
                            o(qe);
                            var et = c(qe, 2);
                            et.__click = I,
                            o(oe),
                            D( () => re(Se, e(b))),
                            v(Be, oe)
                        }
                          , ut = Be => {
                            var oe = Ve()
                              , qe = we(oe);
                            {
                                var Se = et => {
                                    var yt = wc()
                                      , xt = we(yt)
                                      , Ze = i(xt)
                                      , ne = i(Ze)
                                      , le = i(ne);
                                    let Pe;
                                    le.__click = A;
                                    var dt = i(le);
                                    {
                                        let Me = K( () => e(u).author.avatar || "");
                                        ea(dt, {
                                            get avatar() {
                                                return e(Me)
                                            },
                                            get name() {
                                                return e(u).author.displayName
                                            },
                                            size: 44
                                        })
                                    }
                                    o(le);
                                    var vt = c(le, 2)
                                      , Pt = i(vt)
                                      , St = i(Pt);
                                    let Wt;
                                    St.__click = A;
                                    var gt = i(St, !0);
                                    o(St);
                                    var Nt = c(St, 2);
                                    {
                                        var sa = Me => {
                                            var Re = cc()
                                              , nt = i(Re);
                                            Hs(nt, {
                                                size: 16
                                            }),
                                            o(Re),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(Nt, Me => {
                                            e(u).author.verified && Me(sa)
                                        }
                                        )
                                    }
                                    var oa = c(Nt, 2);
                                    {
                                        var ia = Me => {
                                            Fa(Me, {
                                                get pin() {
                                                    return e(u).author.pin
                                                }
                                            })
                                        }
                                        ;
                                        P(oa, Me => {
                                            e(u).author.pin && Me(ia)
                                        }
                                        )
                                    }
                                    o(Pt);
                                    var Lt = c(Pt, 2);
                                    Va(Lt, {
                                        get date() {
                                            return e(u).createdAt
                                        },
                                        class: "post-modal__time"
                                    }),
                                    o(vt),
                                    o(ne);
                                    var Mt = c(ne, 2)
                                      , Yt = i(Mt);
                                    Yt.__click = m;
                                    var Ca = i(Yt);
                                    hs(Ca, {}),
                                    o(Yt);
                                    var is = c(Yt, 2);
                                    {
                                        var Ue = Me => {
                                            var Re = uc();
                                            Re.__click = Ft => Ft.stopPropagation();
                                            var nt = i(Re);
                                            nt.__click = S;
                                            var It = i(nt);
                                            Ns(It, {
                                                size: 16
                                            }),
                                            _t(2),
                                            o(nt);
                                            var da = c(nt, 2);
                                            {
                                                var va = Ft => {
                                                    var Rt = dc();
                                                    Rt.__click = ie;
                                                    var fa = i(Rt);
                                                    ws(fa, {
                                                        size: 16
                                                    }),
                                                    _t(2),
                                                    o(Rt),
                                                    v(Ft, Rt)
                                                }
                                                  , ua = Ft => {
                                                    var Rt = vc();
                                                    Rt.__click = O;
                                                    var fa = i(Rt);
                                                    ms(fa, {
                                                        size: 16
                                                    }),
                                                    _t(2),
                                                    o(Rt),
                                                    v(Ft, Rt)
                                                }
                                                ;
                                                P(da, Ft => {
                                                    e(u).isOwner ? Ft(va) : Ft(ua, !1)
                                                }
                                                )
                                            }
                                            o(Re),
                                            qa(Re, (Ft, Rt) => rs?.(Ft, Rt), () => z),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(is, Me => {
                                            e(h) && Me(Ue)
                                        }
                                        )
                                    }
                                    o(Mt),
                                    o(Ze);
                                    var Oe = c(Ze, 2);
                                    {
                                        var Ke = Me => {
                                            var Re = fc()
                                              , nt = i(Re);
                                            en(nt, {
                                                get content() {
                                                    return e(u).content
                                                }
                                            }),
                                            o(Re),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(Oe, Me => {
                                            e(u).content && Me(Ke)
                                        }
                                        )
                                    }
                                    var tt = c(Oe, 2);
                                    {
                                        var mt = Me => {
                                            var Re = _c()
                                              , nt = i(Re);
                                            Ys(nt, {
                                                get post() {
                                                    return e(u).originalPost
                                                }
                                            }),
                                            o(Re),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(tt, Me => {
                                            e(u).originalPost && Me(mt)
                                        }
                                        )
                                    }
                                    var We = c(tt, 2);
                                    {
                                        var rt = Me => {
                                            var Re = gc()
                                              , nt = i(Re);
                                            bs(nt, {
                                                get attachments() {
                                                    return e(u).attachments
                                                }
                                            }),
                                            o(Re),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(We, Me => {
                                            e(u).attachments && e(u).attachments.length > 0 && Me(rt)
                                        }
                                        )
                                    }
                                    var ot = c(We, 2)
                                      , zt = i(ot)
                                      , Fe = i(zt);
                                    let Ye;
                                    Fe.__click = Q;
                                    var ct = i(Fe);
                                    ps(ct, {
                                        size: 20,
                                        get filled() {
                                            return e(y)
                                        }
                                    });
                                    var wt = c(ct, 2)
                                      , na = i(wt, !0);
                                    o(wt),
                                    o(Fe);
                                    var Ht = c(Fe, 2);
                                    Ht.__click = F;
                                    var jt = i(Ht);
                                    Es(jt, {
                                        size: 20
                                    });
                                    var at = c(jt, 2)
                                      , qt = i(at, !0);
                                    o(at),
                                    o(Ht);
                                    var Ct = c(Ht, 2);
                                    let Ut;
                                    Ct.__click = M;
                                    var Jt = i(Ct);
                                    ns(Jt, {
                                        size: 20
                                    });
                                    var Xt = c(Jt, 2)
                                      , $t = i(Xt, !0);
                                    o(Xt),
                                    o(Ct),
                                    o(zt);
                                    var Vt = c(zt, 2)
                                      , Tt = c(i(Vt), 2)
                                      , st = i(Tt, !0);
                                    o(Tt),
                                    o(Vt),
                                    o(ot);
                                    var ft = c(ot, 2);
                                    {
                                        var Kt = Me => {
                                            var Re = pc()
                                              , nt = i(Re);
                                            Da(nt, {}),
                                            o(Re),
                                            v(Me, Re)
                                        }
                                          , la = Me => {
                                            var Re = hc()
                                              , nt = i(Re);
                                            {
                                                let It = K( () => ve(e(u).comments));
                                                kt(oc(nt, {
                                                    get postId() {
                                                        return e(u).id
                                                    },
                                                    get comments() {
                                                        return e(It)
                                                    },
                                                    get commentsCount() {
                                                        return e(L)
                                                    },
                                                    get canDeleteComments() {
                                                        return e(u).isOwner
                                                    }
                                                }), da => a(x, da, !0), () => e(x))
                                            }
                                            o(Re),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(ft, Me => {
                                            e(te) ? Me(Kt) : Me(la, !1)
                                        }
                                        )
                                    }
                                    o(xt),
                                    kt(xt, Me => a(W, Me), () => e(W));
                                    var ca = c(xt, 2);
                                    {
                                        var Dt = Me => {
                                            var Re = mc()
                                              , nt = i(Re);
                                            kt(Gs(nt, {
                                                get postId() {
                                                    return e(u).id
                                                },
                                                onCommentAdded: J
                                            }), It => a(C, It, !0), () => e(C)),
                                            o(Re),
                                            v(Me, Re)
                                        }
                                        ;
                                        P(ca, Me => {
                                            e(te) || Me(Dt)
                                        }
                                        )
                                    }
                                    D( (Me, Re, nt, It) => {
                                        Pe = he(le, 1, "post-modal__avatar svelte-1wzwwt5", null, Pe, {
                                            clickable: !!e(u).author.username
                                        }),
                                        Wt = he(St, 1, "post-modal__author svelte-1wzwwt5", null, Wt, {
                                            clickable: !!e(u).author.username
                                        }),
                                        re(gt, e(u).author.displayName),
                                        Ye = he(Fe, 1, "post-modal__action like svelte-1wzwwt5", null, Ye, {
                                            liked: e(y),
                                            animated: e(N)
                                        }),
                                        re(na, Me),
                                        re(qt, Re),
                                        Ut = he(Ct, 1, "post-modal__action repost svelte-1wzwwt5", null, Ut, {
                                            reposted: e(q),
                                            disabled: e(u).isOwner
                                        }),
                                        Ct.disabled = e(u).isOwner,
                                        V(Ct, "title", e(u).isOwner ? "   " : e(q) ? " " : ""),
                                        re($t, nt),
                                        re(st, It)
                                    }
                                    , [ () => ha(e(j)), () => ha(e(L)), () => ha(e(R)), () => ha(e(u).viewsCount)]),
                                    v(et, yt)
                                }
                                ;
                                P(qe, et => {
                                    e(u) && et(Se)
                                }
                                , !0)
                            }
                            v(Be, oe)
                        }
                        ;
                        P(Ne, Be => {
                            e(b) ? Be(He) : Be(ut, !1)
                        }
                        , !0)
                    }
                    v(xe, ye)
                }
                ;
                P(Ce, xe => {
                    e(f) ? xe(je) : xe(ke, !1)
                }
                )
            }
            o(Xe),
            o(E),
            o(ae),
            D(xe => {
                _e = he(E, 1, "post-modal-container svelte-1wzwwt5", null, _e, {
                    swiping: e(ce)
                }),
                De = At(E, "", De, xe)
            }
            , [ () => ({
                transform: e(se) > 0 ? `translateY(${e(se)}px)` : void 0,
                opacity: e(se) > 0 ? Math.max(.5, 1 - e(se) / 300) : void 0
            })]),
            v($, ae)
        }
        ;
        P(Te, $ => {
            t.isOpen && $(Ge)
        }
        )
    }
    var $e = c(Te, 2);
    {
        var lt = $ => {
            {
                let ae = K(ge);
                Qs($, {
                    get isOpen() {
                        return e(ee)
                    },
                    get originalPost() {
                        return e(ae)
                    },
                    onClose: () => a(ee, !1),
                    onRepost: g
                })
            }
        }
        ;
        P($e, $ => {
            e(u) && ge() && $(lt)
        }
        )
    }
    v(n, be),
    Je(),
    _()
}
it(["click"]);
it(["input", "keydown"]);
export {ea as A, Bc as C, tn as D, Fc as E, Bn as I, Da as L, Lc as M, us as N, Na as P, Nc as R, Ac as S, Va as T, ks as V, yc as a, Ec as b, qa as c, Bs as d, Hc as e, ha as f, _r as g, Ps as h, Fs as i, Dc as j, Rc as k, Xs as l, $n as m, Uc as n, os as o, Ot as p, ya as q, Hs as r, qs as s, vr as t, _a as u, Fa as v, Oc as w, ma as x, Ks as y, Wi as z};
const p = "modulepreload"
  , y = function(u, i) {
    return new URL(u,i).href
}
  , v = {}
  , w = function(i, a, f) {
    let d = Promise.resolve();
    if (a && a.length > 0) {
        let E = function(e) {
            return Promise.all(e.map(o => Promise.resolve(o).then(s => ({
                status: "fulfilled",
                value: s
            }), s => ({
                status: "rejected",
                reason: s
            }))))
        };
        const r = document.getElementsByTagName("link")
          , t = document.querySelector("meta[property=csp-nonce]")
          , m = t?.nonce || t?.getAttribute("nonce");
        d = E(a.map(e => {
            if (e = y(e, f),
            e in v)
                return;
            v[e] = !0;
            const o = e.endsWith(".css")
              , s = o ? '[rel="stylesheet"]' : "";
            if (f)
                for (let c = r.length - 1; c >= 0; c--) {
                    const l = r[c];
                    if (l.href === e && (!o || l.rel === "stylesheet"))
                        return
                }
            else if (document.querySelector(`link[href="${e}"]${s}`))
                return;
            const n = document.createElement("link");
            if (n.rel = o ? "stylesheet" : p,
            o || (n.as = "script"),
            n.crossOrigin = "",
            n.href = e,
            m && n.setAttribute("nonce", m),
            document.head.appendChild(n),
            o)
                return new Promise( (c, l) => {
                    n.addEventListener("load", c),
                    n.addEventListener("error", () => l(new Error(`Unable to preload CSS for ${e}`)))
                }
                )
        }
        ))
    }
    function h(r) {
        const t = new Event("vite:preloadError",{
            cancelable: !0
        });
        if (t.payload = r,
        window.dispatchEvent(t),
        !t.defaultPrevented)
            throw r
    }
    return d.then(r => {
        for (const t of r || [])
            t.status === "rejected" && h(t.reason);
        return i().catch(h)
    }
    )
};
export {w as _};
import {l as u, m as o, H as _, n as t, q as g, C as m, t as a, v as i, w as n, x as p} from "./ByWyckft.js";
function E(d, r) {
    let s = null
      , f = t;
    var l;
    if (t) {
        s = p;
        for (var e = g(document.head); e !== null && (e.nodeType !== m || e.data !== d); )
            e = a(e);
        if (e === null)
            i(!1);
        else {
            var y = a(e);
            e.remove(),
            n(y)
        }
    }
    t || (l = document.head.appendChild(u()));
    try {
        o( () => r(l), _)
    } finally {
        f && (i(!0),
        n(s))
    }
}
export {E as h};
const __vite__mapDeps = (i, m=__vite__mapDeps, d=(m.f || (m.f = ["../nodes/0.B8eiCWtS.js", "../chunks/DsnmJJEf.js", "../chunks/ByWyckft.js", "../chunks/CmM7tx7L.js", "../chunks/rwMaspW9.js", "../chunks/BIPZIaNt.js", "../chunks/CmX0Oqut.js", "../chunks/DF08NYXu.js", "../chunks/NCWCRVn4.js", "../chunks/Dy9ItHHp.js", "../chunks/C1pxLudc.js", "../chunks/B4HP8HCJ.js", "../chunks/BNIeskg8.js", "../assets/Snowfall.DNsh-0jK.css", "../assets/0.DLM90LIm.css", "../nodes/1.BmDPEeoM.js", "../nodes/2.C_KkaAZy.js", "../nodes/3.DURxp2cq.js", "../chunks/CRKMqfnF.js", "../chunks/FkQX6A-G.js", "../assets/3.Bs9n9AGX.css", "../nodes/4.CMsviCTV.js", "../assets/4.DMgpEhmC.css", "../nodes/5.AzLgOvti.js", "../assets/5.OY9PZ2e8.css", "../nodes/6.BJCWGRmP.js", "../assets/6.Dx9TMFYi.css", "../nodes/7.CMLwzLKK.js", "../assets/7.BpBzM9te.css", "../nodes/8.CnEu9Keh.js", "../assets/8.BRITehwB.css", "../nodes/9.xmUvidUt.js", "../assets/9.DqAo0Kcw.css", "../nodes/10.FvkF9ArC.js", "../assets/10.B0tswZqB.css", "../nodes/11.C5vT4Dc6.js", "../assets/11.MfHKS-gB.css", "../nodes/12.VbQkFYX8.js", "../assets/12.W0E2KU9j.css", "../nodes/13.CIikCf8_.js", "../assets/13.DpNgR--q.css", "../nodes/14.dW7wbSSz.js", "../chunks/PPVm8Dsz.js", "../assets/14.Dzi4qB06.css", "../nodes/15.C23NDYB2.js", "../assets/15.C0bJ_CVT.css"]))) => i.map(i => d[i]);
import {_ as s} from "../chunks/PPVm8Dsz.js";
import {n as B, ac as H, m as W, ad as Y, ah as Z, k as p, O as q, g as u, aD as z, aE as J, aF as K, W as Q, aG as U, R as X, p as $, a7 as tt, u as et, o as rt, s as P, aH as at, f as V, b as E, e as st, i as h, a as ot, j as R, c as nt, r as it, h as O, a0 as _t, Z as mt, a1 as ut} from "../chunks/ByWyckft.js";
import "../chunks/DsnmJJEf.js";
import {i as b, b as y} from "../chunks/CmM7tx7L.js";
import {p as A} from "../chunks/B4HP8HCJ.js";
function T(n, t, a) {
    B && H();
    var i = new Z(n);
    W( () => {
        var o = t() ?? null;
        i.ensure(o, o && (e => a(e, o)))
    }
    , Y)
}
function ct(n) {
    return class extends lt {
        constructor(t) {
            super({
                component: n,
                ...t
            })
        }
    }
}
class lt {
    #e;
    #t;
    constructor(t) {
        var a = new Map
          , i = (e, r) => {
            var m = X(r, !1, !1);
            return a.set(e, m),
            m
        }
        ;
        const o = new Proxy({
            ...t.props || {},
            $$events: {}
        },{
            get(e, r) {
                return u(a.get(r) ?? i(r, Reflect.get(e, r)))
            },
            has(e, r) {
                return r === q ? !0 : (u(a.get(r) ?? i(r, Reflect.get(e, r))),
                Reflect.has(e, r))
            },
            set(e, r, m) {
                return p(a.get(r) ?? i(r, m), m),
                Reflect.set(e, r, m)
            }
        });
        this.#t = (t.hydrate ? z : J)(t.component, {
            target: t.target,
            anchor: t.anchor,
            props: o,
            context: t.context,
            intro: t.intro ?? !1,
            recover: t.recover
        }),
        (!t?.props?.$$host || t.sync === !1) && K(),
        this.#e = o.$$events;
        for (const e of Object.keys(this.#t))
            e === "$set" || e === "$destroy" || e === "$on" || Q(this, e, {
                get() {
                    return this.#t[e]
                },
                set(r) {
                    this.#t[e] = r
                },
                enumerable: !0
            });
        this.#t.$set = e => {
            Object.assign(o, e)
        }
        ,
        this.#t.$destroy = () => {
            U(this.#t)
        }
    }
    $set(t) {
        this.#t.$set(t)
    }
    $on(t, a) {
        this.#e[t] = this.#e[t] || [];
        const i = (...o) => a.call(this, ...o);
        return this.#e[t].push(i),
        () => {
            this.#e[t] = this.#e[t].filter(o => o !== i)
        }
    }
    $destroy() {
        this.#t.$destroy()
    }
}
const bt = {};
var dt = V('<div id="svelte-announcer" aria-live="assertive" aria-atomic="true" style="position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px"><!></div>')
  , ft = V("<!> <!>", 1);
function ht(n, t) {
    $(t, !0);
    let a = A(t, "components", 23, () => [])
      , i = A(t, "data_0", 3, null)
      , o = A(t, "data_1", 3, null);
    tt( () => t.stores.page.set(t.page)),
    et( () => {
        t.stores,
        t.page,
        t.constructors,
        a(),
        t.form,
        i(),
        o(),
        t.stores.page.notify()
    }
    );
    let e = P(!1)
      , r = P(!1)
      , m = P(null);
    rt( () => {
        const _ = t.stores.page.subscribe( () => {
            u(e) && (p(r, !0),
            at().then( () => {
                p(m, document.title || "untitled page", !0)
            }
            ))
        }
        );
        return p(e, !0),
        _
    }
    );
    const k = O( () => t.constructors[1]);
    var D = ft()
      , I = E(D);
    {
        var w = _ => {
            const c = O( () => t.constructors[0]);
            var l = R()
              , v = E(l);
            T(v, () => u(c), (d, f) => {
                y(f(d, {
                    get data() {
                        return i()
                    },
                    get form() {
                        return t.form
                    },
                    get params() {
                        return t.page.params
                    },
                    children: (g, gt) => {
                        var L = R()
                          , F = E(L);
                        T(F, () => u(k), (M, G) => {
                            y(G(M, {
                                get data() {
                                    return o()
                                },
                                get form() {
                                    return t.form
                                },
                                get params() {
                                    return t.page.params
                                }
                            }), N => a()[1] = N, () => a()?.[1])
                        }
                        ),
                        h(g, L)
                    }
                    ,
                    $$slots: {
                        default: !0
                    }
                }), g => a()[0] = g, () => a()?.[0])
            }
            ),
            h(_, l)
        }
          , j = _ => {
            const c = O( () => t.constructors[0]);
            var l = R()
              , v = E(l);
            T(v, () => u(c), (d, f) => {
                y(f(d, {
                    get data() {
                        return i()
                    },
                    get form() {
                        return t.form
                    },
                    get params() {
                        return t.page.params
                    }
                }), g => a()[0] = g, () => a()?.[0])
            }
            ),
            h(_, l)
        }
        ;
        b(I, _ => {
            t.constructors[1] ? _(w) : _(j, !1)
        }
        )
    }
    var C = st(I, 2);
    {
        var S = _ => {
            var c = dt()
              , l = nt(c);
            {
                var v = d => {
                    var f = _t();
                    mt( () => ut(f, u(m))),
                    h(d, f)
                }
                ;
                b(l, d => {
                    u(r) && d(v)
                }
                )
            }
            it(c),
            h(_, c)
        }
        ;
        b(C, _ => {
            u(e) && _(S)
        }
        )
    }
    h(n, D),
    ot()
}
const yt = ct(ht)
  , At = [ () => s( () => import("../nodes/0.B8eiCWtS.js"), __vite__mapDeps([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]), import.meta.url), () => s( () => import("../nodes/1.BmDPEeoM.js"), __vite__mapDeps([15, 1, 12, 2, 7]), import.meta.url), () => s( () => import("../nodes/2.C_KkaAZy.js"), __vite__mapDeps([16, 1, 12, 2, 7]), import.meta.url), () => s( () => import("../nodes/3.DURxp2cq.js"), __vite__mapDeps([17, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 18, 19, 20]), import.meta.url), () => s( () => import("../nodes/4.CMsviCTV.js"), __vite__mapDeps([21, 1, 12, 2, 5, 6, 7, 22]), import.meta.url), () => s( () => import("../nodes/5.AzLgOvti.js"), __vite__mapDeps([23, 1, 2, 3, 10, 9, 7, 12, 8, 11, 5, 6, 13, 24]), import.meta.url), () => s( () => import("../nodes/6.BJCWGRmP.js"), __vite__mapDeps([25, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 18, 19, 26]), import.meta.url), () => s( () => import("../nodes/7.CMLwzLKK.js"), __vite__mapDeps([27, 1, 2, 3, 10, 9, 7, 28]), import.meta.url), () => s( () => import("../nodes/8.CnEu9Keh.js"), __vite__mapDeps([29, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 18, 19, 30]), import.meta.url), () => s( () => import("../nodes/9.xmUvidUt.js"), __vite__mapDeps([31, 1, 12, 2, 4, 7, 32]), import.meta.url), () => s( () => import("../nodes/10.FvkF9ArC.js"), __vite__mapDeps([33, 1, 12, 2, 4, 7, 34]), import.meta.url), () => s( () => import("../nodes/11.C5vT4Dc6.js"), __vite__mapDeps([35, 1, 12, 2, 4, 7, 36]), import.meta.url), () => s( () => import("../nodes/12.VbQkFYX8.js"), __vite__mapDeps([37, 1, 2, 3, 10, 9, 5, 7, 38]), import.meta.url), () => s( () => import("../nodes/13.CIikCf8_.js"), __vite__mapDeps([39, 1, 2, 3, 10, 8, 9, 11, 5, 6, 7, 12, 13, 19, 40]), import.meta.url), () => s( () => import("../nodes/14.dW7wbSSz.js"), __vite__mapDeps([41, 1, 2, 3, 9, 5, 7, 42, 43]), import.meta.url), () => s( () => import("../nodes/15.C23NDYB2.js"), __vite__mapDeps([44, 1, 2, 3, 10, 9, 5, 7, 45]), import.meta.url)]
  , Tt = []
  , Dt = {
    "/": [2],
    "/explore": [5],
    "/feed": [6],
    "/forgot-password": [7],
    "/hashtag/[tag]": [8],
    "/legal/cookies": [9],
    "/legal/privacy": [10],
    "/legal/terms": [11],
    "/login": [12],
    "/notifications": [13],
    "/onboarding": [14],
    "/register": [15],
    "/[username]": [3],
    "/[username]/post/[postId]": [4]
}
  , x = {
    handleError: ( ({error: n}) => {}
    ),
    reroute: ( () => {}
    ),
    transport: {}
}
  , vt = Object.fromEntries(Object.entries(x.transport).map( ([n,t]) => [n, t.decode]))
  , It = Object.fromEntries(Object.entries(x.transport).map( ([n,t]) => [n, t.encode]))
  , Lt = !1
  , Vt = (n, t) => vt[n](t);
export {Vt as decode, vt as decoders, Dt as dictionary, It as encoders, Lt as hash, x as hooks, bt as matchers, At as nodes, yt as root, Tt as server_loads};
import {l as o, d as r} from "../chunks/DF08NYXu.js";
export {o as load_css, r as start};
import "../chunks/DsnmJJEf.js";
import {f as w, i as s, p as oe, k as Z, u as Q, g as n, a5 as le, j as V, b as x, a as ce, s as ee, o as ge, h as b, Y as we, a3 as _e, a4 as be, e as m, c as R, r as B, d as te} from "../chunks/ByWyckft.js";
import {i as y, b as Se} from "../chunks/CmM7tx7L.js";
import {h as ye} from "../chunks/rwMaspW9.js";
import {a as S, s as ke} from "../chunks/BIPZIaNt.js";
import {p as Me} from "../chunks/CmX0Oqut.js";
import {b as Pe, c as Ce, g as ae} from "../chunks/DF08NYXu.js";
import {s as Ee, e as $e, E as xe, t as Ae, i as ne, g as D, j as Le, k as je, L as Oe, P as We, a as Te, S as Ue, M as qe, C as He} from "../chunks/NCWCRVn4.js";
import "../chunks/BNIeskg8.js";
import {j as Ie, n as K, k as ie, l as re, i as ze, m as Fe, o as Ne, c as Re, q as se, t as Be} from "../chunks/Dy9ItHHp.js";
const De = !1
  , Ke = !1
  , ut = Object.freeze(Object.defineProperty({
    __proto__: null,
    prerender: Ke,
    ssr: De
}, Symbol.toStringTag, {
    value: "Module"
}));
var Qe = w('<aside class="right-sidebar svelte-1f0m1ej"><footer class="right-sidebar__footer svelte-1f0m1ej"><nav class="right-sidebar__links svelte-1f0m1ej"><a href="/legal/terms" class="svelte-1f0m1ej"> </a> <a href="/legal/privacy" class="svelte-1f0m1ej"></a> <a href="/legal/cookies" class="svelte-1f0m1ej">Cookies</a></nav> <p class="right-sidebar__copyright svelte-1f0m1ej"> 2025 </p></footer></aside>');
function Ve(k) {
    var v = Qe();
    s(k, v)
}
var Ye = w('<canvas class="snowfall svelte-12vu4pb"></canvas>');
function Ge(k, v) {
    oe(v, !0);
    let i = ee(null)
      , r = null
      , d = 0
      , o = []
      , l = ee(!1)
      , p = null;
    const f = Ee.subscribe(a => {
        Z(l, a, !0)
    }
    )
      , U = 100;
    function g() {
        return {
            x: Math.random() * window.innerWidth,
            y: Math.random() * window.innerHeight - window.innerHeight,
            radius: Math.random() * 3 + 1,
            speed: Math.random() * 1 + .5,
            wind: Math.random() * .5 - .25,
            opacity: Math.random() * .5 + .3
        }
    }
    function M() {
        o = [];
        for (let a = 0; a < U; a++) {
            const u = g();
            u.y = Math.random() * window.innerHeight,
            o.push(u)
        }
    }
    function A() {
        for (const a of o)
            a.y += a.speed,
            a.x += a.wind,
            a.y > window.innerHeight && (a.y = -a.radius * 2,
            a.x = Math.random() * window.innerWidth),
            a.x > window.innerWidth ? a.x = 0 : a.x < 0 && (a.x = window.innerWidth)
    }
    function q() {
        if (!(!r || !n(i))) {
            r.clearRect(0, 0, n(i).width, n(i).height);
            for (const a of o)
                r.beginPath(),
                r.arc(a.x, a.y, a.radius, 0, Math.PI * 2),
                r.fillStyle = `rgba(255, 255, 255, ${a.opacity})`,
                r.fill()
        }
    }
    function L() {
        A(),
        q(),
        d = requestAnimationFrame(L)
    }
    function j() {
        n(i) && (n(i).width = window.innerWidth,
        n(i).height = window.innerHeight)
    }
    function H() {
        n(i) && (r = n(i).getContext("2d"),
        j(),
        M(),
        L(),
        p = j,
        window.addEventListener("resize", p))
    }
    function P() {
        d && (cancelAnimationFrame(d),
        d = 0),
        p && (window.removeEventListener("resize", p),
        p = null),
        r = null,
        o = []
    }
    Q( () => (n(i) && n(l) && H(),
    () => {
        P()
    }
    )),
    le( () => {
        f(),
        P()
    }
    );
    var C = V()
      , O = x(C);
    {
        var I = a => {
            var u = Ye();
            Se(u, W => Z(i, W), () => n(i)),
            s(a, u)
        }
        ;
        y(O, a => {
            n(l) && a(I)
        }
        )
    }
    s(k, C),
    ce()
}
var Je = w('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>', 1)
  , Xe = w('<div class="auth-loading svelte-12qhfyh"><!></div>')
  , Ze = w("<!> <!>", 1)
  , et = w('<div class="layout"><!> <main class="content"><!></main> <!> <!></div>')
  , tt = w("<!> <!> <!> <!> <!>", 1);
function ht(k, v) {
    oe(v, !0);
    const i = () => S(Me, "$page", f)
      , r = () => S(Be, "$currentUser", f)
      , d = () => S(Fe, "$isAuthChecked", f)
      , o = () => S(ze, "$isAuthenticated", f)
      , l = () => S(D, "$postModalStore", f)
      , p = () => S(ne, "$isMobile", f)
      , [f,U] = ke();
    let g = b( () => i().url.pathname === "/login" || i().url.pathname === "/register" || i().url.pathname === "/forgot-password")
      , M = b( () => i().url.pathname === "/onboarding")
      , A = b( () => i().url.pathname.startsWith("/legal"))
      , q = b( () => ["/legal/terms", "/legal/privacy", "/legal/cookies"].includes(i().url.pathname))
      , L = b( () => {
        const e = i().url.pathname;
        if (!r())
            return !1;
        const t = e.slice(1);
        return t.includes("/") ? !1 : t === r().username
    }
    )
      , j = b( () => n(g) || n(A) || n(M) || d() && o());
    ge(async () => {
        Ae.init();
        const e = window.matchMedia("(max-width: 1024px)")
          , t = $ => {
            ne.set($.matches)
        }
        ;
        if (t(e),
        e.addEventListener("change", t),
        n(g) || n(A) || n(M))
            return Ne.setChecked(!0),
            () => e.removeEventListener("change", t);
        const {authenticated: h, profileRequired: E} = await Re.checkAuth();
        return E ? ae("/onboarding", {
            replaceState: !0
        }) : h || ae("/login", {
            replaceState: !0
        }),
        () => e.removeEventListener("change", t)
    }
    ),
    Q( () => {
        !d() || n(g) || (o() ? (Ie(),
        K.fetchUnreadCount()) : se())
    }
    ),
    Q( () => {
        if (!d() || n(g) || !o())
            return;
        const e = () => {
            document.visibilityState === "visible" && (ie() || (re(),
            K.fetchUnreadCount()))
        }
          , t = () => {
            ie() || (re(),
            K.fetchUnreadCount())
        }
        ;
        return document.addEventListener("visibilitychange", e),
        window.addEventListener("online", t),
        () => {
            document.removeEventListener("visibilitychange", e),
            window.removeEventListener("online", t)
        }
    }
    ),
    le( () => {
        se()
    }
    );
    const H = ["/", "/feed", "/explore", "/notifications"];
    function P(e) {
        if (H.includes(e))
            return e === "/" ? "/feed" : e;
        const t = e.split("/").filter(Boolean);
        return t.length === 1 ? "/profile" : "/" + t[0]
    }
    Pe( ({from: e}) => {
        l().isOpen && D.close(),
        e?.url?.pathname && Le(e.url.pathname)
    }
    ),
    Ce( ({from: e, to: t, type: h}) => {
        if (!t?.url?.pathname)
            return;
        if (h === "popstate") {
            const c = je(t.url.pathname);
            c > 0 && requestAnimationFrame( () => {
                setTimeout( () => {
                    window.scrollTo({
                        top: c,
                        left: 0,
                        behavior: "instant"
                    })
                }
                , 50)
            }
            );
            return
        }
        if (!e?.url?.pathname || e.url.pathname === t.url.pathname)
            return;
        const E = P(e.url.pathname)
          , $ = P(t.url.pathname);
        E !== $ && window.scrollTo({
            top: 0,
            left: 0,
            behavior: "instant"
        })
    }
    );
    var C = tt();
    ye("12qhfyh", e => {
        var t = Je();
        we(4),
        _e( () => {
            be.title = ""
        }
        ),
        s(e, t)
    }
    );
    var O = x(C);
    {
        var I = e => {
            var t = Xe()
              , h = R(t);
            Oe(h, {}),
            B(t),
            s(e, t)
        }
          , a = e => {
            var t = V()
              , h = x(t);
            {
                var E = c => {
                    var _ = V()
                      , T = x(_);
                    te(T, () => v.children),
                    s(c, _)
                }
                  , $ = c => {
                    var _ = et()
                      , T = R(_);
                    Ue(T, {});
                    var z = m(T, 2)
                      , ue = R(z);
                    te(ue, () => v.children),
                    B(z);
                    var G = m(z, 2);
                    Ve(G);
                    var he = m(G, 2);
                    {
                        var me = F => {
                            var J = Ze()
                              , X = x(J);
                            qe(X, {});
                            var ve = m(X, 2);
                            {
                                var pe = N => {
                                    He(N, {})
                                }
                                ;
                                y(ve, N => {
                                    n(L) || N(pe)
                                }
                                )
                            }
                            s(F, J)
                        }
                        ;
                        y(he, F => {
                            p() && F(me)
                        }
                        )
                    }
                    B(_),
                    s(c, _)
                }
                ;
                y(h, c => {
                    n(g) || n(q) || n(M) ? c(E) : c($, !1)
                }
                , !0)
            }
            s(e, t)
        }
        ;
        y(O, e => {
            n(j) ? e(a, !1) : e(I)
        }
        )
    }
    var u = m(O, 2);
    Ge(u, {});
    var W = m(u, 2);
    $e(W, {});
    var Y = m(W, 2);
    xe(Y, {});
    var de = m(Y, 2);
    {
        var fe = e => {
            We(e, {
                children: (t, h) => {
                    Te(t, {
                        get isOpen() {
                            return l().isOpen
                        },
                        get postId() {
                            return l().postId
                        },
                        onClose: () => D.close()
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        y(de, e => {
            l().isOpen && l().postId && e(fe)
        }
        )
    }
    s(k, C),
    ce(),
    U()
}
export {ht as component, ut as universal};
import "../chunks/DsnmJJEf.js";
import {i as u} from "../chunks/BNIeskg8.js";
import {p as h, f as g, b as l, Z as v, i as d, a as _, c as e, r as s, e as x, a1 as o} from "../chunks/ByWyckft.js";
import {s as $, a as p} from "../chunks/DF08NYXu.js";
const b = {
    get error() {
        return p.error
    },
    get status() {
        return p.status
    }
};
$.updated.check;
const i = b;
var k = g("<h1> </h1> <p> </p>", 1);
function w(m, c) {
    h(c, !1),
    u();
    var t = k()
      , r = l(t)
      , n = e(r, !0);
    s(r);
    var a = x(r, 2)
      , f = e(a, !0);
    s(a),
    v( () => {
        o(n, i.status),
        o(f, i.error?.message)
    }
    ),
    d(m, t),
    _()
}
export {w as component};
import "../chunks/DsnmJJEf.js";
import {X as qe, p as He, s as y, D as tt, u as at, k as t, f as _, c as n, g as e, r as o, _ as It, i as l, j as ye, b as de, a as Ke, e as f, Z as T, a1 as ie, h as fe, a0 as je, aR as ia, Y as Xe, aS as sa} from "../chunks/ByWyckft.js";
import {i as w, b as rt} from "../chunks/CmM7tx7L.js";
import {s as zt, a as Ye} from "../chunks/BIPZIaNt.js";
import {p as oa} from "../chunks/CmX0Oqut.js";
import {g as xt, b as na, r as Pt, p as la} from "../chunks/DF08NYXu.js";
import {u as Ce, o as Dt, L as Je, q as ct, d as va, A as Ot, f as Ct, N as ua, r as Mt, v as da, x as Qe, y as Ie, p as Pe, R as ca, D as Ft, z as fa, P as _a, a as pa, b as ga} from "../chunks/NCWCRVn4.js";
import "../chunks/BNIeskg8.js";
import {V as wa} from "../chunks/CRKMqfnF.js";
import {e as Lt, s as De} from "../chunks/C1pxLudc.js";
import {a as Ut, A as Bt, r as Rt, b as ma, i as Tt, t as At, s as it, d as ha, u as ba} from "../chunks/Dy9ItHHp.js";
import {p as Nt} from "../chunks/B4HP8HCJ.js";
import {r as ya} from "../chunks/FkQX6A-G.js";
const St = {
    async getStatus() {
        const J = await Ut.get(Bt.verification.status);
        return J.error ? {
            error: J.error.message
        } : {
            data: J.data
        }
    },
    async submitRequest(J) {
        const s = await Ut.post(Bt.verification.submit, {
            videoUrl: J
        });
        return s.error ? {
            success: !1,
            error: s.error.message
        } : {
            success: !0
        }
    }
};
function ka(J, s) {
    let x = 0
      , h = null;
    return (...g) => {
        const O = Date.now()
          , Q = s - (O - x);
        Q <= 0 ? (h && (clearTimeout(h),
        h = null),
        x = O,
        J(...g)) : h || (h = setTimeout( () => {
            x = Date.now(),
            h = null,
            J(...g)
        }
        , Q))
    }
}
var xa = _('<div class="followers-modal__header svelte-13xi1sg"><h2 class="followers-modal__title svelte-13xi1sg"> </h2> <button class="followers-modal__close svelte-13xi1sg" aria-label=""><!></button></div> <div class="followers-modal__search svelte-13xi1sg"><!> <input type="text" placeholder="" class="followers-modal__search-input svelte-13xi1sg"/></div>', 1)
  , Pa = _('<div class="followers-modal__loading svelte-13xi1sg"><!></div>')
  , Ca = _('<div class="followers-modal__error svelte-13xi1sg"><p> </p> <button class="svelte-13xi1sg"></button></div>')
  , Ma = _('<div class="followers-modal__empty svelte-13xi1sg"><!></div>')
  , Fa = _('<span class="followers-modal__username svelte-13xi1sg"> </span>')
  , Ua = _('<button class="followers-modal__edit-btn svelte-13xi1sg"></button>')
  , Ba = _("<button> </button>")
  , Sa = _('<div class="followers-modal__user svelte-13xi1sg" role="button" tabindex="0"><!> <div class="followers-modal__info svelte-13xi1sg"><span class="followers-modal__name svelte-13xi1sg"> </span> <!></div> <!></div>')
  , Ia = _('<div class="followers-modal__loading-more svelte-13xi1sg"><!></div>')
  , za = _("<!> <!>", 1)
  , Da = _('<div class="followers-modal__list svelte-13xi1sg"><!></div>');
function Oa(J, s) {
    He(s, !0);
    const x = () => Ye(Tt, "$isAuthenticated", g)
      , h = () => Ye(At, "$currentUser", g)
      , [g,O] = zt();
    let Q = Nt(s, "isOwnProfile", 3, !1)
      , P = y(tt([]))
      , S = y(!1)
      , C = y("")
      , M = y("")
      , le = y(1)
      , me = y(!1)
      , _e = y(!1)
      , G = y(tt(new Set))
      , se = fe( () => e(M).trim() ? e(P).filter(u => u.displayName.toLowerCase().includes(e(M).toLowerCase()) || u.username && u.username.toLowerCase().includes(e(M).toLowerCase())) : e(P));
    at( () => {
        s.isOpen && s.username && (t(M, ""),
        t(le, 1),
        a())
    }
    );
    async function a() {
        if (!s.username) {
            t(C, "  ");
            return
        }
        t(S, !0),
        t(C, ""),
        t(P, [], !0);
        try {
            const u = s.type === "followers" ? await Ce.getFollowers(s.username, 1, 30) : await Ce.getFollowing(s.username, 1, 30);
            u.error ? t(C, u.error, !0) : u.data && (t(P, u.data.users, !0),
            t(me, u.data.pagination.hasMore, !0),
            t(le, 1))
        } catch {
            t(C, "   ")
        } finally {
            t(S, !1)
        }
    }
    async function I() {
        if (!Q() || e(_e) || !e(me) || !s.username)
            return;
        t(_e, !0);
        const u = e(le) + 1;
        try {
            const F = s.type === "followers" ? await Ce.getFollowers(s.username, u, 30) : await Ce.getFollowing(s.username, u, 30);
            F.data && (t(P, [...e(P), ...F.data.users], !0),
            t(me, F.data.pagination.hasMore, !0),
            t(le, u))
        } catch {} finally {
            t(_e, !1)
        }
    }
    function ve() {
        t(M, ""),
        t(P, [], !0),
        t(C, ""),
        s.onClose()
    }
    function A(u) {
        ve();
        const F = u.username || u.id;
        xt(`/${F}`)
    }
    function he(u, F) {
        (F.key === "Enter" || F.key === " ") && (F.preventDefault(),
        A(u))
    }
    async function oe(u, F) {
        if (F.stopPropagation(),
        !x() || e(G).has(u.id))
            return;
        t(G, new Set([...e(G), u.id]), !0);
        const ee = u.isFollowing;
        t(P, e(P).map(q => q.id === u.id ? {
            ...q,
            isFollowing: !ee
        } : q), !0);
        const K = u.username || u.id;
        (ee ? await Ce.unfollow(K) : await Ce.follow(K)).success || t(P, e(P).map(q => q.id === u.id ? {
            ...q,
            isFollowing: ee
        } : q), !0),
        t(G, new Set([...e(G)].filter(q => q !== u.id)), !0)
    }
    function W() {
        return s.type === "followers" ? "" : ""
    }
    const Z = ka(u => {
        const F = u.target;
        F.scrollHeight - F.scrollTop <= F.clientHeight + 100 && I()
    }
    , 200);
    Dt(J, {
        get isOpen() {
            return s.isOpen
        },
        onClose: ve,
        maxWidth: "400px",
        showCloseButton: !1,
        noPadding: !0,
        header: F => {
            var ee = xa()
              , K = de(ee)
              , ne = n(K)
              , q = n(ne, !0);
            o(ne);
            var N = f(ne, 2);
            N.__click = ve;
            var L = n(N);
            ct(L, {
                size: 20
            }),
            o(N),
            o(K);
            var ue = f(K, 2)
              , X = n(ue);
            va(X, {
                size: 18
            });
            var Me = f(X, 2);
            Rt(Me),
            o(ue),
            T(te => ie(q, te), [W]),
            ma(Me, () => e(M), te => t(M, te)),
            l(F, ee)
        }
        ,
        children: (F, ee) => {
            var K = Da()
              , ne = n(K);
            {
                var q = L => {
                    var ue = Pa()
                      , X = n(ue);
                    Je(X, {}),
                    o(ue),
                    l(L, ue)
                }
                  , N = L => {
                    var ue = ye()
                      , X = de(ue);
                    {
                        var Me = H => {
                            var ae = Ca()
                              , pe = n(ae)
                              , be = n(pe, !0);
                            o(pe);
                            var ge = f(pe, 2);
                            ge.__click = a,
                            o(ae),
                            T( () => ie(be, e(C))),
                            l(H, ae)
                        }
                          , te = H => {
                            var ae = ye()
                              , pe = de(ae);
                            {
                                var be = Y => {
                                    var d = Ma()
                                      , i = n(d);
                                    {
                                        var v = b => {
                                            var p = je("  ");
                                            l(b, p)
                                        }
                                          , k = b => {
                                            var p = ye()
                                              , U = de(p);
                                            {
                                                var $ = R => {
                                                    var j = je("  ");
                                                    l(R, j)
                                                }
                                                  , re = R => {
                                                    var j = je("  ");
                                                    l(R, j)
                                                }
                                                ;
                                                w(U, R => {
                                                    s.type === "followers" ? R($) : R(re, !1)
                                                }
                                                , !0)
                                            }
                                            l(b, p)
                                        }
                                        ;
                                        w(i, b => {
                                            e(M).trim() ? b(v) : b(k, !1)
                                        }
                                        )
                                    }
                                    o(d),
                                    l(Y, d)
                                }
                                  , ge = Y => {
                                    var d = za()
                                      , i = de(d);
                                    Lt(i, 17, () => e(se), b => b.id, (b, p) => {
                                        var U = Sa();
                                        U.__click = () => A(e(p)),
                                        U.__keydown = B => he(e(p), B);
                                        var $ = n(U);
                                        Ot($, {
                                            get avatar() {
                                                return e(p).avatar
                                            },
                                            get name() {
                                                return e(p).displayName
                                            },
                                            size: 44
                                        });
                                        var re = f($, 2)
                                          , R = n(re)
                                          , j = n(R, !0);
                                        o(R);
                                        var ce = f(R, 2);
                                        {
                                            var Fe = B => {
                                                var D = Fa()
                                                  , we = n(D);
                                                o(D),
                                                T( () => ie(we, `@${e(p).username ?? ""}`)),
                                                l(B, D)
                                            }
                                            ;
                                            w(ce, B => {
                                                e(p).username && B(Fe)
                                            }
                                            )
                                        }
                                        o(re);
                                        var ze = f(re, 2);
                                        {
                                            var z = B => {
                                                var D = Ua();
                                                D.__click = we => {
                                                    we.stopPropagation(),
                                                    ve(),
                                                    xt(`/${h()?.username || h()?.id}`)
                                                }
                                                ,
                                                l(B, D)
                                            }
                                              , V = B => {
                                                var D = ye()
                                                  , we = de(D);
                                                {
                                                    var ke = Ue => {
                                                        var Se = Ba();
                                                        let Ge;
                                                        Se.__click = Le => oe(e(p), Le);
                                                        var $e = n(Se, !0);
                                                        o(Se),
                                                        T(Le => {
                                                            Ge = De(Se, 1, "followers-modal__follow-btn svelte-13xi1sg", null, Ge, {
                                                                following: e(p).isFollowing
                                                            }),
                                                            Se.disabled = Le,
                                                            ie($e, e(p).isFollowing ? "" : "")
                                                        }
                                                        , [ () => e(G).has(e(p).id)]),
                                                        l(Ue, Se)
                                                    }
                                                    ;
                                                    w(we, Ue => {
                                                        x() && Ue(ke)
                                                    }
                                                    , !0)
                                                }
                                                l(B, D)
                                            }
                                            ;
                                            w(ze, B => {
                                                x() && h()?.id === e(p).id ? B(z) : B(V, !1)
                                            }
                                            )
                                        }
                                        o(U),
                                        T( () => ie(j, e(p).displayName)),
                                        l(b, U)
                                    }
                                    );
                                    var v = f(i, 2);
                                    {
                                        var k = b => {
                                            var p = Ia()
                                              , U = n(p);
                                            Je(U, {}),
                                            o(p),
                                            l(b, p)
                                        }
                                        ;
                                        w(v, b => {
                                            e(_e) && b(k)
                                        }
                                        )
                                    }
                                    l(Y, d)
                                }
                                ;
                                w(pe, Y => {
                                    e(se).length === 0 ? Y(be) : Y(ge, !1)
                                }
                                , !0)
                            }
                            l(H, ae)
                        }
                        ;
                        w(X, H => {
                            e(C) ? H(Me) : H(te, !1)
                        }
                        , !0)
                    }
                    l(L, ue)
                }
                ;
                w(ne, L => {
                    e(S) ? L(q) : L(N, !1)
                }
                )
            }
            o(K),
            It("scroll", K, Z),
            l(F, K)
        }
        ,
        $$slots: {
            header: !0,
            default: !0
        }
    }),
    Ke(),
    O()
}
qe(["click", "keydown"]);
var La = _('<img alt=" " class="profile-banner__image svelte-9mur0y"/>')
  , Ra = _('<div class="profile-banner__gradient svelte-9mur0y"></div>')
  , Ta = _('<button class="profile-banner__btn profile-banner__btn--danger svelte-9mur0y" title=" "><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>')
  , Aa = _('<div class="profile-banner__actions svelte-9mur0y"><button class="profile-banner__btn svelte-9mur0y" title=" "><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"></circle><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"></circle><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"></circle><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"></circle><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"></path></svg></button> <!></div>')
  , Na = _("<div><!> <!></div>");
function Va(J, s) {
    var x = Na();
    let h;
    var g = n(x);
    {
        var O = C => {
            var M = La();
            T( () => it(M, "src", s.banner)),
            l(C, M)
        }
          , Q = C => {
            var M = Ra();
            l(C, M)
        }
        ;
        w(g, C => {
            s.banner ? C(O) : C(Q, !1)
        }
        )
    }
    var P = f(g, 2);
    {
        var S = C => {
            var M = Aa()
              , le = n(M);
            le.__click = function(...G) {
                s.onDrawBanner?.apply(this, G)
            }
            ;
            var me = f(le, 2);
            {
                var _e = G => {
                    var se = Ta();
                    se.__click = function(...a) {
                        s.onRemoveBanner?.apply(this, a)
                    }
                    ,
                    T( () => se.disabled = s.isSaving),
                    l(G, se)
                }
                ;
                w(me, G => {
                    s.banner && G(_e)
                }
                )
            }
            o(M),
            T( () => le.disabled = s.isSaving),
            l(C, M)
        }
        ;
        w(P, C => {
            s.isOwnProfile && C(S)
        }
        )
    }
    o(x),
    T( () => h = De(x, 1, "profile-banner svelte-9mur0y", null, h, {
        "has-image": s.banner
    })),
    l(J, x)
}
qe(["click"]);
var Ea = _('<div class="profile-avatar profile-avatar--emoji svelte-p40znu"><span class="profile-avatar__emoji svelte-p40znu"> </span></div>')
  , Wa = _('<div class="profile-avatar no-avatar svelte-p40znu"><!></div>')
  , ja = _('<button class="profile-verify-btn svelte-p40znu" title="   "><!></button>')
  , qa = _('<div class="profile-own-actions svelte-p40znu"><button class="profile-edit-btn svelte-p40znu"></button> <!></div>')
  , Ha = _('<div class="profile-action__buttons svelte-p40znu"><button class="profile-unblock-btn svelte-p40znu"></button></div>')
  , Ka = _('<div class="profile-actions-menu svelte-p40znu"><button class="profile-actions-menu__item svelte-p40znu"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg> </button> <button class="profile-actions-menu__item profile-actions-menu__item--danger svelte-p40znu"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line></svg> </button></div>')
  , Za = _('<div class="profile-action__buttons svelte-p40znu"><button> </button> <div class="profile-actions-menu-wrapper svelte-p40znu"><button class="profile-more-btn svelte-p40znu" title=""><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="5" r="2"></circle><circle cx="12" cy="12" r="2"></circle><circle cx="12" cy="19" r="2"></circle></svg></button> <!></div></div>')
  , Xa = _('<span class="profile-bio__verified svelte-p40znu"><!></span>')
  , Ya = _('<p class="profile-bio__username svelte-p40znu"> </p>')
  , Ja = _('<p class="profile-bio__text svelte-p40znu"> </p>')
  , Qa = _('<div class="profile-meta__item follows-you svelte-p40znu">  </div>')
  , Ga = _('<div class="profile-info svelte-p40znu"><div class="profile-info__row svelte-p40znu"><div class="profile-avatar-wrapper svelte-p40znu"><!></div> <!></div> <div class="profile-bio svelte-p40znu"><div class="profile-bio__name-row svelte-p40znu"><h1 class="profile-bio__name svelte-p40znu"> </h1> <!> <!></div> <!> <!> <div class="profile-meta svelte-p40znu"><div class="profile-meta__item svelte-p40znu"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg> <span> </span></div> <!></div> <div class="profile-stats svelte-p40znu"><button class="profile-stats__item svelte-p40znu"><span class="profile-stats__value svelte-p40znu"> </span> <span class="profile-stats__label svelte-p40znu"></span></button> <button class="profile-stats__item svelte-p40znu"><span class="profile-stats__value svelte-p40znu"> </span> <span class="profile-stats__label svelte-p40znu"></span></button></div></div></div>');
function $a(J, s) {
    He(s, !0);
    let x = y(!1);
    function h(d) {
        d.stopPropagation(),
        t(x, !e(x))
    }
    function g() {
        t(x, !1),
        s.onReport()
    }
    function O() {
        t(x, !1),
        s.onBlock()
    }
    function Q() {
        e(x) && t(x, !1)
    }
    function P(d) {
        return new Date(d).toLocaleDateString("ru-RU", {
            month: "long",
            year: "numeric"
        })
    }
    var S = Ga();
    It("click", ia, Q);
    var C = n(S)
      , M = n(C)
      , le = n(M);
    {
        var me = d => {
            var i = Ea()
              , v = n(i)
              , k = n(v, !0);
            o(v),
            o(i),
            T( () => ie(k, s.profile.avatar)),
            l(d, i)
        }
          , _e = d => {
            var i = Wa()
              , v = n(i);
            ua(v, {
                size: 120
            }),
            o(i),
            l(d, i)
        }
        ;
        w(le, d => {
            s.profile.avatar ? d(me) : d(_e, !1)
        }
        )
    }
    o(M);
    var G = f(M, 2);
    {
        var se = d => {
            var i = qa()
              , v = n(i);
            v.__click = function(...p) {
                s.onEditProfile?.apply(this, p)
            }
            ;
            var k = f(v, 2);
            {
                var b = p => {
                    var U = ja();
                    U.__click = function(...re) {
                        s.onVerify?.apply(this, re)
                    }
                    ;
                    var $ = n(U);
                    Mt($, {
                        size: 18
                    }),
                    o(U),
                    l(p, U)
                }
                ;
                w(k, p => {
                    s.profile.verified || p(b)
                }
                )
            }
            o(i),
            l(d, i)
        }
          , a = d => {
            var i = ye()
              , v = de(i);
            {
                var k = b => {
                    var p = ye()
                      , U = de(p);
                    {
                        var $ = R => {
                            var j = Ha()
                              , ce = n(j);
                            ce.__click = function(...Fe) {
                                s.onUnblock?.apply(this, Fe)
                            }
                            ,
                            o(j),
                            l(R, j)
                        }
                          , re = R => {
                            var j = Za()
                              , ce = n(j);
                            ce.__click = function(...we) {
                                s.onFollow?.apply(this, we)
                            }
                            ;
                            let Fe;
                            var ze = n(ce, !0);
                            o(ce);
                            var z = f(ce, 2)
                              , V = n(z);
                            V.__click = h;
                            var B = f(V, 2);
                            {
                                var D = we => {
                                    var ke = Ka()
                                      , Ue = n(ke);
                                    Ue.__click = g;
                                    var Se = f(Ue, 2);
                                    Se.__click = O,
                                    o(ke),
                                    l(we, ke)
                                }
                                ;
                                w(B, we => {
                                    e(x) && we(D)
                                }
                                )
                            }
                            o(z),
                            o(j),
                            T( () => {
                                Fe = De(ce, 1, "profile-follow-btn svelte-p40znu", null, Fe, {
                                    following: s.profile.isFollowing
                                }),
                                ce.disabled = s.isFollowLoading,
                                ie(ze, s.profile.isFollowing ? "" : "")
                            }
                            ),
                            l(R, j)
                        }
                        ;
                        w(U, R => {
                            s.profile.isBlockedByMe ? R($) : R(re, !1)
                        }
                        )
                    }
                    l(b, p)
                }
                ;
                w(v, b => {
                    s.isAuthenticated && b(k)
                }
                , !0)
            }
            l(d, i)
        }
        ;
        w(G, d => {
            s.isOwnProfile ? d(se) : d(a, !1)
        }
        )
    }
    o(C);
    var I = f(C, 2)
      , ve = n(I)
      , A = n(ve)
      , he = n(A, !0);
    o(A);
    var oe = f(A, 2);
    {
        var W = d => {
            var i = Xa()
              , v = n(i);
            Mt(v, {
                size: 20
            }),
            o(i),
            l(d, i)
        }
        ;
        w(oe, d => {
            s.profile.verified && d(W)
        }
        )
    }
    var Z = f(oe, 2);
    {
        var u = d => {
            da(d, {
                get pin() {
                    return s.profile.pin
                },
                size: 18
            })
        }
        ;
        w(Z, d => {
            s.profile.pin && d(u)
        }
        )
    }
    o(ve);
    var F = f(ve, 2);
    {
        var ee = d => {
            var i = Ya()
              , v = n(i);
            o(i),
            T( () => ie(v, `@${s.profile.username ?? ""}`)),
            l(d, i)
        }
        ;
        w(F, d => {
            s.profile.username && d(ee)
        }
        )
    }
    var K = f(F, 2);
    {
        var ne = d => {
            var i = Ja()
              , v = n(i, !0);
            o(i),
            T( () => ie(v, s.profile.bio)),
            l(d, i)
        }
        ;
        w(K, d => {
            s.profile.bio && d(ne)
        }
        )
    }
    var q = f(K, 2)
      , N = n(q)
      , L = f(n(N), 2)
      , ue = n(L);
    o(L),
    o(N);
    var X = f(N, 2);
    {
        var Me = d => {
            var i = Qa();
            l(d, i)
        }
        ;
        w(X, d => {
            s.profile.isFollowedBy && !s.isOwnProfile && d(Me)
        }
        )
    }
    o(q);
    var te = f(q, 2)
      , H = n(te);
    H.__click = function(...d) {
        s.onFollowingClick?.apply(this, d)
    }
    ;
    var ae = n(H)
      , pe = n(ae, !0);
    o(ae),
    Xe(2),
    o(H);
    var be = f(H, 2);
    be.__click = function(...d) {
        s.onFollowersClick?.apply(this, d)
    }
    ;
    var ge = n(be)
      , Y = n(ge, !0);
    o(ge),
    Xe(2),
    o(be),
    o(te),
    o(I),
    o(S),
    T( (d, i, v) => {
        ie(he, s.profile.displayName),
        ie(ue, `: ${d ?? ""}`),
        ie(pe, i),
        ie(Y, v)
    }
    , [ () => P(s.profile.createdAt), () => Ct(s.profile.followingCount), () => Ct(s.profile.followersCount)]),
    l(J, S),
    Ke()
}
qe(["click"]);
var er = _("<button></button>")
  , tr = _('<div class="profile-tabs svelte-1r4i2gu"><button></button> <!></div>');
function ar(J, s) {
    He(s, !0);
    let x = Nt(s, "canSeeLikes", 3, !0);
    var h = tr()
      , g = n(h);
    let O;
    g.__click = () => s.onTabChange("posts");
    var Q = f(g, 2);
    {
        var P = S => {
            var C = er();
            let M;
            C.__click = () => s.onTabChange("liked"),
            T( () => M = De(C, 1, "profile-tab svelte-1r4i2gu", null, M, {
                active: s.activeTab === "liked"
            })),
            l(S, C)
        }
        ;
        w(Q, S => {
            x() && S(P)
        }
        )
    }
    o(h),
    T( () => O = De(g, 1, "profile-tab svelte-1r4i2gu", null, O, {
        active: s.activeTab === "posts"
    })),
    l(J, h),
    Ke()
}
qe(["click"]);
var rr = _('<div class="wall-post-form__error svelte-vw1v4s"> </div>')
  , ir = _('<div class="upload-overlay svelte-vw1v4s"><svg class="spinner svelte-vw1v4s" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="1s" repeatCount="indefinite"></animateTransform></circle></svg></div>')
  , sr = _('<button class="wall-post-form__edit-btn svelte-vw1v4s" title=" "><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"></path><path d="M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"></path></svg></button>')
  , or = _('<div><img alt=""/> <!> <!> <button class="wall-post-form__remove-btn svelte-vw1v4s"><!></button></div>')
  , nr = _("<div></div>")
  , lr = _('<span class="wall-post-form__counter svelte-vw1v4s"> </span>')
  , vr = _('<div class="wall-post-form svelte-vw1v4s"><!> <div class="wall-post-form__inner svelte-vw1v4s"><div class="wall-post-form__avatar svelte-vw1v4s"><!></div> <div class="wall-post-form__content svelte-vw1v4s"><textarea class="wall-post-form__textarea svelte-vw1v4s"></textarea> <!></div></div> <div class="wall-post-form__toolbar svelte-vw1v4s"><div class="wall-post-form__attach svelte-vw1v4s"><input type="file" class="wall-post-form__file-input svelte-vw1v4s" accept="image/*" multiple/> <button class="wall-post-form__attach-btn svelte-vw1v4s" title=" "><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg></button> <button class="wall-post-form__attach-btn svelte-vw1v4s" title=""><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"></path><path d="M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"></path><path d="M14.5 17.5 4.5 15"></path></svg></button> <!></div> <button class="wall-post-form__submit svelte-vw1v4s"> </button></div></div>');
function ur(J, s) {
    He(s, !0);
    const x = 10;
    let h = y(""), g = y(tt([])), O, Q, P = y(!1), S = y(""), C = fe( () => e(g).some(i => i.isUploading)), M = fe( () => e(g).filter(i => i.uploaded).map(i => i.uploaded)), le = fe( () => !e(h).trim() && e(M).length === 0 || e(P) || e(C)), me = fe( () => e(g).length < x);
    function _e(i) {
        const v = i.target;
        t(h, v.value, !0),
        v.style.height = "auto",
        v.style.height = `${Math.min(v.scrollHeight, 200)}px`
    }
    async function G(i) {
        const k = i.target.files;
        if (!k || k.length === 0)
            return;
        const b = x - e(g).length
          , p = Array.from(k).slice(0, b);
        for (const U of p) {
            const $ = crypto.randomUUID()
              , re = new FileReader;
            re.onload = R => {
                const j = R.target?.result
                  , ce = {
                    id: $,
                    preview: j,
                    file: U,
                    isUploading: !0
                };
                t(g, [...e(g), ce], !0),
                se($, U)
            }
            ,
            re.readAsDataURL(U)
        }
        O && (O.value = "")
    }
    async function se(i, v) {
        const k = await Qe.uploadFile(v);
        t(g, e(g).map(b => {
            if (b.id === i) {
                if (k.error)
                    return {
                        ...b,
                        isUploading: !1,
                        error: k.error
                    };
                if (k.data)
                    return {
                        ...b,
                        isUploading: !1,
                        uploaded: k.data
                    }
            }
            return b
        }
        ), !0)
    }
    async function a(i) {
        const v = e(g).find(k => k.id === i);
        v?.uploaded && await Qe.deleteFile(v.uploaded.id),
        t(g, e(g).filter(k => k.id !== i), !0)
    }
    function I(i) {
        i.key === "Enter" && !i.shiftKey && !("ontouchstart"in window) && (i.preventDefault(),
        ve())
    }
    async function ve() {
        if (!e(h).trim() && e(M).length === 0)
            return;
        t(P, !0),
        t(S, "");
        const i = e(M).length > 0 ? e(M).map(k => k.id) : void 0
          , v = await s.onPostCreated(i, e(h));
        !v.success && v.error ? t(S, v.error, !0) : (t(h, ""),
        t(g, [], !0),
        Q && (Q.style.height = "auto")),
        t(P, !1)
    }
    function A(i, v) {
        const k = crypto.randomUUID()
          , b = {
            id: k,
            preview: i,
            file: v,
            isUploading: !0,
            isDrawing: !0
        };
        t(g, [...e(g), b], !0),
        se(k, v)
    }
    function he(i, v, k) {
        const b = e(g)[i];
        b?.uploaded && Qe.deleteFile(b.uploaded.id);
        const p = b.id;
        t(g, e(g).map( (U, $) => $ === i ? {
            ...U,
            preview: v,
            file: k,
            uploaded: void 0,
            isUploading: !0
        } : U), !0),
        se(p, k)
    }
    function oe(i) {
        return e(g)[i]
    }
    function W() {
        return e(g)
    }
    var Z = {
        addDrawing: A,
        updateDrawing: he,
        getDrawingItem: oe,
        getMediaItems: W
    }
      , u = vr()
      , F = n(u);
    {
        var ee = i => {
            var v = rr()
              , k = n(v, !0);
            o(v),
            T( () => ie(k, e(S))),
            l(i, v)
        }
        ;
        w(F, i => {
            e(S) && i(ee)
        }
        )
    }
    var K = f(F, 2)
      , ne = n(K)
      , q = n(ne);
    Ot(q, {
        get avatar() {
            return s.currentUserAvatar
        },
        get name() {
            return s.currentUserName
        },
        size: 40
    }),
    o(ne);
    var N = f(ne, 2)
      , L = n(N);
    sa(L),
    L.__input = _e,
    L.__keydown = I,
    rt(L, i => Q = i, () => Q);
    var ue = f(L, 2);
    {
        var X = i => {
            var v = nr();
            let k;
            Lt(v, 23, () => e(g), b => b.id, (b, p) => {
                var U = or();
                let $;
                var re = n(U);
                let R;
                var j = f(re, 2);
                {
                    var ce = B => {
                        var D = ir();
                        l(B, D)
                    }
                    ;
                    w(j, B => {
                        e(p).isUploading && B(ce)
                    }
                    )
                }
                var Fe = f(j, 2);
                {
                    var ze = B => {
                        var D = sr();
                        D.__click = () => {}
                        ,
                        l(B, D)
                    }
                    ;
                    w(Fe, B => {
                        e(p).isDrawing && !e(p).isUploading && B(ze)
                    }
                    )
                }
                var z = f(Fe, 2);
                z.__click = () => a(e(p).id);
                var V = n(z);
                ct(V, {
                    size: 14
                }),
                o(z),
                o(U),
                T( () => {
                    $ = De(U, 1, "wall-post-form__preview-item svelte-vw1v4s", null, $, {
                        "is-drawing": e(p).isDrawing
                    }),
                    it(re, "src", e(p).preview),
                    R = De(re, 1, "svelte-vw1v4s", null, R, {
                        uploading: e(p).isUploading
                    }),
                    z.disabled = e(p).isUploading
                }
                ),
                l(b, U)
            }
            ),
            o(v),
            T( () => k = De(v, 1, "wall-post-form__previews svelte-vw1v4s", null, k, {
                single: e(g).length === 1
            })),
            l(i, v)
        }
        ;
        w(ue, i => {
            e(g).length > 0 && i(X)
        }
        )
    }
    o(N),
    o(K);
    var Me = f(K, 2)
      , te = n(Me)
      , H = n(te);
    H.__change = G,
    rt(H, i => O = i, () => O);
    var ae = f(H, 2);
    ae.__click = () => O?.click();
    var pe = f(ae, 2);
    pe.__click = function(...i) {
        s.onOpenDrawing?.apply(this, i)
    }
    ;
    var be = f(pe, 2);
    {
        var ge = i => {
            var v = lr()
              , k = n(v);
            o(v),
            T( () => ie(k, `${e(g).length ?? ""}/10`)),
            l(i, v)
        }
        ;
        w(be, i => {
            e(g).length > 0 && i(ge)
        }
        )
    }
    o(te);
    var Y = f(te, 2);
    Y.__click = ve;
    var d = n(Y, !0);
    return o(Y),
    o(Me),
    o(u),
    T( () => {
        ha(L, e(h)),
        it(L, "placeholder", s.isOwnProfile ? "   ?" : `   ${s.recipientName}...`),
        ae.disabled = !e(me),
        pe.disabled = !e(me),
        Y.disabled = e(le),
        ie(d, e(P) ? "..." : "")
    }
    ),
    l(J, u),
    Ke(Z)
}
qe(["input", "keydown", "click", "change"]);
var dr = _('<div class="verification-loading svelte-14bvw1i"><div class="spinner svelte-14bvw1i"></div> <p>...</p></div>')
  , cr = _('<div class="verification-status verified svelte-14bvw1i"><div class="status-icon svelte-14bvw1i"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg></div> <h3 class="svelte-14bvw1i"> !</h3> <p class="svelte-14bvw1i">     .</p></div>')
  , fr = _('<div class="verification-status pending svelte-14bvw1i"><div class="status-icon svelte-14bvw1i"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></div> <h3 class="svelte-14bvw1i">  </h3> <p class="svelte-14bvw1i"> </p> <p class="hint svelte-14bvw1i">          .</p></div>')
  , _r = _('<p class="rejection-reason svelte-14bvw1i"> </p>')
  , pr = _('<div class="verification-status rejected svelte-14bvw1i"><div class="status-icon svelte-14bvw1i"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div> <h3 class="svelte-14bvw1i"> </h3> <!> <p class="hint svelte-14bvw1i">    .</p> <div class="new-request svelte-14bvw1i"><button class="btn-new-request svelte-14bvw1i">  </button></div></div>')
  , gr = _('<div class="error-message svelte-14bvw1i"> </div>')
  , wr = _('<div class="video-preview svelte-14bvw1i"><video controls class="svelte-14bvw1i"><track kind="captions"/></video> <button class="remove-video svelte-14bvw1i"><!></button></div>', 2)
  , mr = _('<div class="upload-area svelte-14bvw1i" role="button" tabindex="0"><input type="file" accept="video/mp4,video/webm,video/quicktime" class="hidden-input svelte-14bvw1i"/> <div class="upload-icon svelte-14bvw1i"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg></div> <p class="upload-text svelte-14bvw1i">,   </p> <p class="upload-hint svelte-14bvw1i">MP4, WebM  MOV,  50 </p></div>')
  , hr = _('<div class="verification-form svelte-14bvw1i"><p class="form-description svelte-14bvw1i"> ,   ,        .</p> <!> <div class="video-upload svelte-14bvw1i"><!></div> <label class="consent-checkbox svelte-14bvw1i"><input type="checkbox" class="svelte-14bvw1i"/> <span class="svelte-14bvw1i">   ,         Nowkie</span></label> <div class="form-actions svelte-14bvw1i"><button class="btn-cancel svelte-14bvw1i"></button> <button class="btn-submit svelte-14bvw1i"><!></button></div></div>');
function br(J, s) {
    He(s, !0);
    let x = y(null), h = y(!0), g = y(null), O = y(null), Q = y(!1), P = y(!1), S = y(""), C, M = y(!1);
    const le = 50 * 1024 * 1024
      , me = ["video/mp4", "video/webm", "video/quicktime"];
    at( () => {
        s.isOpen && _e()
    }
    );
    async function _e() {
        t(h, !0),
        t(S, "");
        const A = await St.getStatus();
        A.data ? t(x, A.data, !0) : t(S, A.error || "   ", !0),
        t(h, !1)
    }
    function G(A) {
        const oe = A.target.files?.[0];
        if (!oe)
            return;
        if (!me.includes(oe.type)) {
            t(S, "   (MP4, WebM, MOV)");
            return
        }
        if (oe.size > le) {
            t(S, "   - 50 ");
            return
        }
        t(S, ""),
        t(g, oe, !0);
        const W = URL.createObjectURL(oe);
        t(O, W, !0)
    }
    function se() {
        e(O) && URL.revokeObjectURL(e(O)),
        t(g, null),
        t(O, null),
        C && (C.value = "")
    }
    async function a() {
        if (!e(g)) {
            t(S, "   ");
            return
        }
        t(P, !0),
        t(Q, !0),
        t(S, "");
        const A = await Qe.uploadFile(e(g));
        if (A.error || !A.data) {
            t(S, A.error || "   ", !0),
            t(P, !1),
            t(Q, !1);
            return
        }
        t(Q, !1);
        const he = await St.submitRequest(A.data.url);
        if (!he.success) {
            t(S, he.error || "   ", !0),
            t(P, !1);
            return
        }
        t(P, !1),
        await _e(),
        s.onSuccess && s.onSuccess()
    }
    function I() {
        e(P) || (se(),
        s.onClose())
    }
    function ve(A) {
        return new Date(A).toLocaleString("ru-RU", {
            day: "numeric",
            month: "long",
            year: "numeric",
            hour: "2-digit",
            minute: "2-digit"
        })
    }
    Dt(J, {
        get isOpen() {
            return s.isOpen
        },
        title: "",
        maxWidth: "500px",
        onClose: I,
        get closeDisabled() {
            return e(P)
        },
        children: he => {
            var oe = ye()
              , W = de(oe);
            {
                var Z = F => {
                    var ee = dr();
                    l(F, ee)
                }
                  , u = F => {
                    var ee = ye()
                      , K = de(ee);
                    {
                        var ne = N => {
                            var L = cr();
                            l(N, L)
                        }
                          , q = N => {
                            var L = ye()
                              , ue = de(L);
                            {
                                var X = te => {
                                    var H = fr()
                                      , ae = f(n(H), 4)
                                      , pe = n(ae);
                                    o(ae),
                                    Xe(2),
                                    o(H),
                                    T(be => ie(pe, `   ${be ?? ""}`), [ () => e(x).submittedAt ? ve(e(x).submittedAt) : ""]),
                                    l(te, H)
                                }
                                  , Me = te => {
                                    var H = ye()
                                      , ae = de(H);
                                    {
                                        var pe = ge => {
                                            var Y = pr()
                                              , d = f(n(Y), 4);
                                            {
                                                var i = b => {
                                                    var p = _r()
                                                      , U = n(p);
                                                    o(p),
                                                    T( () => ie(U, `: ${e(x).rejectionReason ?? ""}`)),
                                                    l(b, p)
                                                }
                                                ;
                                                w(d, b => {
                                                    e(x).rejectionReason && b(i)
                                                }
                                                )
                                            }
                                            var v = f(d, 4)
                                              , k = n(v);
                                            k.__click = () => t(x, {
                                                status: "none"
                                            }, !0),
                                            o(v),
                                            o(Y),
                                            l(ge, Y)
                                        }
                                          , be = ge => {
                                            var Y = hr()
                                              , d = f(n(Y), 2);
                                            {
                                                var i = z => {
                                                    var V = gr()
                                                      , B = n(V, !0);
                                                    o(V),
                                                    T( () => ie(B, e(S))),
                                                    l(z, V)
                                                }
                                                ;
                                                w(d, z => {
                                                    e(S) && z(i)
                                                }
                                                )
                                            }
                                            var v = f(d, 2)
                                              , k = n(v);
                                            {
                                                var b = z => {
                                                    var V = wr()
                                                      , B = n(V)
                                                      , D = f(B, 2);
                                                    D.__click = se;
                                                    var we = n(D);
                                                    ct(we, {
                                                        size: 16
                                                    }),
                                                    o(D),
                                                    o(V),
                                                    T( () => {
                                                        it(B, "src", e(O)),
                                                        D.disabled = e(P)
                                                    }
                                                    ),
                                                    l(z, V)
                                                }
                                                  , p = z => {
                                                    var V = mr();
                                                    V.__click = () => C?.click(),
                                                    V.__keydown = D => D.key === "Enter" && C?.click();
                                                    var B = n(V);
                                                    B.__change = G,
                                                    rt(B, D => C = D, () => C),
                                                    Xe(6),
                                                    o(V),
                                                    l(z, V)
                                                }
                                                ;
                                                w(k, z => {
                                                    e(O) ? z(b) : z(p, !1)
                                                }
                                                )
                                            }
                                            o(v);
                                            var U = f(v, 2)
                                              , $ = n(U);
                                            Rt($),
                                            Xe(2),
                                            o(U);
                                            var re = f(U, 2)
                                              , R = n(re);
                                            R.__click = I;
                                            var j = f(R, 2);
                                            j.__click = a;
                                            var ce = n(j);
                                            {
                                                var Fe = z => {
                                                    var V = je(" ...");
                                                    l(z, V)
                                                }
                                                  , ze = z => {
                                                    var V = ye()
                                                      , B = de(V);
                                                    {
                                                        var D = ke => {
                                                            var Ue = je("...");
                                                            l(ke, Ue)
                                                        }
                                                          , we = ke => {
                                                            var Ue = je(" ");
                                                            l(ke, Ue)
                                                        }
                                                        ;
                                                        w(B, ke => {
                                                            e(P) ? ke(D) : ke(we, !1)
                                                        }
                                                        , !0)
                                                    }
                                                    l(z, V)
                                                }
                                                ;
                                                w(ce, z => {
                                                    e(Q) ? z(Fe) : z(ze, !1)
                                                }
                                                )
                                            }
                                            o(j),
                                            o(re),
                                            o(Y),
                                            T( () => {
                                                $.disabled = e(P),
                                                R.disabled = e(P),
                                                j.disabled = !e(g) || !e(M) || e(P)
                                            }
                                            ),
                                            ba($, () => e(M), z => t(M, z)),
                                            l(ge, Y)
                                        }
                                        ;
                                        w(ae, ge => {
                                            e(x)?.status === "rejected" ? ge(pe) : ge(be, !1)
                                        }
                                        , !0)
                                    }
                                    l(te, H)
                                }
                                ;
                                w(ue, te => {
                                    e(x)?.status === "pending" ? te(X) : te(Me, !1)
                                }
                                , !0)
                            }
                            l(N, L)
                        }
                        ;
                        w(K, N => {
                            e(x)?.status === "verified" ? N(ne) : N(q, !1)
                        }
                        , !0)
                    }
                    l(F, ee)
                }
                ;
                w(W, F => {
                    e(h) ? F(Z) : F(u, !1)
                }
                )
            }
            l(he, oe)
        }
        ,
        $$slots: {
            default: !0
        }
    }),
    Ke()
}
qe(["click", "keydown", "change"]);
var yr = _('<div class="profile-loading svelte-14luta1"><!></div>')
  , kr = _('<div class="profile-error svelte-14luta1"><p> </p></div>')
  , xr = _('<div class="profile-empty svelte-14luta1">   </div>')
  , Pr = _('<div class="profile-loading svelte-14luta1"><!></div>')
  , Cr = _('<div class="profile-empty svelte-14luta1"> </div>')
  , Mr = _('<div class="profile-posts svelte-14luta1"><!></div>')
  , Fr = _('<div class="profile-card svelte-14luta1"><!> <!> <!> <!> <!></div>')
  , Ur = _("<!> <!>", 1)
  , Br = _("<!> <!> <!> <!> <!> <!> <!>", 1);
function qr(J, s) {
    He(s, !0);
    const x = () => Ye(oa, "$page", O)
      , h = () => Ye(At, "$currentUser", O)
      , g = () => Ye(Tt, "$isAuthenticated", O)
      , [O,Q] = zt();
    let P = y(!1), S = y(!1), C = y("followers"), M = y(!1), le = y(null), me = y("post"), _e = y(!1), G = fe( () => x().state?.postModalId ?? x().url.searchParams.get("post")), se = fe( () => !!e(G)), a = y(null), I = y(tt([])), ve = y(!0), A = y(!1), he = y(""), oe = y(!1), W = y(null), Z = y(!1), u = y("posts"), F = y(!1), ee = y(!1), K = y(null), ne = y(""), q = y(!1), N = y(!1), L = y(!1), ue, X = fe( () => !e(a) || !h()?.id ? !1 : h().id === e(a).id), Me = fe( () => {
        if (!g() || !e(a) || e(a).isBlockedByMe || e(a).isBlockedByThem)
            return !1;
        if (e(X))
            return !0;
        if (e(a).isPrivate && !e(a).isFollowing)
            return !1;
        const r = e(a).wallAccess || "everyone";
        return !(r === "nobody" || r === "followers" && !e(a).isFollowing || r === "mutual" && !(e(a).isFollowing && e(a).isFollowedBy))
    }
    ), te = fe( () => {
        if (!e(a) || e(a).isBlockedByMe || e(a).isBlockedByThem)
            return !1;
        if (e(X))
            return !0;
        const r = e(a).likesVisibility || "everyone";
        return !!(r === "everyone" || r === "followers" && e(a).isFollowing || r === "mutual" && e(a).isFollowing && e(a).isFollowedBy)
    }
    );
    at( () => {
        const r = x().params.username;
        r && r !== e(ne) && (t(ne, r, !0),
        typeof window < "u" && window.scrollTo({
            top: 0,
            behavior: "instant"
        }),
        ae(r))
    }
    );
    let H = y(null);
    at( () => {
        if (!h() || !e(a) || h().id !== e(a).id)
            return;
        const r = `${h().displayName}|${h().username}|${h().bio}|${h().avatar}`;
        e(H) !== r && (t(H, r),
        t(a, {
            ...e(a),
            displayName: h().displayName,
            username: h().username || e(a).username,
            bio: h().bio || e(a).bio,
            avatar: h().avatar || e(a).avatar
        }, !0))
    }
    );
    async function ae(r) {
        t(he, "");
        const c = Ie.getProfile(r);
        if (c) {
            t(a, c.profile, !0);
            const Be = e(u) === "posts" ? c.posts : c.liked;
            t(I, Be.posts, !0),
            t(W, Be.nextCursor, !0),
            t(Z, Be.hasMore, !0),
            t(ve, !1),
            t(ee, !0),
            pe(r);
            return
        }
        t(ve, !0),
        t(a, null),
        t(I, [], !0);
        const m = await Ce.getProfile(r);
        if (m.error) {
            t(he, m.error, !0),
            t(ve, !1);
            return
        }
        t(a, m.data, !0);
        const E = e(u) === "posts" ? await Pe.getUserPosts(r, {
            limit: 20,
            pinnedPostId: e(a).pinnedPostId
        }) : await Pe.getLikedPosts(r, {
            limit: 20
        });
        E.data && (t(I, E.data.posts, !0),
        t(W, E.data.pagination.nextCursor, !0),
        t(Z, E.data.pagination.hasMore, !0),
        Ie.setProfile(r, e(a), {
            posts: e(I),
            nextCursor: e(W),
            hasMore: e(Z)
        }, e(u))),
        t(ve, !1)
    }
    async function pe(r) {
        const c = await Ce.getProfile(r);
        if (c.data) {
            t(a, c.data, !0);
            const m = e(u) === "posts" ? await Pe.getUserPosts(r, {
                limit: 20,
                pinnedPostId: e(a).pinnedPostId
            }) : await Pe.getLikedPosts(r, {
                limit: 20
            });
            m.data && (t(I, m.data.posts, !0),
            t(W, m.data.pagination.nextCursor, !0),
            t(Z, m.data.pagination.hasMore, !0),
            Ie.setProfile(r, e(a), {
                posts: e(I),
                nextCursor: e(W),
                hasMore: e(Z)
            }, e(u)))
        }
        t(ee, !1)
    }
    async function be() {
        if (!e(a))
            return;
        const r = e(a).username
          , c = Ie.getProfile(r);
        if (c) {
            const E = e(u) === "posts" ? c.posts : c.liked;
            if (E.posts.length > 0) {
                t(I, E.posts, !0),
                t(W, E.nextCursor, !0),
                t(Z, E.hasMore, !0),
                t(F, !1),
                t(ee, !0),
                ge();
                return
            }
        }
        t(F, !0),
        t(I, [], !0),
        t(W, null),
        t(Z, !1);
        const m = e(u) === "posts" ? await Pe.getUserPosts(r, {
            limit: 20,
            pinnedPostId: e(a).pinnedPostId
        }) : await Pe.getLikedPosts(r, {
            limit: 20
        });
        m.data && (t(I, m.data.posts, !0),
        t(W, m.data.pagination.nextCursor, !0),
        t(Z, m.data.pagination.hasMore, !0),
        Ie.setPostsTab(r, e(u), {
            posts: e(I),
            nextCursor: e(W),
            hasMore: e(Z)
        })),
        t(F, !1)
    }
    async function ge() {
        if (!e(a))
            return;
        const r = e(a).username
          , c = e(u) === "posts" ? await Pe.getUserPosts(r, {
            limit: 20,
            pinnedPostId: e(a).pinnedPostId
        }) : await Pe.getLikedPosts(r, {
            limit: 20
        });
        c.data && (t(I, c.data.posts, !0),
        t(W, c.data.pagination.nextCursor, !0),
        t(Z, c.data.pagination.hasMore, !0),
        Ie.setPostsTab(r, e(u), {
            posts: e(I),
            nextCursor: e(W),
            hasMore: e(Z)
        })),
        t(ee, !1)
    }
    async function Y(r) {
        e(u) !== r && (t(u, r, !0),
        await be())
    }
    async function d() {
        if (e(A) || !e(Z) || !e(W) || !e(a))
            return;
        t(A, !0);
        const r = e(a).username
          , c = e(u) === "posts" ? await Pe.getUserPosts(r, {
            cursor: e(W),
            limit: 20
        }) : await Pe.getLikedPosts(r, {
            cursor: e(W),
            limit: 20
        });
        if (c.data) {
            const m = new Set(e(I).map(Be => Be.id))
              , E = c.data.posts.filter(Be => !m.has(Be.id));
            t(I, [...e(I), ...E], !0),
            t(W, c.data.pagination.nextCursor, !0),
            t(Z, c.data.pagination.hasMore, !0),
            Ie.appendPosts(r, e(u), E, e(W), e(Z))
        }
        t(A, !1)
    }
    async function i() {
        if (!e(a) || e(oe) || !g())
            return;
        t(oe, !0);
        const r = e(a).isFollowing
          , c = e(a).username;
        t(a, {
            ...e(a),
            isFollowing: !r,
            followersCount: r ? e(a).followersCount - 1 : e(a).followersCount + 1
        }, !0),
        Ie.updateProfile(c, {
            isFollowing: !r,
            followersCount: e(a).followersCount
        });
        const m = c || e(a).id;
        (r ? await Ce.unfollow(m) : await Ce.follow(m)).success || (t(a, {
            ...e(a),
            isFollowing: r,
            followersCount: r ? e(a).followersCount + 1 : e(a).followersCount - 1
        }, !0),
        Ie.updateProfile(c, {
            isFollowing: r,
            followersCount: e(a).followersCount
        })),
        t(oe, !1)
    }
    function v(r) {
        t(le, r, !0),
        t(me, "post"),
        t(M, !0)
    }
    function k() {
        e(a) && (t(le, e(a).id, !0),
        t(me, "user"),
        t(M, !0))
    }
    async function b() {
        if (!e(a))
            return;
        const r = e(a).username || e(a).id;
        (await Ce.blockUser(r)).success && e(a) && t(a, {
            ...e(a),
            isBlockedByMe: !0,
            isFollowing: !1,
            isFollowedBy: !1
        }, !0)
    }
    async function p() {
        if (!e(a))
            return;
        const r = e(a).username || e(a).id;
        if ((await Ce.unblockUser(r)).success) {
            const m = e(a).username || e(a).id;
            Ie.clear(m),
            await ae(m)
        }
    }
    async function U(r, c) {
        e(le) && await ya.createReport({
            targetType: e(me),
            targetId: e(le),
            reason: r,
            description: c || void 0
        })
    }
    function $(r) {
        g() && Pe.recordView(r)
    }
    async function re(r) {
        if (!e(a))
            return;
        (await Pe.pinPost(r)).success && t(a, {
            ...e(a),
            pinnedPostId: r
        }, !0)
    }
    async function R(r) {
        if (!e(a))
            return;
        (await Pe.unpinPost(r)).success && t(a, {
            ...e(a),
            pinnedPostId: null
        }, !0)
    }
    let j = fe( () => {
        if (!e(a)?.pinnedPostId || e(u) !== "posts")
            return e(I);
        const r = e(a).pinnedPostId
          , c = e(I).findIndex(Be => Be.id === r);
        if (c === -1)
            return e(I);
        const m = e(I)[c]
          , E = [...e(I).slice(0, c), ...e(I).slice(c + 1)];
        return [m, ...E]
    }
    );
    function ce() {
        return e(u) === "posts" ? "  " : "   "
    }
    function Fe(r, c) {
        const m = e(a)?.username || e(ne);
        m && la(`/${m}?post=${r}`, {
            postModalId: r
        })
    }
    function ze() {
        if (!e(se))
            return;
        const r = e(a)?.username || e(ne);
        x().state?.postModalId ? history.back() : Pt(`/${r}`, {})
    }
    na( ({to: r}) => {
        if (e(se) && r) {
            const c = e(a)?.username || e(ne);
            Pt(`/${c}`, {})
        }
    }
    );
    function z(r) {
        t(C, r, !0),
        t(S, !0)
    }
    function V() {
        t(q, !0)
    }
    function B() {
        t(q, !1)
    }
    async function D(r, c) {
        t(N, !0);
        const m = new File([r],`banner-${Date.now()}.png`,{
            type: "image/png"
        })
          , E = await Qe.uploadFile(m);
        if (E.error || !E.data) {
            t(N, !1),
            B();
            return
        }
        (await Ce.updateProfile({
            bannerId: E.data.id
        })).data && e(a) && t(a, {
            ...e(a),
            banner: E.data.url
        }, !0),
        t(N, !1),
        B()
    }
    async function we() {
        if (!e(a)?.banner)
            return;
        t(N, !0),
        (await Ce.updateProfile({
            bannerId: null
        })).data && e(a) && t(a, {
            ...e(a),
            banner: void 0
        }, !0),
        t(N, !1)
    }
    async function ke(r, c) {
        if (!e(a))
            return {
                success: !1,
                error: "No profile"
            };
        const m = await Pe.createPost({
            content: c,
            attachmentIds: r,
            wallRecipientId: e(X) ? void 0 : e(a).id
        });
        return m.error ? {
            success: !1,
            error: m.error
        } : (m.data && e(u) === "posts" && (t(I, [m.data, ...e(I)], !0),
        Ie.prependPost(e(a).username, m.data),
        t(K, m.data.id, !0),
        requestAnimationFrame( () => {
            const E = document.querySelector(`[data-post-id="${m.data.id}"]`);
            E && E.scrollIntoView({
                behavior: "smooth",
                block: "center"
            })
        }
        ),
        setTimeout( () => {
            t(K, null)
        }
        , 2500)),
        {
            success: !0
        })
    }
    function Ue() {
        t(L, !0)
    }
    function Se() {
        t(L, !1)
    }
    async function Ge(r, c) {
        const m = new File([r],`drawing-${Date.now()}.png`,{
            type: "image/png"
        });
        ue?.addDrawing(c, m),
        Se()
    }
    var $e = Br()
      , Le = de($e);
    {
        var Vt = r => {
            var c = yr()
              , m = n(c);
            Je(m, {}),
            o(c),
            l(r, c)
        }
          , Et = r => {
            var c = ye()
              , m = de(c);
            {
                var E = Re => {
                    var Te = kr()
                      , et = n(Te)
                      , st = n(et, !0);
                    o(et),
                    o(Te),
                    T( () => ie(st, e(he))),
                    l(Re, Te)
                }
                  , Be = Re => {
                    var Te = ye()
                      , et = de(Te);
                    {
                        var st = ot => {
                            var nt = Fr()
                              , mt = n(nt);
                            Va(mt, {
                                get banner() {
                                    return e(a).banner
                                },
                                get isOwnProfile() {
                                    return e(X)
                                },
                                get isSaving() {
                                    return e(N)
                                },
                                onDrawBanner: V,
                                onRemoveBanner: we
                            });
                            var ht = f(mt, 2);
                            $a(ht, {
                                get profile() {
                                    return e(a)
                                },
                                get isOwnProfile() {
                                    return e(X)
                                },
                                get isAuthenticated() {
                                    return g()
                                },
                                get isFollowLoading() {
                                    return e(oe)
                                },
                                onEditProfile: () => t(P, !0),
                                onVerify: () => t(_e, !0),
                                onFollow: i,
                                onReport: k,
                                onBlock: b,
                                onUnblock: p,
                                onFollowersClick: () => z("followers"),
                                onFollowingClick: () => z("following")
                            });
                            var bt = f(ht, 2);
                            {
                                var Kt = xe => {
                                    ar(xe, {
                                        get activeTab() {
                                            return e(u)
                                        },
                                        onTabChange: Y,
                                        get canSeeLikes() {
                                            return e(te)
                                        }
                                    })
                                }
                                ;
                                w(bt, xe => {
                                    e(a).isBlockedByMe || xe(Kt)
                                }
                                )
                            }
                            var yt = f(bt, 2);
                            {
                                var Zt = xe => {
                                    {
                                        let Ae = fe( () => h()?.avatar)
                                          , lt = fe( () => h()?.displayName);
                                        rt(ur(xe, {
                                            get currentUserAvatar() {
                                                return e(Ae)
                                            },
                                            get currentUserName() {
                                                return e(lt)
                                            },
                                            get recipientName() {
                                                return e(a).displayName
                                            },
                                            get isOwnProfile() {
                                                return e(X)
                                            },
                                            onPostCreated: ke,
                                            onOpenDrawing: Ue
                                        }), vt => ue = vt, () => ue)
                                    }
                                }
                                ;
                                w(yt, xe => {
                                    !e(a).isBlockedByMe && e(u) === "posts" && e(Me) && xe(Zt)
                                }
                                )
                            }
                            var Xt = f(yt, 2);
                            {
                                var Yt = xe => {
                                    var Ae = xr();
                                    l(xe, Ae)
                                }
                                  , Jt = xe => {
                                    var Ae = ye()
                                      , lt = de(Ae);
                                    {
                                        var vt = Ne => {
                                            var Ve = Pr()
                                              , ut = n(Ve);
                                            Je(ut, {}),
                                            o(Ve),
                                            l(Ne, Ve)
                                        }
                                          , Qt = Ne => {
                                            var Ve = ye()
                                              , ut = de(Ve);
                                            {
                                                var Gt = Ee => {
                                                    var Oe = Cr()
                                                      , dt = n(Oe, !0);
                                                    o(Oe),
                                                    T(kt => ie(dt, kt), [ce]),
                                                    l(Ee, Oe)
                                                }
                                                  , $t = Ee => {
                                                    var Oe = Mr()
                                                      , dt = n(Oe);
                                                    wa(dt, {
                                                        get items() {
                                                            return e(j)
                                                        },
                                                        keyFn: Ze => Ze.id,
                                                        onLoadMore: d,
                                                        get hasMore() {
                                                            return e(Z)
                                                        },
                                                        get isLoading() {
                                                            return e(A)
                                                        },
                                                        children: (Ze, ea) => {
                                                            let We = () => ea?.().item;
                                                            {
                                                                let ta = fe( () => e(a)?.pinnedPostId === We().id)
                                                                  , aa = fe( () => e(X) && e(u) === "posts")
                                                                  , ra = fe( () => e(K) === We().id);
                                                                ga(Ze, {
                                                                    get post() {
                                                                        return We()
                                                                    },
                                                                    get isPinned() {
                                                                        return e(ta)
                                                                    },
                                                                    get canPin() {
                                                                        return e(aa)
                                                                    },
                                                                    get isHighlighted() {
                                                                        return e(ra)
                                                                    },
                                                                    get isWallOwner() {
                                                                        return e(X)
                                                                    },
                                                                    onReport: () => v(We().id),
                                                                    onView: $,
                                                                    onPin: () => re(We().id),
                                                                    onUnpin: () => R(We().id),
                                                                    onModalOpen: Fe
                                                                })
                                                            }
                                                        }
                                                        ,
                                                        loading: Ze => {
                                                            Je(Ze, {})
                                                        }
                                                        ,
                                                        $$slots: {
                                                            default: !0,
                                                            loading: !0
                                                        }
                                                    }),
                                                    o(Oe),
                                                    l(Ee, Oe)
                                                }
                                                ;
                                                w(ut, Ee => {
                                                    e(j).length === 0 ? Ee(Gt) : Ee($t, !1)
                                                }
                                                , !0)
                                            }
                                            l(Ne, Ve)
                                        }
                                        ;
                                        w(lt, Ne => {
                                            e(F) ? Ne(vt) : Ne(Qt, !1)
                                        }
                                        , !0)
                                    }
                                    l(xe, Ae)
                                }
                                ;
                                w(Xt, xe => {
                                    e(a).isBlockedByMe ? xe(Yt) : xe(Jt, !1)
                                }
                                )
                            }
                            o(nt),
                            l(ot, nt)
                        }
                        ;
                        w(et, ot => {
                            e(a) && ot(st)
                        }
                        , !0)
                    }
                    l(Re, Te)
                }
                ;
                w(m, Re => {
                    e(he) ? Re(E) : Re(Be, !1)
                }
                , !0)
            }
            l(r, c)
        }
        ;
        w(Le, r => {
            e(ve) ? r(Vt) : r(Et, !1)
        }
        )
    }
    var ft = f(Le, 2);
    {
        var Wt = r => {
            var c = Ur()
              , m = de(c);
            fa(m, {
                get isOpen() {
                    return e(P)
                },
                onClose: () => t(P, !1)
            });
            var E = f(m, 2);
            br(E, {
                get isOpen() {
                    return e(_e)
                },
                onClose: () => t(_e, !1)
            }),
            l(r, c)
        }
        ;
        w(ft, r => {
            e(X) && r(Wt)
        }
        )
    }
    var _t = f(ft, 2);
    {
        var jt = r => {
            {
                let c = fe( () => e(a).username || e(a).id);
                Oa(r, {
                    get isOpen() {
                        return e(S)
                    },
                    get type() {
                        return e(C)
                    },
                    get username() {
                        return e(c)
                    },
                    get isOwnProfile() {
                        return e(X)
                    },
                    onClose: () => t(S, !1)
                })
            }
        }
        ;
        w(_t, r => {
            e(a) && r(jt)
        }
        )
    }
    var pt = f(_t, 2);
    ca(pt, {
        get isOpen() {
            return e(M)
        },
        onClose: () => t(M, !1),
        onSubmit: U
    });
    var gt = f(pt, 2);
    Ft(gt, {
        get isOpen() {
            return e(L)
        },
        onSave: Ge,
        onClose: Se
    });
    var wt = f(gt, 2);
    {
        let r = fe( () => e(a)?.banner);
        Ft(wt, {
            get isOpen() {
                return e(q)
            },
            get initialImage() {
                return e(r)
            },
            onSave: D,
            onClose: B,
            aspectRatio: 3,
            get isSaving() {
                return e(N)
            }
        })
    }
    var qt = f(wt, 2);
    {
        var Ht = r => {
            _a(r, {
                children: (c, m) => {
                    pa(c, {
                        get isOpen() {
                            return e(se)
                        },
                        get postId() {
                            return e(G)
                        },
                        onClose: ze
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        w(qt, r => {
            e(se) && e(G) && r(Ht)
        }
        )
    }
    l(J, $e),
    Ke(),
    Q()
}
export {qr as component};
import "../chunks/DsnmJJEf.js";
import {X as Ie, p as Pe, s as L, D as Z, o as Ae, f as i, c as s, Z as R, i as v, a as Le, k as n, g as e, e as r, r as a, j as me, b as re, h as We, a1 as m} from "../chunks/ByWyckft.js";
import {i as w} from "../chunks/CmM7tx7L.js";
import {e as G, s as Ue, i as Ve} from "../chunks/C1pxLudc.js";
import {a as je, A as qe, r as Be, d as Ee} from "../chunks/Dy9ItHHp.js";
import {g as we} from "../chunks/DF08NYXu.js";
import "../chunks/BNIeskg8.js";
import {d as Me, w as M, h as Oe, u as ke, L as be, A as Te, V as Ce, f as de} from "../chunks/NCWCRVn4.js";
const Qe = {
    async search(ve, le=5, F=5) {
        const $ = await je.get(qe.search.global, {
            q: ve,
            userLimit: le,
            hashtagLimit: F
        });
        return $.error ? {
            error: $.error.message
        } : {
            data: $.data
        }
    }
};
var Xe = i('<div class="explore-loading svelte-1w567vk"><!></div>')
  , Ze = i('<div class="explore-section svelte-1w567vk"><div class="explore-section__loading svelte-1w567vk"><!></div></div>')
  , Ge = i('<div class="explore-section svelte-1w567vk"><p class="explore-section__empty svelte-1w567vk"> </p></div>')
  , Je = i('<span class="explore-user__username svelte-1w567vk"> </span>')
  , Ke = i('<button class="explore-user svelte-1w567vk"><!> <div class="explore-user__info svelte-1w567vk"><span class="explore-user__name svelte-1w567vk"> <!></span> <!> <span class="explore-user__followers svelte-1w567vk"> </span></div></button>')
  , Ye = i('<div class="explore-section svelte-1w567vk"><h3 class="explore-section__title svelte-1w567vk"></h3> <!></div>')
  , ea = i('<button class="explore-hashtag svelte-1w567vk"><div class="explore-hashtag__icon svelte-1w567vk">#</div> <div class="explore-hashtag__info svelte-1w567vk"><span class="explore-hashtag__name svelte-1w567vk"> </span> <span class="explore-hashtag__count svelte-1w567vk"> </span></div></button>')
  , aa = i('<div class="explore-section svelte-1w567vk"><h3 class="explore-section__title svelte-1w567vk"></h3> <!></div>')
  , sa = i("<!> <!>", 1)
  , ta = i('<button class="explore-hashtag svelte-1w567vk"><div class="explore-hashtag__rank svelte-1w567vk"> </div> <div class="explore-hashtag__info svelte-1w567vk"><span class="explore-hashtag__name svelte-1w567vk"> </span> <span class="explore-hashtag__count svelte-1w567vk"> </span></div></button>')
  , ra = i('<div class="explore-section svelte-1w567vk"><h3 class="explore-section__title svelte-1w567vk"> </h3> <!></div>')
  , va = i('<span class="explore-user__username svelte-1w567vk"> </span>')
  , la = i('<span class="explore-user__mutual svelte-1w567vk"> </span>')
  , oa = i('<span class="explore-user__followers svelte-1w567vk"> </span>')
  , na = i('<button class="explore-user svelte-1w567vk"><!> <div class="explore-user__info svelte-1w567vk"><span class="explore-user__name svelte-1w567vk"> <!></span> <!> <!></div></button>')
  , ia = i('<div class="explore-section svelte-1w567vk"><h3 class="explore-section__title svelte-1w567vk"> </h3> <!></div>')
  , _a = i('<div><span class="explore-clan__rank svelte-1w567vk"></span> <span class="explore-clan__avatar svelte-1w567vk"> </span> <span class="explore-clan__count svelte-1w567vk"> </span></div>')
  , pa = i('<div class="explore-section svelte-1w567vk"><h3 class="explore-section__title svelte-1w567vk"> </h3> <div class="explore-clans svelte-1w567vk"></div></div>')
  , da = i('<div class="explore-empty svelte-1w567vk"><p>    </p> <p class="explore-empty__hint svelte-1w567vk">   ,    !</p></div>')
  , ca = i("<!> <!> <!> <!>", 1)
  , ua = i('<div class="explore-content svelte-1w567vk"><!></div>')
  , ha = i('<div class="explore-card svelte-1w567vk"><header class="explore-header svelte-1w567vk"><div class="explore-search svelte-1w567vk"><input type="text" placeholder="   " class="explore-search__input svelte-1w567vk"/> <span class="explore-search__icon svelte-1w567vk"><!></span></div></header> <!></div>');
function Ca(ve, le) {
    Pe(le, !0);
    let F = L(Z([])), $ = L(Z([])), W = L(Z([])), J = L(!0), K = L(""), j = L(Z([])), q = L(Z([])), Y = L(!1), ce;
    Ae(async () => {
        await ye()
    }
    );
    async function ye() {
        const t = M.getWhoToFollow()
          , _ = M.getTopClans()
          , f = M.getTrendingHashtags();
        if (t && _ && f) {
            n($, t, !0),
            n(W, _, !0),
            n(F, f, !0),
            n(J, !1);
            return
        }
        n(J, !0);
        const B = [];
        f || B.push(Oe.getTrending(10)),
        t || B.push(ke.getWhoToFollow()),
        _ || B.push(ke.getTopClans());
        const O = await Promise.all(B);
        let z = 0;
        if (f)
            n(F, f, !0);
        else {
            const k = O[z++];
            k.data && (n(F, k.data.hashtags, !0),
            M.setTrendingHashtags(e(F)))
        }
        if (t)
            n($, t, !0);
        else {
            const k = O[z++];
            k.data && (n($, k.data, !0),
            M.setWhoToFollow(e($)))
        }
        if (_)
            n(W, _, !0);
        else {
            const k = O[z++];
            k.data && (n(W, k.data, !0),
            M.setTopClans(e(W)))
        }
        n(J, !1)
    }
    function Se(t) {
        const _ = t.target.value;
        if (n(K, _, !0),
        clearTimeout(ce),
        !_.trim()) {
            n(j, [], !0),
            n(q, [], !0),
            n(Y, !1);
            return
        }
        n(Y, !0),
        ce = setTimeout(async () => {
            const f = await Qe.search(_, 5, 5);
            f.data ? (n(q, f.data.users || [], !0),
            n(j, f.data.hashtags || [], !0)) : (n(q, [], !0),
            n(j, [], !0)),
            n(Y, !1)
        }
        , 500)
    }
    function ue(t) {
        we(`/hashtag/${t}`)
    }
    function he(t) {
        we(`/${t}`)
    }
    function fe(t) {
        if (t === 0)
            return " ";
        if (t === 1)
            return "1 ";
        if (t >= 1e6)
            return (t / 1e6).toFixed(1).replace(/\.0$/, "") + "  ";
        if (t >= 1e3)
            return (t / 1e3).toFixed(1).replace(/\.0$/, "") + " . ";
        const _ = t % 10
          , f = t % 100;
        return f >= 11 && f <= 14 ? `${t} ` : _ === 1 ? `${t} ` : _ >= 2 && _ <= 4 ? `${t} ` : `${t} `
    }
    let $e = We( () => e(j).length > 0 || e(q).length > 0);
    var oe = ha()
      , ne = s(oe)
      , xe = s(ne)
      , ee = s(xe);
    Be(ee),
    ee.__input = Se;
    var ge = r(ee, 2)
      , Ne = s(ge);
    Me(Ne, {
        size: 18
    }),
    a(ge),
    a(xe),
    a(ne);
    var Re = r(ne, 2);
    {
        var ze = t => {
            var _ = Xe()
              , f = s(_);
            be(f, {}),
            a(_),
            v(t, _)
        }
          , De = t => {
            var _ = ua()
              , f = s(_);
            {
                var B = z => {
                    var k = me()
                      , ae = re(k);
                    {
                        var ie = A => {
                            var H = Ze()
                              , E = s(H)
                              , Q = s(E);
                            be(Q, {}),
                            a(E),
                            a(H),
                            v(A, H)
                        }
                          , se = A => {
                            var H = me()
                              , E = re(H);
                            {
                                var Q = l => {
                                    var p = Ge()
                                      , S = s(p)
                                      , T = s(S);
                                    a(S),
                                    a(p),
                                    R( () => m(T, `     "${e(K) ?? ""}"`)),
                                    v(l, p)
                                }
                                  , _e = l => {
                                    var p = sa()
                                      , S = re(p);
                                    {
                                        var T = c => {
                                            var h = Ye()
                                              , C = r(s(h), 2);
                                            G(C, 17, () => e(q), x => x.id, (x, o) => {
                                                var g = Ke();
                                                g.__click = () => he(e(o).username?.trim() || e(o).id);
                                                var y = s(g);
                                                Te(y, {
                                                    get avatar() {
                                                        return e(o).avatar
                                                    },
                                                    get name() {
                                                        return e(o).displayName
                                                    },
                                                    size: 44
                                                });
                                                var D = r(y, 2)
                                                  , I = s(D)
                                                  , U = s(I)
                                                  , X = r(U);
                                                {
                                                    var u = P => {
                                                        Ce(P, {
                                                            size: 16
                                                        })
                                                    }
                                                    ;
                                                    w(X, P => {
                                                        e(o).verified && P(u)
                                                    }
                                                    )
                                                }
                                                a(I);
                                                var b = r(I, 2);
                                                {
                                                    var V = P => {
                                                        var pe = Je()
                                                          , He = s(pe);
                                                        a(pe),
                                                        R( () => m(He, `@${e(o).username ?? ""}`)),
                                                        v(P, pe)
                                                    }
                                                    ;
                                                    w(b, P => {
                                                        e(o).username && P(V)
                                                    }
                                                    )
                                                }
                                                var te = r(b, 2)
                                                  , Fe = s(te);
                                                a(te),
                                                a(D),
                                                a(g),
                                                R(P => {
                                                    m(U, `${e(o).displayName ?? ""} `),
                                                    m(Fe, `${P ?? ""} `)
                                                }
                                                , [ () => de(e(o).followersCount)]),
                                                v(x, g)
                                            }
                                            ),
                                            a(h),
                                            v(c, h)
                                        }
                                        ;
                                        w(S, c => {
                                            e(q).length > 0 && c(T)
                                        }
                                        )
                                    }
                                    var d = r(S, 2);
                                    {
                                        var N = c => {
                                            var h = aa()
                                              , C = r(s(h), 2);
                                            G(C, 17, () => e(j), x => x.id, (x, o) => {
                                                var g = ea();
                                                g.__click = () => ue(e(o).name);
                                                var y = r(s(g), 2)
                                                  , D = s(y)
                                                  , I = s(D);
                                                a(D);
                                                var U = r(D, 2)
                                                  , X = s(U, !0);
                                                a(U),
                                                a(y),
                                                a(g),
                                                R(u => {
                                                    m(I, `#${e(o).name ?? ""}`),
                                                    m(X, u)
                                                }
                                                , [ () => fe(e(o).postsCount)]),
                                                v(x, g)
                                            }
                                            ),
                                            a(h),
                                            v(c, h)
                                        }
                                        ;
                                        w(d, c => {
                                            e(j).length > 0 && c(N)
                                        }
                                        )
                                    }
                                    v(l, p)
                                }
                                ;
                                w(E, l => {
                                    e($e) ? l(_e, !1) : l(Q)
                                }
                                , !0)
                            }
                            v(A, H)
                        }
                        ;
                        w(ae, A => {
                            e(Y) ? A(ie) : A(se, !1)
                        }
                        )
                    }
                    v(z, k)
                }
                  , O = z => {
                    var k = ca()
                      , ae = re(k);
                    {
                        var ie = l => {
                            var p = ra()
                              , S = r(s(p), 2);
                            G(S, 19, () => e(F), T => T.id, (T, d, N) => {
                                var c = ta();
                                c.__click = () => ue(e(d).name);
                                var h = s(c)
                                  , C = s(h, !0);
                                a(h);
                                var x = r(h, 2)
                                  , o = s(x)
                                  , g = s(o);
                                a(o);
                                var y = r(o, 2)
                                  , D = s(y, !0);
                                a(y),
                                a(x),
                                a(c),
                                R(I => {
                                    m(C, e(N) + 1),
                                    m(g, `#${e(d).name ?? ""}`),
                                    m(D, I)
                                }
                                , [ () => fe(e(d).postsCount)]),
                                v(T, c)
                            }
                            ),
                            a(p),
                            v(l, p)
                        }
                        ;
                        w(ae, l => {
                            e(F).length > 0 && l(ie)
                        }
                        )
                    }
                    var se = r(ae, 2);
                    {
                        var A = l => {
                            var p = ia()
                              , S = r(s(p), 2);
                            G(S, 17, () => e($), T => T.id, (T, d) => {
                                var N = na();
                                N.__click = () => he(e(d).username?.trim() || e(d).id);
                                var c = s(N);
                                Te(c, {
                                    get avatar() {
                                        return e(d).avatar
                                    },
                                    get name() {
                                        return e(d).displayName
                                    },
                                    size: 44
                                });
                                var h = r(c, 2)
                                  , C = s(h)
                                  , x = s(C)
                                  , o = r(x);
                                {
                                    var g = u => {
                                        Ce(u, {
                                            size: 16
                                        })
                                    }
                                    ;
                                    w(o, u => {
                                        e(d).verified && u(g)
                                    }
                                    )
                                }
                                a(C);
                                var y = r(C, 2);
                                {
                                    var D = u => {
                                        var b = va()
                                          , V = s(b);
                                        a(b),
                                        R( () => m(V, `@${e(d).username ?? ""}`)),
                                        v(u, b)
                                    }
                                    ;
                                    w(y, u => {
                                        e(d).username && u(D)
                                    }
                                    )
                                }
                                var I = r(y, 2);
                                {
                                    var U = u => {
                                        var b = la()
                                          , V = s(b);
                                        a(b),
                                        R( () => m(V, `${e(d).mutualCount ?? ""}  `)),
                                        v(u, b)
                                    }
                                      , X = u => {
                                        var b = oa()
                                          , V = s(b);
                                        a(b),
                                        R(te => m(V, `${te ?? ""} `), [ () => de(e(d).followersCount)]),
                                        v(u, b)
                                    }
                                    ;
                                    w(I, u => {
                                        e(d).mutualCount > 0 ? u(U) : u(X, !1)
                                    }
                                    )
                                }
                                a(h),
                                a(N),
                                R( () => m(x, `${e(d).displayName ?? ""} `)),
                                v(T, N)
                            }
                            ),
                            a(p),
                            v(l, p)
                        }
                        ;
                        w(se, l => {
                            e($).length > 0 && l(A)
                        }
                        )
                    }
                    var H = r(se, 2);
                    {
                        var E = l => {
                            var p = pa()
                              , S = r(s(p), 2);
                            G(S, 21, () => e(W), Ve, (T, d, N) => {
                                var c = _a();
                                Ue(c, 1, "explore-clan svelte-1w567vk", null, {}, {
                                    "is-top-3": N < 3
                                });
                                var h = s(c);
                                h.textContent = N + 1;
                                var C = r(h, 2)
                                  , x = s(C, !0);
                                a(C);
                                var o = r(C, 2)
                                  , g = s(o, !0);
                                a(o),
                                a(c),
                                R(y => {
                                    m(x, e(d).avatar),
                                    m(g, y)
                                }
                                , [ () => de(e(d).memberCount)]),
                                v(T, c)
                            }
                            ),
                            a(S),
                            a(p),
                            v(l, p)
                        }
                        ;
                        w(H, l => {
                            e(W).length > 0 && l(E)
                        }
                        )
                    }
                    var Q = r(H, 2);
                    {
                        var _e = l => {
                            var p = da();
                            v(l, p)
                        }
                        ;
                        w(Q, l => {
                            e(F).length === 0 && e($).length === 0 && e(W).length === 0 && l(_e)
                        }
                        )
                    }
                    v(z, k)
                }
                ;
                w(f, z => {
                    e(K).trim() ? z(B) : z(O, !1)
                }
                )
            }
            a(_),
            v(t, _)
        }
        ;
        w(Re, t => {
            e(J) ? t(ze) : t(De, !1)
        }
        )
    }
    a(oe),
    R( () => Ee(ee, e(K))),
    v(ve, oe),
    Le()
}
Ie(["input", "click"]);
export {Ca as component};
import "../chunks/DsnmJJEf.js";
import {X as Me, p as ve, f as k, c as i, e as v, Z as Y, i as m, a as pe, r, s as c, D as W, o as Se, k as a, j as ue, b as se, g as e, a1 as N, _ as Ne, u as De, h as le} from "../chunks/ByWyckft.js";
import {i as I, b as Ee} from "../chunks/CmM7tx7L.js";
import {a as Ce, s as Ke} from "../chunks/BIPZIaNt.js";
import {p as ze} from "../chunks/CmX0Oqut.js";
import {g as He, b as Xe, r as je, p as Ye} from "../chunks/DF08NYXu.js";
import {w as de, u as ie, A as Ze, V as Ge, l as X, p as xe, R as Je, m as Qe, n as Ue, L as Pe, P as et, a as tt, b as at} from "../chunks/NCWCRVn4.js";
import "../chunks/BNIeskg8.js";
import {V as st} from "../chunks/CRKMqfnF.js";
import {s as ce, e as $e} from "../chunks/C1pxLudc.js";
import {p as ot} from "../chunks/B4HP8HCJ.js";
import {i as rt} from "../chunks/Dy9ItHHp.js";
import {r as nt} from "../chunks/FkQX6A-G.js";
var lt = k('<header class="feed-tabs svelte-1thmq55"><button></button> <button></button></header>');
function it(R, P) {
    ve(P, !0);
    let p = ot(P, "activeTab", 3, "popular");
    function C(b) {
        P.onTabChange?.(b)
    }
    var d = lt()
      , o = i(d);
    let $;
    o.__click = () => C("popular");
    var S = v(o, 2);
    let s;
    S.__click = () => C("following"),
    r(d),
    Y( () => {
        $ = ce(o, 1, "feed-tab svelte-1thmq55", null, $, {
            active: p() === "popular"
        }),
        s = ce(S, 1, "feed-tab svelte-1thmq55", null, s, {
            active: p() === "following"
        })
    }
    ),
    m(R, d),
    pe()
}
Me(["click"]);
var ut = k('<span class="user-card__handle svelte-1u9eu0j"> </span>')
  , dt = k('<article class="user-card svelte-1u9eu0j"><button class="user-card__link svelte-1u9eu0j"><!> <span class="user-card__name svelte-1u9eu0j"> <!></span> <!></button> <button> </button></article>')
  , ct = k('<section class="suggestions svelte-1u9eu0j"><header class="suggestions__header svelte-1u9eu0j"><h3 class="suggestions__title svelte-1u9eu0j"> </h3> <div class="suggestions__controls svelte-1u9eu0j"><button class="suggestions__arrow svelte-1u9eu0j" aria-label=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"></polyline></svg></button> <button class="suggestions__arrow svelte-1u9eu0j" aria-label=""><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"></polyline></svg></button></div></header> <div class="suggestions__scroll svelte-1u9eu0j"><div class="suggestions__track svelte-1u9eu0j"></div></div></section>');
function vt(R, P) {
    ve(P, !0);
    let p = c(W([]))
      , C = c(!0)
      , d = c(W(new Set))
      , o = null
      , $ = c(!1)
      , S = c(!0);
    Se(async () => {
        const u = de.getWhoToFollow();
        if (u) {
            a(p, u, !0),
            a(C, !1),
            setTimeout(s, 100);
            return
        }
        const l = await ie.getWhoToFollow();
        l.data && (a(p, l.data, !0),
        de.setWhoToFollow(l.data)),
        a(C, !1),
        setTimeout(s, 100)
    }
    );
    function s() {
        o && (a($, o.scrollLeft > 5),
        a(S, o.scrollLeft < o.scrollWidth - o.clientWidth - 5))
    }
    function b() {
        o && o.scrollBy({
            left: -170,
            behavior: "smooth"
        })
    }
    function L() {
        o && o.scrollBy({
            left: 170,
            behavior: "smooth"
        })
    }
    async function A(u, l) {
        u.stopPropagation();
        const g = l.username?.trim() || l.id;
        e(d).has(l.id) ? (await ie.unfollow(g)).success && (e(d).delete(l.id),
        a(d, new Set(e(d)), !0)) : (await ie.follow(g)).success && (e(d).add(l.id),
        a(d, new Set(e(d)), !0))
    }
    function D(u) {
        He(`/${u.username?.trim() || u.id}`)
    }
    var F = ue()
      , x = se(F);
    {
        var f = u => {
            var l = ct()
              , g = i(l)
              , _ = v(i(g), 2)
              , w = i(_);
            w.__click = b;
            var M = v(w, 2);
            M.__click = L,
            r(_),
            r(g);
            var y = v(g, 2)
              , V = i(y);
            $e(V, 21, () => e(p), j => j.id, (j, h) => {
                var Z = dt()
                  , E = i(Z);
                E.__click = () => D(e(h));
                var G = i(E);
                Ze(G, {
                    get avatar() {
                        return e(h).avatar
                    },
                    get name() {
                        return e(h).displayName
                    },
                    size: 72
                });
                var J = v(G, 2)
                  , oe = i(J)
                  , fe = v(oe);
                {
                    var ge = T => {
                        Ge(T, {})
                    }
                    ;
                    I(fe, T => {
                        e(h).verified && T(ge)
                    }
                    )
                }
                r(J);
                var _e = v(J, 2);
                {
                    var re = T => {
                        var B = ut()
                          , he = i(B);
                        r(B),
                        Y( () => N(he, `@${e(h).username ?? ""}`)),
                        m(T, B)
                    }
                    ;
                    I(_e, T => {
                        e(h).username && T(re)
                    }
                    )
                }
                r(E);
                var q = v(E, 2);
                let ne;
                q.__click = T => A(T, e(h));
                var Q = i(q, !0);
                r(q),
                r(Z),
                Y( (T, B) => {
                    N(oe, `${e(h).displayName ?? ""} `),
                    ne = ce(q, 1, "user-card__follow svelte-1u9eu0j", null, ne, T),
                    N(Q, B)
                }
                , [ () => ({
                    "is-following": e(d).has(e(h).id)
                }), () => e(d).has(e(h).id) ? "" : ""]),
                m(j, Z)
            }
            ),
            r(V),
            r(y),
            Ee(y, j => o = j, () => o),
            r(l),
            Y( () => {
                w.disabled = !e($),
                M.disabled = !e(S)
            }
            ),
            Ne("scroll", y, s),
            m(u, l)
        }
        ;
        I(x, u => {
            !e(C) && e(p).length > 0 && u(f)
        }
        )
    }
    m(R, F),
    pe()
}
Me(["click"]);
var pt = k('<div><span class="clan-item__rank svelte-15vxund"> </span> <span class="clan-item__avatar svelte-15vxund"> </span> <span class="clan-item__count svelte-15vxund"> </span></div>')
  , ft = k('<section class="top-clans svelte-15vxund"><header class="top-clans__header svelte-15vxund"><h3 class="top-clans__title svelte-15vxund"> </h3></header> <div class="top-clans__list svelte-15vxund"></div></section>');
function gt(R, P) {
    ve(P, !0);
    let p = c(W([]))
      , C = c(!0);
    Se(async () => {
        const s = de.getTopClans();
        if (s) {
            a(p, s, !0),
            a(C, !1);
            return
        }
        const b = await ie.getTopClans();
        b.data && (a(p, b.data, !0),
        de.setTopClans(b.data)),
        a(C, !1)
    }
    );
    function d(s) {
        return s >= 1e6 ? (s / 1e6).toFixed(1).replace(/\.0$/, "") + "M" : s >= 1e3 ? (s / 1e3).toFixed(1).replace(/\.0$/, "") + "K" : s.toString()
    }
    var o = ue()
      , $ = se(o);
    {
        var S = s => {
            var b = ft()
              , L = v(i(b), 2);
            $e(L, 23, () => e(p), A => A.avatar, (A, D, F) => {
                var x = pt();
                let f;
                var u = i(x)
                  , l = i(u, !0);
                r(u);
                var g = v(u, 2)
                  , _ = i(g, !0);
                r(g);
                var w = v(g, 2)
                  , M = i(w, !0);
                r(w),
                r(x),
                Y(y => {
                    f = ce(x, 1, "clan-item svelte-15vxund", null, f, {
                        "is-top-3": e(F) < 3
                    }),
                    N(l, e(F) + 1),
                    N(_, e(D).avatar),
                    N(M, y)
                }
                , [ () => d(e(D).memberCount)]),
                m(A, x)
            }
            ),
            r(L),
            r(b),
            m(s, b)
        }
        ;
        I($, s => {
            !e(C) && e(p).length > 0 && s(S)
        }
        )
    }
    m(R, o),
    pe()
}
var _t = k('<div class="feed-loading svelte-1ooj66h"><!></div>')
  , ht = k('<div class="feed-error svelte-1ooj66h"><p> </p> <button class="svelte-1ooj66h"></button></div>')
  , mt = k('<div class="feed-empty svelte-1ooj66h"><p>  </p></div>')
  , bt = k('<div class="feed-content svelte-1ooj66h"><!> <!></div>')
  , wt = k('<!> <div class="feed-card svelte-1ooj66h"><!> <!></div> <!> <!>', 1);
function Lt(R, P) {
    ve(P, !0);
    const p = () => Ce(ze, "$page", o)
      , C = () => Ce(Qe, "$feedResetSignal", o)
      , d = () => Ce(rt, "$isAuthenticated", o)
      , [o,$] = Ke();
    let S = c(!1)
      , s = c(null)
      , b = c("post");
    const L = "nowkie_feed_active_tab";
    function A() {
        return sessionStorage.getItem(L) === "following" ? "following" : "popular"
    }
    function D(t) {
        sessionStorage.setItem(L, t)
    }
    const F = A()
      , x = X.getTab(F);
    let f = c(W(x?.posts ?? []))
      , u = c(!x)
      , l = c(!1)
      , g = c("")
      , _ = c(W(F))
      , w = c(W(x?.nextCursor ?? null))
      , M = c(W(x?.hasMore ?? !1))
      , y = c(null)
      , V = le( () => p().state?.postModalId ?? p().url.searchParams.get("post"))
      , j = le( () => !!e(V));
    Se( () => {
        x || h()
    }
    ),
    De( () => {
        C() !== 0 && (window.scrollTo({
            top: 0,
            behavior: "smooth"
        }),
        X.clear(),
        a(f, [], !0),
        a(w, null),
        a(M, !1),
        h())
    }
    );
    async function h() {
        a(g, ""),
        a(u, !0);
        const t = await xe.getFeed({
            tab: e(_),
            limit: 20
        });
        t.error ? a(g, t.error, !0) : t.data && (a(f, t.data.posts, !0),
        a(w, t.data.pagination.nextCursor, !0),
        a(M, t.data.pagination.hasMore, !0),
        X.setTab(e(_), {
            posts: t.data.posts,
            nextCursor: t.data.pagination.nextCursor,
            hasMore: t.data.pagination.hasMore
        })),
        a(u, !1)
    }
    async function Z() {
        if (e(l) || !e(M) || !e(w))
            return;
        a(l, !0);
        const t = await xe.getFeed({
            tab: e(_),
            cursor: e(w),
            limit: 20
        });
        if (t.data) {
            const n = new Set(e(f).map(U => U.id))
              , O = t.data.posts.filter(U => !n.has(U.id));
            a(f, [...e(f), ...O], !0),
            a(w, t.data.pagination.nextCursor, !0),
            a(M, t.data.pagination.hasMore, !0),
            X.appendPosts(e(_), O, t.data.pagination.nextCursor, t.data.pagination.hasMore)
        }
        a(l, !1)
    }
    async function E(t) {
        if (e(_) === t)
            return;
        a(_, t, !0),
        D(t);
        const n = X.getTab(t);
        n ? (a(f, n.posts, !0),
        a(w, n.nextCursor, !0),
        a(M, n.hasMore, !0)) : (a(f, [], !0),
        a(w, null),
        a(M, !1),
        await h())
    }
    function G(t) {
        a(s, t, !0),
        a(b, "post"),
        a(S, !0)
    }
    async function J(t, n) {
        e(s) && await nt.createReport({
            targetType: e(b),
            targetId: e(s),
            reason: t,
            description: n || void 0
        })
    }
    function oe(t) {
        d() && xe.recordView(t)
    }
    async function fe(t) {
        a(f, [t, ...e(f)], !0),
        X.prependPost(e(_), t),
        a(y, t.id, !0),
        requestAnimationFrame( () => {
            const n = document.querySelector(`[data-post-id="${t.id}"]`);
            n && n.scrollIntoView({
                behavior: "smooth",
                block: "center"
            })
        }
        ),
        setTimeout( () => {
            a(y, null)
        }
        , 2500)
    }
    function ge(t, n) {
        Ye(`/feed?post=${t}`, {
            postModalId: t
        })
    }
    function _e() {
        e(j) && (p().state?.postModalId ? history.back() : je("/feed", {}))
    }
    Xe( ({to: t}) => {
        e(j) && t && je("/feed", {})
    }
    );
    var re = wt()
      , q = se(re);
    {
        var ne = t => {
            Ue(t, {
                onPostCreated: fe
            })
        }
        ;
        I(q, t => {
            d() && t(ne)
        }
        )
    }
    var Q = v(q, 2)
      , T = i(Q);
    it(T, {
        get activeTab() {
            return e(_)
        },
        onTabChange: E
    });
    var B = v(T, 2);
    {
        var he = t => {
            var n = _t()
              , O = i(n);
            Pe(O, {}),
            r(n),
            m(t, n)
        }
          , Ie = t => {
            var n = ue()
              , O = se(n);
            {
                var U = K => {
                    var z = ht()
                      , ee = i(z)
                      , me = i(ee, !0);
                    r(ee);
                    var be = v(ee, 2);
                    be.__click = h,
                    r(z),
                    Y( () => N(me, e(g))),
                    m(K, z)
                }
                  , Le = K => {
                    var z = ue()
                      , ee = se(z);
                    {
                        var me = H => {
                            var te = mt();
                            m(H, te)
                        }
                          , be = H => {
                            var te = bt();
                            {
                                const Ve = we => {
                                    vt(we, {})
                                }
                                ;
                                var ye = i(te);
                                gt(ye, {});
                                var Ae = v(ye, 2);
                                {
                                    const we = (ae, Oe) => {
                                        let Te = () => Oe?.().item;
                                        {
                                            let We = le( () => e(y) === Te().id);
                                            at(ae, {
                                                get post() {
                                                    return Te()
                                                },
                                                get isHighlighted() {
                                                    return e(We)
                                                },
                                                onReport: () => G(Te().id),
                                                onView: oe,
                                                onModalOpen: ge
                                            })
                                        }
                                    }
                                      , qe = ae => {
                                        Pe(ae, {})
                                    }
                                    ;
                                    let Be = le( () => [{
                                        afterIndex: 2,
                                        snippet: Ve
                                    }]);
                                    st(Ae, {
                                        get items() {
                                            return e(f)
                                        },
                                        keyFn: ae => ae.id,
                                        onLoadMore: Z,
                                        get hasMore() {
                                            return e(M)
                                        },
                                        get isLoading() {
                                            return e(l)
                                        },
                                        get injectSlots() {
                                            return e(Be)
                                        },
                                        children: we,
                                        loading: qe,
                                        $$slots: {
                                            default: !0,
                                            loading: !0
                                        }
                                    })
                                }
                                r(te)
                            }
                            m(H, te)
                        }
                        ;
                        I(ee, H => {
                            e(f).length === 0 ? H(me) : H(be, !1)
                        }
                        , !0)
                    }
                    m(K, z)
                }
                ;
                I(O, K => {
                    e(g) ? K(U) : K(Le, !1)
                }
                , !0)
            }
            m(t, n)
        }
        ;
        I(B, t => {
            e(u) ? t(he) : t(Ie, !1)
        }
        )
    }
    r(Q);
    var ke = v(Q, 2);
    Je(ke, {
        get isOpen() {
            return e(S)
        },
        onClose: () => a(S, !1),
        onSubmit: J
    });
    var Fe = v(ke, 2);
    {
        var Re = t => {
            et(t, {
                children: (n, O) => {
                    tt(n, {
                        get isOpen() {
                            return e(j)
                        },
                        get postId() {
                            return e(V)
                        },
                        onClose: _e,
                        onReport: () => G(e(V))
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        I(Fe, t => {
            e(j) && e(V) && t(Re)
        }
        )
    }
    m(R, re),
    pe(),
    $()
}
Me(["click"]);
export {Lt as component};
import "../chunks/DsnmJJEf.js";
import {X as Rt, p as It, s as T, D as Ht, o as Pt, u as Je, k as h, a5 as Bt, g as e, f as A, b as c, c as i, e as g, Z as K, i as a, a as Tt, r as n, j as m, h as Lt, a1 as Ne, a2 as H, a0 as L} from "../chunks/ByWyckft.js";
import {i as o, b as Vt} from "../chunks/CmM7tx7L.js";
import {s as Q, e as St} from "../chunks/C1pxLudc.js";
import {R as Ot, L as Ke, P as Dt, a as Ut, T as jt, c as Et, N as Ft} from "../chunks/NCWCRVn4.js";
import {n as V, f as Xt, h as Zt, g as qt, s as W} from "../chunks/Dy9ItHHp.js";
import {a as Ae, s as Gt} from "../chunks/BIPZIaNt.js";
import {b as Jt, g as Kt} from "../chunks/DF08NYXu.js";
import "../chunks/BNIeskg8.js";
import {r as Qt} from "../chunks/FkQX6A-G.js";
var Wt = A('<button class="notifications-header__mark-read svelte-1ce0uvz"> </button>')
  , Yt = A('<div class="notifications-loading svelte-1ce0uvz"><!></div>')
  , $t = A('<div class="notifications-empty svelte-1ce0uvz"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1ce0uvz"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg> <p class="svelte-1ce0uvz"> </p></div>')
  , ea = A('<span class="notification-emoji svelte-1ce0uvz"> </span>')
  , ta = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>')
  , aa = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"></path></svg>')
  , ra = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"></path></svg>')
  , sa = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>')
  , va = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"></path></svg>')
  , oa = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></svg>')
  , la = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2zm4 0h10v2H7V5zm0 4h10v2H7V9zm0 4h7v2H7v-2z"></path></svg>')
  , ia = H('<svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor" class="svelte-1ce0uvz"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"></path></svg>')
  , na = A('<p class="notification-preview svelte-1ce0uvz"> </p>')
  , ca = A('<div role="button" tabindex="0"><a class="notification-avatar-wrap svelte-1ce0uvz" title="  "><div class="notification-avatar svelte-1ce0uvz"><!></div> <div><!></div></a> <div class="notification-content svelte-1ce0uvz"><p class="notification-text svelte-1ce0uvz"><a class="notification-author svelte-1ce0uvz"> </a> <span class="notification-action svelte-1ce0uvz"><!></span></p> <!> <!></div></div>')
  , da = A('<div class="notifications-loading-more svelte-1ce0uvz"><!></div>')
  , ua = A('<!> <div class="notifications-sentinel svelte-1ce0uvz" aria-hidden="true"></div> <!>', 1)
  , fa = A('<div class="notifications-card svelte-1ce0uvz"><header class="notifications-header svelte-1ce0uvz"><div class="notifications-header__top svelte-1ce0uvz"><h2 class="notifications-header__title svelte-1ce0uvz"></h2> <!></div> <div class="notifications-tabs svelte-1ce0uvz"><button></button> <button></button></div></header> <div class="notifications-list svelte-1ce0uvz"><!></div></div> <!> <!>', 1);
function xa(Qe, We) {
    It(We, !0);
    const R = () => Ae(Xt, "$notifications", $)
      , Ye = () => Ae(Zt, "$hasMoreNotifications", $)
      , Y = () => Ae(qt, "$isLoadingNotifications", $)
      , [$,$e] = Gt();
    let P = T(!1)
      , S = T(null)
      , ee = T(!1)
      , te = T(null)
      , D = T("all")
      , Z = null
      , U = null
      , q = T(null)
      , G = new Set
      , j = null
      , B = T(Ht(new Set))
      , Re = !1;
    Pt( () => {
        V.fetchNotifications(),
        Z = new IntersectionObserver(t => {
            for (const v of t)
                if (v.isIntersecting) {
                    const z = v.target.getAttribute("data-notification-id")
                      , oe = v.target.getAttribute("data-unread") === "true";
                    z && oe && (G.add(z),
                    et())
                }
        }
        ,{
            threshold: .5
        })
    }
    ),
    Je( () => {
        !Re && R().length > 0 && (h(B, new Set(R().filter(t => !t.read).map(t => t.id)), !0),
        Re = !0)
    }
    ),
    Bt( () => {
        Z?.disconnect(),
        U?.disconnect(),
        j && clearTimeout(j),
        Ie()
    }
    ),
    Je( () => {
        if (e(q))
            return U?.disconnect(),
            U = new IntersectionObserver(t => {
                t[0]?.isIntersecting && Ye() && !Y() && at()
            }
            ,{
                rootMargin: "200px",
                threshold: 0
            }),
            U.observe(e(q)),
            () => {
                U?.disconnect()
            }
    }
    );
    function et() {
        j || (j = setTimeout( () => {
            Ie(),
            j = null
        }
        , 500))
    }
    function Ie() {
        if (G.size === 0)
            return;
        const t = Array.from(G);
        G.clear(),
        V.markBatchAsRead(t)
    }
    function tt(t) {
        return Z?.observe(t),
        {
            destroy() {
                Z?.unobserve(t)
            }
        }
    }
    async function at() {
        const t = R().length;
        await V.fetchNotifications(t);
        const v = R().slice(t);
        for (const z of v)
            z.read || e(B).add(z.id)
    }
    function He(t) {
        if (e(B).delete(t.id),
        t.read || V.markAsRead(t.id),
        ["like", "comment", "reply", "repost", "mention", "wall_post"].includes(t.type) && t.targetId)
            h(S, t.targetId, !0),
            h(P, !0);
        else {
            const z = V.getNotificationLink(t);
            Kt(z)
        }
    }
    function rt() {
        e(P) && (h(P, !1),
        h(S, null))
    }
    Jt( () => {
        e(P) && (h(P, !1),
        h(S, null))
    }
    );
    function st(t) {
        h(te, t, !0),
        h(ee, !0)
    }
    async function vt(t, v) {
        e(te) && await Qt.createReport({
            targetType: "post",
            targetId: e(te),
            reason: t,
            description: v || void 0
        })
    }
    function Pe(t) {
        return `/${t.actor.username || t.actor.id}`
    }
    function Be(t, v) {
        e(B).delete(v.id),
        v.read || V.markAsRead(v.id)
    }
    async function ot() {
        await V.markAllAsRead(),
        e(B).clear()
    }
    let Te = Lt( () => e(D) === "mentions" ? R().filter(t => t.type === "mention" || t.type === "reply") : R());
    var Le = fa()
      , ae = c(Le)
      , re = i(ae)
      , se = i(re)
      , lt = g(i(se), 2);
    {
        var it = t => {
            var v = Wt();
            v.__click = ot,
            a(t, v)
        }
        ;
        o(lt, t => {
            e(B).size > 0 && t(it)
        }
        )
    }
    n(se);
    var Ve = g(se, 2)
      , ve = i(Ve);
    let Se;
    ve.__click = () => h(D, "all");
    var Oe = g(ve, 2);
    let De;
    Oe.__click = () => h(D, "mentions"),
    n(Ve),
    n(re);
    var Ue = g(re, 2)
      , nt = i(Ue);
    {
        var ct = t => {
            var v = Yt()
              , z = i(v);
            Ke(z, {}),
            n(v),
            a(t, v)
        }
          , dt = t => {
            var v = m()
              , z = c(v);
            {
                var oe = O => {
                    var J = $t();
                    a(O, J)
                }
                  , _t = O => {
                    var J = ua()
                      , Ee = c(J);
                    St(Ee, 17, () => e(Te), w => w.id, (w, s) => {
                        var y = ca();
                        let Xe;
                        y.__click = () => He(e(s)),
                        y.__keydown = r => {
                            (r.key === "Enter" || r.key === " ") && (r.preventDefault(),
                            He(e(s)))
                        }
                        ;
                        var E = i(y);
                        E.__click = r => Be(r, e(s));
                        var le = i(E)
                          , gt = i(le);
                        {
                            var mt = r => {
                                var l = ea()
                                  , b = i(l, !0);
                                n(l),
                                K( () => Ne(b, e(s).actor.avatar)),
                                a(r, l)
                            }
                              , zt = r => {
                                Ft(r, {
                                    size: 44
                                })
                            }
                            ;
                            o(gt, r => {
                                e(s).actor.avatar ? r(mt) : r(zt, !1)
                            }
                            )
                        }
                        n(le);
                        var ie = g(le, 2)
                          , yt = i(ie);
                        {
                            var wt = r => {
                                var l = ta();
                                a(r, l)
                            }
                              , bt = r => {
                                var l = m()
                                  , b = c(l);
                                {
                                    var ce = d => {
                                        var k = aa();
                                        a(d, k)
                                    }
                                      , de = d => {
                                        var k = m()
                                          , ue = c(k);
                                        {
                                            var fe = u => {
                                                var x = ra();
                                                a(u, x)
                                            }
                                              , _e = u => {
                                                var x = m()
                                                  , pe = c(x);
                                                {
                                                    var he = f => {
                                                        var M = sa();
                                                        a(f, M)
                                                    }
                                                      , ge = f => {
                                                        var M = m()
                                                          , me = c(M);
                                                        {
                                                            var ze = _ => {
                                                                var C = va();
                                                                a(_, C)
                                                            }
                                                              , ye = _ => {
                                                                var C = m()
                                                                  , we = c(C);
                                                                {
                                                                    var be = p => {
                                                                        var N = oa();
                                                                        a(p, N)
                                                                    }
                                                                      , ke = p => {
                                                                        var N = m()
                                                                          , xe = c(N);
                                                                        {
                                                                            var Me = I => {
                                                                                var Ce = la();
                                                                                a(I, Ce)
                                                                            }
                                                                              , X = I => {
                                                                                var Ce = ia();
                                                                                a(I, Ce)
                                                                            }
                                                                            ;
                                                                            o(xe, I => {
                                                                                e(s).type === "wall_post" ? I(Me) : I(X, !1)
                                                                            }
                                                                            , !0)
                                                                        }
                                                                        a(p, N)
                                                                    }
                                                                    ;
                                                                    o(we, p => {
                                                                        e(s).type === "mention" ? p(be) : p(ke, !1)
                                                                    }
                                                                    , !0)
                                                                }
                                                                a(_, C)
                                                            }
                                                            ;
                                                            o(me, _ => {
                                                                e(s).type === "repost" ? _(ze) : _(ye, !1)
                                                            }
                                                            , !0)
                                                        }
                                                        a(f, M)
                                                    }
                                                    ;
                                                    o(pe, f => {
                                                        e(s).type === "follow" ? f(he) : f(ge, !1)
                                                    }
                                                    , !0)
                                                }
                                                a(u, x)
                                            }
                                            ;
                                            o(ue, u => {
                                                e(s).type === "reply" ? u(fe) : u(_e, !1)
                                            }
                                            , !0)
                                        }
                                        a(d, k)
                                    }
                                    ;
                                    o(b, d => {
                                        e(s).type === "comment" ? d(ce) : d(de, !1)
                                    }
                                    , !0)
                                }
                                a(r, l)
                            }
                            ;
                            o(yt, r => {
                                e(s).type === "like" ? r(wt) : r(bt, !1)
                            }
                            )
                        }
                        n(ie),
                        n(E);
                        var Ze = g(E, 2)
                          , ne = i(Ze)
                          , F = i(ne);
                        F.__click = r => Be(r, e(s));
                        var kt = i(F, !0);
                        n(F);
                        var qe = g(F, 2)
                          , xt = i(qe);
                        {
                            var Mt = r => {
                                var l = L("  ");
                                a(r, l)
                            }
                              , Ct = r => {
                                var l = m()
                                  , b = c(l);
                                {
                                    var ce = d => {
                                        var k = L("  ");
                                        a(d, k)
                                    }
                                      , de = d => {
                                        var k = m()
                                          , ue = c(k);
                                        {
                                            var fe = u => {
                                                var x = L("   ");
                                                a(u, x)
                                            }
                                              , _e = u => {
                                                var x = m()
                                                  , pe = c(x);
                                                {
                                                    var he = f => {
                                                        var M = L("  ");
                                                        a(f, M)
                                                    }
                                                      , ge = f => {
                                                        var M = m()
                                                          , me = c(M);
                                                        {
                                                            var ze = _ => {
                                                                var C = L("   ");
                                                                a(_, C)
                                                            }
                                                              , ye = _ => {
                                                                var C = m()
                                                                  , we = c(C);
                                                                {
                                                                    var be = p => {
                                                                        var N = L(" ");
                                                                        a(p, N)
                                                                    }
                                                                      , ke = p => {
                                                                        var N = m()
                                                                          , xe = c(N);
                                                                        {
                                                                            var Me = X => {
                                                                                var I = L("   ");
                                                                                a(X, I)
                                                                            }
                                                                            ;
                                                                            o(xe, X => {
                                                                                e(s).type === "wall_post" && X(Me)
                                                                            }
                                                                            , !0)
                                                                        }
                                                                        a(p, N)
                                                                    }
                                                                    ;
                                                                    o(we, p => {
                                                                        e(s).type === "mention" ? p(be) : p(ke, !1)
                                                                    }
                                                                    , !0)
                                                                }
                                                                a(_, C)
                                                            }
                                                            ;
                                                            o(me, _ => {
                                                                e(s).type === "repost" ? _(ze) : _(ye, !1)
                                                            }
                                                            , !0)
                                                        }
                                                        a(f, M)
                                                    }
                                                    ;
                                                    o(pe, f => {
                                                        e(s).type === "follow" ? f(he) : f(ge, !1)
                                                    }
                                                    , !0)
                                                }
                                                a(u, x)
                                            }
                                            ;
                                            o(ue, u => {
                                                e(s).type === "reply" ? u(fe) : u(_e, !1)
                                            }
                                            , !0)
                                        }
                                        a(d, k)
                                    }
                                    ;
                                    o(b, d => {
                                        e(s).type === "comment" ? d(ce) : d(de, !1)
                                    }
                                    , !0)
                                }
                                a(r, l)
                            }
                            ;
                            o(xt, r => {
                                e(s).type === "like" ? r(Mt) : r(Ct, !1)
                            }
                            )
                        }
                        n(qe),
                        n(ne);
                        var Ge = g(ne, 2);
                        {
                            var Nt = r => {
                                var l = na()
                                  , b = i(l, !0);
                                n(l),
                                K( () => Ne(b, e(s).preview)),
                                a(r, l)
                            }
                            ;
                            o(Ge, r => {
                                e(s).preview && r(Nt)
                            }
                            )
                        }
                        var At = g(Ge, 2);
                        jt(At, {
                            get date() {
                                return e(s).createdAt
                            },
                            class: "notification-time"
                        }),
                        n(Ze),
                        n(y),
                        Et(y, r => tt?.(r)),
                        K( (r, l, b) => {
                            Xe = Q(y, 1, "notification-item svelte-1ce0uvz", null, Xe, r),
                            W(y, "data-notification-id", e(s).id),
                            W(y, "data-unread", !e(s).read),
                            W(E, "href", l),
                            Q(ie, 1, `notification-badge notification-badge--${e(s).type ?? ""}`, "svelte-1ce0uvz"),
                            W(F, "href", b),
                            Ne(kt, e(s).actor.displayName)
                        }
                        , [ () => ({
                            unread: e(B).has(e(s).id)
                        }), () => Pe(e(s)), () => Pe(e(s))]),
                        a(w, y)
                    }
                    );
                    var Fe = g(Ee, 2);
                    Vt(Fe, w => h(q, w), () => e(q));
                    var pt = g(Fe, 2);
                    {
                        var ht = w => {
                            var s = da()
                              , y = i(s);
                            Ke(y, {}),
                            n(s),
                            a(w, s)
                        }
                        ;
                        o(pt, w => {
                            Y() && R().length > 0 && w(ht)
                        }
                        )
                    }
                    a(O, J)
                }
                ;
                o(z, O => {
                    e(Te).length === 0 ? O(oe) : O(_t, !1)
                }
                , !0)
            }
            a(t, v)
        }
        ;
        o(nt, t => {
            Y() && R().length === 0 ? t(ct) : t(dt, !1)
        }
        )
    }
    n(Ue),
    n(ae);
    var je = g(ae, 2);
    Ot(je, {
        get isOpen() {
            return e(ee)
        },
        onClose: () => h(ee, !1),
        onSubmit: vt
    });
    var ut = g(je, 2);
    {
        var ft = t => {
            Dt(t, {
                children: (v, z) => {
                    Ut(v, {
                        get isOpen() {
                            return e(P)
                        },
                        get postId() {
                            return e(S)
                        },
                        onClose: rt,
                        onReport: () => st(e(S))
                    })
                }
                ,
                $$slots: {
                    default: !0
                }
            })
        }
        ;
        o(ut, t => {
            e(P) && e(S) && t(ft)
        }
        )
    }
    K( () => {
        Se = Q(ve, 1, "notifications-tab svelte-1ce0uvz", null, Se, {
            active: e(D) === "all"
        }),
        De = Q(Oe, 1, "notifications-tab svelte-1ce0uvz", null, De, {
            active: e(D) === "mentions"
        })
    }
    ),
    a(Qe, Le),
    Tt(),
    $e()
}
Rt(["click", "keydown"]);
export {xa as component};
